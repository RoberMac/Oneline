angular.module("Oneline",["ngTouch","ngResource","ngSanitize","ngAnimate","ui.router","angular-jwt","linkify","weibo-emotify","Oneline.templates","Oneline.rootControllers","Oneline.settingsControllers","Oneline.timelineControllers","Oneline.timelineServices","Oneline.actionsServices","Oneline.RESTfulServices","Oneline.relativeDateServices","Oneline.tokenHelperServices","Oneline.UIServices","Oneline.utilsServices","Oneline.olMediaDirectives","Oneline.olTextDirectives","Oneline.olControlCenterDirectives","Oneline.olUserProfileDirectives","Oneline.olUtilsDirectives"]).config(["$locationProvider","$stateProvider","$compileProvider","$animateProvider","$urlRouterProvider","$httpProvider","jwtInterceptorProvider","weiboEmotifyProvider",function(e,t,i,n,r,o,l,s){e.html5Mode(!0),i.aHrefSanitizationWhitelist(/^\s*(https?|blob|data|mailto):/),n.classNameFilter(/animate--\w+/),l.tokenGetter=function(){return localStorage.getItem("tokenList")},o.interceptors.push("jwtInterceptor"),r.otherwise("/"),t.state("settings",{url:"/settings",templateProvider:["$templateCache",function(e){return e.get("settings.html")}],controller:"settingsCtrl"}).state("timeline",{url:"/",templateProvider:["$templateCache",function(e){return e.get("timeline.html")}],controller:"timelineCtrl"}),s.setEmotionsURL("/public/dist/emotions_v1.min.json")}]).factory("timelineCache",["$cacheFactory",function(e){return e("timelineCache")}]).run(["$q",function(e){angular.element.prototype.addClassTemporarily=function(e,t){var i=this;return i.addClass(e),setTimeout(function(){i.removeClass(e)},t),this},angular.element.prototype.delay=function(t){var i=this;return e(function(e,n){setTimeout(function(){e(i)},t)})}}]);
angular.module("Oneline.olControlCenterDirectives",[]).directive("replicantDeckard",["Replicant",function(e){return{restrict:"A",link:function(t,n,i){function a(){r=setInterval(function(){for(var e="";e.length<7;e+=Math.random().toString(36).substr(2));n.html(e.substr(0,7))},100);var i=[];t.providerList.forEach(function(e){var t=JSON.parse(localStorage.getItem("profile_"+e));t&&i.push(t)}),e.deckard({profileList:JSON.stringify(i)}).$promise.then(function(e){var t=60;setTimeout(function(){clearInterval(r),n.html(e.code)},700),o=setInterval(function(){return 0>t?(a(),n.attr("data-countdown",""),void clearInterval(o)):void n.attr("data-countdown",t--)},1e3)},function(e){clearInterval(r)})}var r,o;n.on("$destroy",function(){clearInterval(r),clearInterval(o)}),a()}}}]).directive("replicantRachael",["Replicant","olTokenHelper",function(e,t){return{restrict:"A",link:function(n,i,a){i.on("submit",function(a){a.preventDefault();var r=i.children(),o=r.val();r[0].blur(),e.rachael({code:o}).$promise.then(function(e){e.msg.length>0?e.msg.forEach(function(e){alert(e)}):(t.replaceTokenList(e.tokenList),n.updateProviderList(),e.profileList.forEach(function(e){localStorage.setItem("profile_"+e._provider,JSON.stringify(e))})),n.setControlCenter("")},function(e){r.addClassTemporarily("replicant--rachael--errCode",500)})})}}}]).directive("read",[function(){return{restrict:"A",controller:["$scope","Action",function(e,t){var n=e.controlCenter.split(":"),i=n[1],a=n[0].split("-")[0].split("_")[1],r=n[0].split("-")[1];t.get({action:r,provider:a,id:i}).$promise.then(function(t){e.readType=r,e.readItems=t.data})["catch"](function(){angular.element(document.querySelector(".read .loadMore")).addClass("loadMore--loading--fail")})}]}}]).directive("write",["Action","olUI","writeHelper",function(e,t,n){return{restrict:"A",scope:!1,link:function(i,a,r){var o,l=i.controlCenter.split(":"),c=l[1],s=l[0].split("-")[0].split("_")[1],d=l[0].split("-")[1],u="",p=l[0].split("-")[2],m="tweet"===d||"reply"===d||"weibo"===s?140:"retweet"===d?116:null,f=a.find("button"),v=f.eq(f.length-1),g=a.find("textarea");if(g[0].focus(),"tweet"!==d){var w=document.querySelector('[data-id="'+c+'"]'),h=angular.element(w);switch(d){case"reply":"twitter"===s&&g.val(n.extractMentions(h.find("p")[0].innerText,"@"+l[2]));break;case"retweet":u="retweet","weibo"===s&&(u="tweet"!==p?"quote":"retweet",g.val("tweet"===p?"":"retweet"===p?"//@"+l[2]+": 转发微博":"//@"+l[2]+": "+h.find("p")[0].innerText),g[0].setSelectionRange(0,0)),g.prop("required",!1),v.prop("disabled",!1)}}var _=JSON.parse(localStorage.getItem("profile_"+s))||{};i.item={user:{name:_.displayName,avatar:_.avatar,screen_name:_.screen_name},media:[],text:g.val().trim(),created_at:Date.now(),type:u},"retweet"===u?angular.extend(i.item,n.generateRetweetUser(c,p,s)):"quote"===u?angular.extend(i.item,n.generateQuoteUser(c,p,s)):null,n.generateTemplate("reply"===d?"tweet":u||d,i,s),a.on("submit",function(n){n.preventDefault();var r=g.val().trim(),o={status:r};"twitter"===s?(angular.extend(o,{geo:a.find("geo-picker").find("button").data("geo"),media_ids:a.find("media-upload").find("input").data("media_ids"),sensitive:a.find("toggle-sensitive").find("button").data("sensitive")}),"retweet"===d&&r.length>0&&(o.status=r+" https://twitter.com/"+l[2]+"/status/"+c)):"weibo"===s&&"tweet"===d&&angular.extend(o,{geo:a.find("geo-picker").data("geo")}),g.prop("disabled",!0),v.addClass("write__btn--send--sending"),e.update({action:u||d,provider:s,id:c||0},{params:o}).$promise.then(function(e){if("retweet"===d)if(t.setActionState("retweet",c,"active"),t.actionData("retweet",c,e.id_str),"quote"===u&&"twitter"===s)t.setActionState("retweet",c,"frozen");else{var n=~~t.actionData("retweet",c,null,"count")+1;t.actionData("retweet",c,n,"count")}i.setControlCenter("")})["catch"](function(){v.prop("disabled",!1),g.addClassTemporarily("write__textarea--err",500)})["finally"](function(){g.prop("disabled",!1),v.removeClass("write__btn--send--sending")})}).on("input",function(){var e=g.val().trim(),t="weibo"===s?n.weiboLength(e):e.length;i.item.text=e,n.refreshPreviewText(e,s),"retweet"===d&&(e.length>0?("retweet"===u&&(angular.extend(i.item,n.generateQuoteUser(c,p,s)),n.generateTemplate("quote",i,s)),u="quote"):("quote"===u&&(angular.extend(i.item,n.generateRetweetUser(c,p,s)),n.generateTemplate("retweet",i,s)),u="retweet")),t>m||0===t&&"retweet"!==d?v.prop("disabled",!0):v.prop("disabled",!1),v.attr("data-count",t>0?t:""),v.addClassTemporarily("write__btn--send--typing",700),o?o.addClassTemporarily("actions__button--"+d+"--active",300):null}).on("$destroy",function(){a.off()})}}}]).directive("geoPicker",["$window",function(e){return{restrict:"E",scope:{},templateUrl:"controlCenter/write/component/geoPicker.html",link:function(t,n,i){var a=n.find("button");a.on("click",function(){a.hasClass("tips--active--peace")?a.removeClass("tips--active--peace tips--inprocess").removeData("geo"):(a.addClass("tips--inprocess"),e.navigator.geolocation.getCurrentPosition(function(e){a.addClass("tips--active--peace").removeClass("tips--inprocess").data("geo",{lat:e.coords.latitude,"long":e.coords.longitude})},function(e){a.removeClass("tips--inprocess").addClassTemporarily("tips--error",500)},{maximumAge:6e4,timeout:7e3}))}).on("$destroy",function(){a.off("click")})}}}]).directive("mediaUpload",["Media",function(e){return{restrict:"E",templateUrl:"controlCenter/write/component/mediaUpload.html",link:function(t,n,i){function a(e,n){var i=new FileReader,a=new Image;i.onload=function(e){var i=URL.createObjectURL(l(e.target.result));a.src=i,a.onload=function(){var e=(a.height/a.width).toFixed(5),t=angular.element(document.querySelector(".cancelMask__wrapper .timeline__media"));t.length<=0&&(angular.element(document.querySelector(".cancelMask__wrapper .timeline__content")).append('<div class="timeline__media"></div>'),t=angular.element(document.querySelector(".cancelMask__wrapper .timeline__media"))),t.append('<div class="timeline__media--large" data-mediaId="'+n+'" data-ratio="'+e+'"><img src="'+i+'"></div>')},t.item.media.push({type:"photo",image_url:i,fakeId:n}),t.$apply()},i.readAsDataURL(e)}function r(e){angular.element(document.querySelectorAll('[data-mediaId="'+e+'"]'));t.item.media=t.item.media.filter(function(t){return t.fakeId!==e}),t.$apply()}function o(e,i){var a=angular.element(document.querySelectorAll('[data-mediaId="'+e+'"]'));angular.element(a[0]).css("padding-bottom",100*a.attr("data-ratio")+"%"),a.removeClass("tips--inprocess").attr("data-mediaId",i).on("click",function(){var e=s.data("media_ids")||[],i=a.attr("data-mediaId"),r=e.indexOf(i);e.splice(r,1),e.length<=0?n.removeData("media_ids"):s.data("media_ids",e),a.remove(),t.item.media.splice(r,1),t.$apply()}).on("$destroy",function(){a.off("click")})}function l(e){var t=";base64,";if(-1==e.indexOf(t)){var n=e.split(","),i=n[0].split(":")[1],a=decodeURIComponent(n[1]);return new Blob([a],{type:i})}for(var n=e.split(t),i=n[0].split(":")[1],a=window.atob(n[1]),r=a.length,o=new Uint8Array(r),l=0;r>l;++l)o[l]=a.charCodeAt(l);return new Blob([o],{type:i})}var c=i.provider,s=n.find("input");s.on("change",function(){var t=new FormData,n=s[0].files[0];document.querySelector(".write__previews__item")||s.data("media_ids",[]);var i=Date.now();a(n,i),t.append("twitterMedia",n),e.upload({provider:c},t).$promise.then(function(e){var t=s.data("media_ids")||[],n=e.media_id;t.push(n),s.data("media_ids",t),o(i,n)})["catch"](function(e){r(i)}),s[0].value=""}).on("$destroy",function(){s.off("change")})}}}]).directive("toggleSensitive",function(){return{restrict:"E",scope:{},templateUrl:"controlCenter/write/component/toggleSensitive.html",link:function(e,t,n){var i=t.find("button");i.on("click",function(){i.hasClass("tips--active--peace")?i.removeClass("tips--active--peace").data("sensitive",!1):i.addClass("tips--active--peace").data("sensitive",!0)}).on("$destroy",function(){i.off("click")})}}}).directive("weiboEmotions",function(){return{restrict:"E",scope:{},templateUrl:"controlCenter/write/component/weiboEmotions.html",controller:["$scope",function(e){e.insertEmotion=function(e){e="["+e+"]";var t=document.querySelector("textarea"),n=t.selectionStart,i=t.selectionEnd,a=n+e.length;n||"0"==n?t.value=t.value.substring(0,n)+e+t.value.substring(i,t.value.length):t.value+=e,angular.element(t).parent().triggerHandler("input"),t.setSelectionRange(a,a),t.focus()}}],link:function(e,t,n){var i=t.find("button"),a="笑cry|微笑|嘻嘻|哈哈|可爱|可怜|挖鼻|吃惊|害羞|挤眼|闭嘴|鄙视|爱你|泪|偷笑|亲亲|生病|太开心|白眼|右哼哼|左哼哼|嘘|衰|委屈|吐|哈欠|抱抱|怒|疑问|馋嘴|拜拜|思考|汗|困|睡|钱|失望|酷|色|哼|鼓掌|晕|悲伤|抓狂|黑线|阴险|怒骂|互粉|心|伤心|猪头|熊猫|兔子|ok|耶|good|NO|赞|来|弱|草泥马|给力|围观|威武|奥特曼|礼物|钟|话筒|蜡烛|蛋糕|带着微博去旅行|最右|泪流满面|江南style|去旅行|doge|喵喵";e.isShowEmotions=!1,e.emotionsList=a.split("|"),i.on("click",function(){i.toggleClass("tips--active--peace"),e.$apply(function(){e.isShowEmotions=!e.isShowEmotions}),document.querySelector("textarea").focus()}).on("$destroy",function(){i.off("click")})}}});
angular.module("Oneline.olMediaDirectives",[]).directive("olVideo",function(){return{restrict:"E",scope:{olPoster:"@",olSrc:"@"},templateUrl:"media/video.html",link:function(e,t,i){var n=t.children()[0],r=angular.element(t.children()[1]);n.setAttribute("src",e.olSrc),t.on("click",function(){n.paused?n.play():n.pause(),r.toggleClass("timeline__media__playButton--playing"),t.on("mouseout",function(){n.removeAttribute("loop")})}).on("$destroy",function(){t.off()}),angular.element(n).on("ended",function(){r.removeClass("timeline__media__playButton--playing")})}}}).directive("olImageThumb",function(){return{restrict:"A",link:function(e,t,i){t.on("click",function(){var e=t.parent(),n=e.next(),r=e.children(),a=n.find("img"),l=n.find("a");if(r.removeClass("timeline__media--active").addClass("timeline__media--inactive"),t.addClass("timeline__media--active timeline__media--loading"),e.addClass("timeline__media--small"),n.removeClass("timeline__media--hide"),a.attr("src",i.src.replace(/square|small/,"bmiddle")),l.attr("href",i.src.replace(/square|small/,"large")),a.on("load",function(){1===r.length?t.parent().remove():null,t.removeClass("timeline__media--loading"),a.off("load")}),!a.data("urlList")){var o=Array.prototype.map.call(r,function(e){return angular.element(e).attr("src").replace(/square|small/,"bmiddle")});a.data("urlList",o)}}).on("$destroy",function(){t.off()})}}}).directive("selectImage",function(){return{restrict:"A",link:function(e,t,i){i.imageCount>1&&t.on("mousemove",function(e){e.offsetX-t[0].offsetWidth/2>0?(t.removeClass("cursor--pre"),t.addClass("cursor--next")):(t.removeClass("cursor--next"),t.addClass("cursor--pre"))}).on("click",function(){var e=t.find("img"),i=e.data("urlList")||[],n=i.indexOf(e.attr("src")),r=t.hasClass("cursor--next")?n+1:n-1;if(!(0>r||r>i.length-1)){var a=angular.element(angular.element(t.parent().children()[0]).children()),l=angular.element(a[r]);a.removeClass("timeline__media--active timeline__media--loading"),l.addClass("timeline__media--active timeline__media--loading"),e.on("load",function(){l.removeClass("timeline__media--loading"),e.off("load")}).attr("src",i[r]).next().attr("href",i[r].replace("bmiddle","large"))}}).on("$destroy",function(){t.off()})}}}).directive("handleImageError",function(){return{restrict:"A",link:function(e,t,i){t.on("error",function(){""!==t.attr("src")&&t.attr("src",'data:image/svg+xml;utf8,<svg viewBox="0 0 529 530" xmlns="http://www.w3.org/2000/svg"><g fill="none"><path d="M51.245 150.775c-3.454-1.729-5.458-.098-4.476 3.638l.706 2.688c8.01 30.498-2.986 73.86-24.566 96.854l-.662.706c-2.643 2.816-1.649 5.288 2.193 5.52l136.636 8.237c9.376.565 23.953-2.031 32.554-5.798l21.279-9.319-13.768-18.801c-5.55-7.579-16.851-17.127-25.254-21.333l-124.642-62.392z" fill="#000"/><path d="M9.298 290.938c13.001 129.203 122.073 230.062 254.702 230.062 141.385 0 256-114.615 256-256s-114.615-256-256-256c-84.794 0-159.96 41.226-206.547 104.728" stroke="#000" stroke-width="17" stroke-linecap="round" stroke-linejoin="round"/><path d="M361.259 190.733c-4.06-1.129-8.339-1.733-12.759-1.733-26.234 0-47.5 21.266-47.5 47.5 0 4.115.523 8.109 1.507 11.917" stroke="#000" stroke-width="17" stroke-linecap="round"/><path d="M213.468 406.97c13.141-16.776 37.347-28.026 65.032-28.026 30.37 0 56.552 13.538 68.536 33.056" stroke="#000" stroke-width="17" stroke-linecap="round" stroke-linejoin="round"/></g></svg>')})}}}).directive("olLazyImage",function(){return{restrict:"A",scope:{ratio:"@olLazyImage"},link:function(e,t,i){var n=e.ratio;t.css("padding-bottom",100*n+"%")}}});
angular.module("Oneline.olTextDirectives",[]).directive("trimMediaLink",["$timeout",function(t){return{restrict:"A",link:function(i,e,n){t(function(){e.html(e.html().replace(n.trimMediaLink,""))})}}}]).directive("trimQuoteLink",["$timeout",function(t){return{restrict:"A",link:function(i,e,n){if("quote"===n.trimQuoteLink){var r=/(?:https?\:\/\/)+(?![^\s]*?")([\w.,@?!^=%&amp;:\/~+#-]*[\w@?!^=%&amp;\/~+#-])?$/gi;t(function(){e.html(e.html().replace(r,""))})}}}}]).filter("html",["$sce",function(t){return function(i){return t.trustAsHtml(i)}}]);
angular.module("Oneline.olUserProfileDirectives",[]).directive("userProfile",["$timeout","$compile","$templateRequest","Action",function(e,n,t,o){return{restrict:"A",scope:{profile:"=userProfile"},link:function(r,i,l){i.on("click",function(){var a=r.profile,c=l.from,s=l.provider,u=a.uid;"controlCenter"===c&&i.hasClass("tips--frozen")||(r.user={screen_name:a.screen_name,avatar:a.avatar,name:a.name,uid:u},e(function(){var e=angular.element(document.querySelector(".cancelMask__wrapper")).children();e.empty(),t("controlCenter/read/component/user--"+s+".html").then(function(t){e.append(n(t)(r))})}),"controlCenter"===c?i.addClass("timeline__media--loading"):null,o.get({action:"user",provider:s,id:u}).$promise.then(function(e){angular.extend(r.user,e.data),"controlCenter"===c?i.addClass("timeline__media--active"):null})["catch"](function(){r.user["protected"]=!0,"controlCenter"===c?i.addClass("tips--frozen"):null})["finally"](function(){"controlCenter"===c?i.removeClass("timeline__media--loading"):null}))}),i.on("$destroy",function(){i.off("click")})}}}]).directive("toggleFollowing",["Action",function(e){return{restrict:"A",link:function(n,t,o){t.on("click",function(){var n=angular.element(document.querySelectorAll(".profile__count__column")[1]),r=t.hasClass("profile__following--active"),i=o.toggleFollowing.split(":"),l=i[0],a=i[1];t.addClass("tips--inprocess"),e[r?"destroy":"create"]({action:"follow",provider:l,id:a}).$promise.then(function(e){t.toggleClass("profile__following--active tips--active");var o=~~n.attr("data-count")+(r?-1:1);n.attr("data-count",o)})["catch"](function(e){t.addClassTemporarily("tips--error",500)})["finally"](function(){t.removeClass("tips--inprocess")})})}}}]);
angular.module("Oneline.olUtilsDirectives",[]).directive("onFinishRender",["$timeout",function(i){return{restrict:"A",link:function(n,e,t){(n.$last||n.$first)&&i(function(){n.$emit(t.onFinishRender)})}}}]);
angular.module("Oneline.RESTfulServices",[]).factory("Timeline",["$resource",function(e){return e("/timeline/:id/:count",null,{initLoad:{method:"GET"},load:{method:"GET"}})}]).factory("Action",["$resource",function(e){return e("/actions/:action/:provider/:id",null,{create:{method:"PUT",params:{action:"@action",provider:"@provider",id:"@id"}},destroy:{method:"DELETE"},update:{method:"POST"},get:{method:"GET"}})}]).factory("Auth",["$resource",function(e){return e("/auth/revoke/:provider",null,{revoke:{method:"DELETE"}})}]).factory("Replicant",["$resource",function(e){return e("/auth/replicant/:replicant",null,{deckard:{method:"GET",params:{replicant:"deckard"}},rachael:{method:"POST",params:{replicant:"rachael"}}})}]).factory("Media",["$resource",function(e){return e("/upload/:provider",null,{upload:{method:"POST",transformRequest:angular.identity,headers:{"Content-Type":void 0}}})}]);
angular.module("Oneline.UIServices",[]).service("olUI",["$filter",function(a){this.updateSocialIcon=function(a){var t={twitter:"#2AA9E0",instagram:"#3F5D87",weibo:"#E6162D"},e=["twitter","instagram","weibo"];e.forEach(function(e){var i=document.querySelectorAll('[data-provider="'+e+'"]'),n=angular.element(i[0]),o=angular.element(i[1]);a.indexOf(e)>=0?(n.attr("fill",t[e]),o.addClass("social-icon--active tips--active")):(n.attr("fill","#FFF"),o.removeClass("social-icon--active tips--active"))})},this.setLoading=function(a,t){var e=angular.element(document.getElementsByClassName("loadMore")[1===t?0:1]);"start"===a?(e.removeClass("loadMore--loading--fail"),e.addClass("loadMore--loading")):"done"===a?e.removeClass("loadMore--initLoad loadMore--loading loadMore--loading--fail"):"fail"===a&&e.addClass("loadMore--loading loadMore--loading--fail")},this.isLoading=function(a){var t=angular.element(document.getElementsByClassName("loadMore")[1===a?0:1]);return t.hasClass("loadMore--loading")&&!t.hasClass("loadMore--loading--fail")||t.hasClass("loadMore--initLoad")},this.setDivider=function(t){var e=document.querySelectorAll(".timeline:not(.timeline--quote)");e=angular.element(e[1===t?0:e.length-1]),e.attr("data-date",a("date")(Date.now(),"HH:mm")).addClass(1===t?"divider divider--top":"divider divider--bottom")},this.setPostsCount=function(a,t){var e="newPosts"===a;if(e&&t%1===0){var i=(~~t).toString().split(""),n={0:"⁰",1:"¹",2:"²",3:"³",4:"⁴",5:"⁵",6:"⁶",7:"⁷",8:"⁸",9:"⁹"};__msg="",""!==t&&i.forEach(function(a){__msg+=n[a]}),document.title="｜"+__msg}document.getElementsByClassName("loadMore__count")[e?0:1].setAttribute("data-count",t)};var t=function(a,t){return angular.element(document.querySelector('[data-id="'+t+'"]').querySelector("[data-"+a+"]"))};this.setActionState=function(a,e,i){var n=t(a,e);switch(i){case"wait":n.addClass("actions__button--wait");break;case"done":n.removeClass("actions__button--wait");break;case"active":n.parent().addClass("tips--active icon--"+a);break;case"inactive":n.parent().removeClass("tips--active icon--"+a);break;case"frozen":n.parent().addClass("tips--frozen")}},this.isActionActive=function(a,e){var i=t(a,e);return i.parent().hasClass("icon--"+a)},this.isActionWait=function(a,e){var i=t(a,e);return i.hasClass("actions__button--wait")},this.isActionFrozen=function(a,e){var i=t(a,e);return i.parent().hasClass("tips--frozen")},this.actionData=function(a,e,i,n){var o,s=t(a,e);return"count"===n?(s=s.next(),o="data-count"):o="data-"+a,i||""===i?void s.attr(o,i):s.attr(o)}}]);
angular.module("Oneline.actionsServices",[]).service("olActionsHelper",["Action","olUI",function(t,a){this.toggleAction=function(e,n,o,i){var c=i?"destroy":"create",r=o;return"retweet"===e&&"destroy"===c&&(o=a.actionData(e,r)),t[c]({action:e,provider:n,id:o}).$promise.then(function(t){if("create"===c){if("retweet"===e&&a.actionData(e,r,t.id_str),"star"!==e){var n=~~a.actionData(e,r,null,"count")+1;a.actionData(e,r,n,"count")}}else if("star"!==e){var n=~~a.actionData(e,r,null,"count")-1;a.actionData(e,r,n>0?n:"","count")}})}}]);
angular.module("Oneline.relativeDateServices",["relativeDate"]).value("relativeDateTranslations",{just_now:"0s",seconds_ago:"{{time}}s",a_minute_ago:"1m",minutes_ago:"{{time}}m",an_hour_ago:"1h",hours_ago:"{{time}}h",a_day_ago:"1d",days_ago:"{{time}}d",a_week_ago:"1w",weeks_ago:"{{time}}w",a_month_ago:"1M",months_ago:"{{time}}M",a_year_ago:"1y",years_ago:"{{time}}y",over_a_year_ago:"> 1y",seconds_from_now:"+ {{time}}s",a_minute_from_now:"+ 1m",minutes_from_now:"+ {{time}}m",an_hour_from_now:"+ 1h",hours_from_now:"+ {{time}}h",a_day_from_now:"+ 1d",days_from_now:"+ {{time}}d",a_week_from_now:"+ 1w",weeks_from_now:"+ {{time}}w",a_month_from_now:"+ 1M",months_from_now:"+ {{time}}M",a_year_from_now:"+ 1y",years_from_now:"+ {{time}}y",over_a_year_from_now:"++ 1y"});
angular.module("Oneline.timelineServices",[]).service("olTimelineHelper",["$q","$state","Timeline","timelineCache","olUI","olTokenHelper",function(t,e,n,o,s,i){var r=Date.now(),a=18e5;this.initLoad=function(e){var o=t.defer(),s=this;return n.initLoad().$promise.then(function(t){if(!t||t.data&&t.data.length<1)return void o.reject({status:304});s.storePosts("oldPosts",t,e);var n={data:[],max_id:t.max_id,max_date:t.max_date};return s.storePosts("newPosts",n,e),s.checkOldPosts(e).then(function(t){return t.length>0?s.loadOldPosts(t,e):void o.resolve()})}).then(function(){o.resolve()})["catch"](function(t){o.reject(t)}),o.promise},this.initTimelineSettings=function(){r=Date.now()},this.getId=function(t,e){var n,s,i=(o.get(t),"");return"oldPosts"===t?(n="_maxId-",s="_min_id"):(n="_minId-",s="_max_id"),e.forEach(function(t,r){var a=(o.get("oldPosts"),t+n+o.get(t+s)+(r===e.length-1?"":","));i+=a}),i},this.storePosts=function(t,e,n){var s,i,r,a=o.get(t)||[];"oldPosts"===t?(s="min",i="_min_id",r="_min_date"):(s="max",i="_max_id",r="_max_date"),n.forEach(function(t){var n=t+i,a=e[s+"_id"][t],c=t+r,d=e[s+"_date"][t];a&&o.put(n,a),d&&o.put(c,d)}),a=a.concat(e.data),o.put(t,a)},this.checkOldPosts=function(e){return t(function(t,n){var s=e.filter(function(t){return r-o.get(t+"_min_date")<a});t(s)})},this.extractOldPosts=function(t){for(var e,n=o.get("oldPosts")||[],s=!0;s;)e=n.filter(function(t){var e=r-t.created_at;return e>0&&a>=e}),r-=a,e.length>0&&(s=!1);return this.updateOldPostsCount(t),e},this.loadOldPosts=function(e,o){function s(e){var s=t.defer(),i=a.getId("oldPosts",e);return n.load({id:i,count:100}).$promise.then(function(t){return!t||t.data&&t.data.length<1?void s.reject({status:304}):(t.min_date.twitter&&t.data.splice(0,1),a.storePosts("oldPosts",t,o),void s.resolve())})["catch"](function(t){s.reject(t)}),s.promise}function i(){var e=t.defer();return a.checkOldPosts(o).then(function(t){t.length>0?s(t).then(i).then(function(){e.resolve()})["catch"](function(t){e.reject(t)}):e.resolve()}),e.promise}var r=t.defer(),a=this;return s(e).then(i).then(function(){r.resolve()})["catch"](function(t){r.reject(t)}),r.promise},this.loadNewPosts=function(e){var o=t.defer();return _this=this,n.load({id:_this.getId("newPosts",e),count:100}).$promise.then(function(t){t.data&&t.data.length>0?(_this.storePosts("newPosts",t,e),o.resolve()):o.reject({status:304})},function(t){o.reject(t)}),o.promise},this.removeOldPosts=function(t,e,n){var s=Date.now(),i=o.get("oldPosts")||[];return i=i.concat(e),o.put("oldPosts",i),r=s-a,this.updateOldPostsCount(n),console.time("filter"),t.filter(function(t){return s-t.created_at<a})},this.updateOldPostsCount=function(t){this.checkOldPosts(t).then(function(t){if(t.length>0)s.setPostsCount("oldPosts","");else{var e=o.get("oldPosts")||[],n=0;e.forEach(function(t){var e=r-t.created_at;e>0&&a>=e&&n++}),s.setPostsCount("oldPosts",0===n?"":n)}})},this.handleError=function(t,n){if(console.log(t),t){var o=n;switch(n=o?o:1,t.status){case 304:s.setLoading("done",n);break;case 401:var r=t.data.invalidToken||["twitter","instagram","weibo"];r.forEach(function(t){i.removeToken(t)}),e.go("settings");break;case 429:var a=1e3*t.data.reset,c=new Date(a).toLocaleTimeString("en-GB").substring(0,5);s.setLoading("fail",n),s.setPostsCount("newPosts",c),console.log(a,a-Date.now()),setTimeout(function(){s.setPostsCount("newPosts","⟳")},a-Date.now());break;default:s.setLoading("fail",n)}}}}]);
angular.module("Oneline.tokenHelperServices",[]).service("olTokenHelper",["jwtHelper",function(e){function t(e){try{e=JSON.parse(e)}catch(t){}finally{return e}}this.addToken=function(){var t=localStorage.getItem("addToken"),r=e.decodeToken(t).provider,i=o.get("tokenList")||[];i=n.removeToken(i,r),i.push(t),o.set("tokenList",i),o.remove("addToken")},this.replaceTokenList=function(e){o.set("tokenList",e)},this.removeToken=function(e){var t=o.get("tokenList")||[];t=n.removeToken(t,e),o.set("tokenList",t)},this.clearInvalidToken=function(){var t=o.get("tokenList")||[],n=this;t.forEach(function(t){var o=e.isTokenExpired(t),r=e.decodeToken(t).provider;o&&n.removeToken(r)})},this.getProviderList=function(){var t=o.get("tokenList")||[];return t.map(function(t){return e.decodeToken(t).provider})},this.isValidToken=function(){var t=o.get("tokenList")||[];return t.length>0&&t.every(function(t){return!e.isTokenExpired(t)})};var n={removeToken:function(t,n){return t.filter(function(t){return n!==e.decodeToken(t).provider})}},o={get:function(e){return t(localStorage.getItem(e))},set:function(e,t){localStorage.setItem(e,JSON.stringify(t))},remove:function(e){localStorage.removeItem(e)}}}]);
angular.module("Oneline.utilsServices",[]).service("writeHelper",["$compile","$templateRequest","$timeout","$filter","weiboEmotify",function(e,t,r,n,a){function i(e,t,r,n){var a=document.querySelector('[data-id="'+t+'"]'),i="quote"===r?1:0,l="twitter"===n?"//twitter.com/":"weibo"===n?"//weibo.com/n/":null;switch(e){case"text":return a.querySelectorAll("p")[i].innerText;case"name":return a.querySelectorAll(".timeline__profile__fullname strong")[i].innerText;case"avatar":return a.querySelectorAll(".timeline__profile__avatar")[i].getAttribute("src");case"screen_name":return a.querySelectorAll(".timeline__profile__fullname a")[i].getAttribute("href").replace(l,"");case"created_at":return a.querySelectorAll("[relative-date]")[i].getAttribute("relative-date")}}this.weiboLength=function(e){var t=(e.match(/[\x00-\x7F]+/g)||[]).join("").length,r=e.length-t;return r+Math.round(t/2)},this.extractMentions=function(e,t){var r=[t],n=" ";return r=r.concat(e.match(/(|\s)*@([\w]+)/g)||[]),r=r.map(function(e){return e.trim()}),r=r.filter(function(e,t){return r.indexOf(e)==t}),r.forEach(function(e){n=n+e+" "}),n},this.generateTemplate=function(n,a,i){var l=i+"/"+n+".html",u=angular.element(document.querySelector(".cancelMask__wrapper"));t(l).then(function(t){t='<div class="timeline timeline--'+i+'">'+t+"</div>",u.children().empty().append(e(t)(a))}),r(function(){u.find("button").css("pointer-events","none")}),this.refreshPreviewText(a.item.text,i)},this.generateRetweetUser=function(e,t,r){return{text:i("text",e,t,r),retweet:{user:{name:i("name",e,t,r),avatar:i("avatar",e,t,r),screen_name:i("screen_name",e,t,r)}},media:[],type:"retweet"}},this.generateQuoteUser=function(e,t,r){var n={text:i("text",e,t,r),created_at:i("created_at",e,t,r),user:{name:i("name",e,t,r),avatar:i("avatar",e,t,r),screen_name:i("screen_name",e,t,r)}};return"twitter"===r?{quote:n,type:"quote"}:{retweet:n,type:"quote"}},this.refreshPreviewText=function(e,t){var i=angular.element(document.querySelector(".cancelMask__wrapper"));e=n("linkify")(e,t)||"",r(function(){"twitter"===t?angular.element(i.find("p")[0]).html(e):a.then(function(t){angular.element(i.find("p")[0]).html(t(e)||"")})})}}]);
angular.module("Oneline.rootControllers",[]).controller("rootController",["$rootScope","$window","$scope","$timeout","$state","olTokenHelper","olUI","timelineCache",function(e,t,n,r,o,i,l,a){n.providerList=i.getProviderList(),n.isTimeline=!1,n.controlCenter="",n.updateProviderList=function(){var e=i.getProviderList();r(function(){n.providerList=e,l.updateSocialIcon(e)})},n.setControlCenter=function(e,t){function o(e){var t=["replicant","read","write","userProfile"];return t.map(function(t){return e+t}).join(" ")}n.controlCenter=e,t&&r(function(){n.setControlCenter(t)},700),r(function(){var t=angular.element(document.querySelector(".cancelMask__wrapper")),n=angular.element(document.querySelector(".controlCenter")),r=e.match(/replicant|read|write|userProfile/);r?(t.addClass("cancelMask__wrapper--"+r[0]),n.addClass("controlCenter--"+r[0])):(t.removeClass(o("cancelMask__wrapper--")),n.removeClass(o("controlCenter--")))})},n["goto"]=function(e,t){var r=o.current.name;if("left"===e){if(n.providerList<=0)return;"settings"===r?o.go("timeline"):n.providerList.indexOf("twitter")>=0?n.setControlCenter("write_twitter-tweet"):n.providerList.indexOf("weibo")>=0?n.setControlCenter("write_weibo-tweet"):null}else"timeline"===r?n.controlCenter?n.setControlCenter(""):o.go("settings"):null},angular.element(t).on("keydown",function(e){27===e.keyCode&&n.$apply(function(){n.setControlCenter("")})}),e.$on("$stateChangeStart",function(e,t,r,l,a){"timeline"===t.name&&(i.isValidToken()?n.isTimeline=!0:(e.preventDefault(),o.go("settings")))}),e.$on("$stateChangeSuccess",function(e,t,r,o,l){"settings"===t.name&&(i.isValidToken()||i.clearInvalidToken(),n.isTimeline=!1),document.title="｜",a.removeAll(),n.updateProviderList(),n.setControlCenter("")})}]);
angular.module("Oneline.settingsControllers",[]).controller("settingsCtrl",["$scope","$window","olTokenHelper","Auth",function(e,n,o,t){n.addEventListener("storage",function(n){"addToken"===n.key&&(o.addToken(),e.updateProviderList())}),e.toggleAuth=function(r){e.providerList.indexOf(r)<0?n.open("/auth/"+r,"_blank"):t.revoke({provider:r}).$promise["finally"](function(){o.removeToken(r),e.updateProviderList()})}}]);
angular.module("Oneline.timelineControllers",[]).controller("timelineCtrl",["$scope","$q","Timeline","olUI","olTimelineHelper","olActionsHelper","timelineCache",function(t,e,n,i,o,s,r){function a(){t.autoRefresh=setInterval(function(){i.setLoading("start",1),o.loadNewPosts(t.providerList).then(function(){var t=(r.get("newPosts")||[]).length;i.setLoading("done",1),i.setPostsCount("newPosts",t)})["finally"](function(){i.setLoading("done",1)})},18e4),t.$on("$destroy",function(){clearInterval(t.autoRefresh)})}t.timelineData=[],o.initTimelineSettings(),o.initLoad(t.providerList).then(function(){t.timelineData=o.extractOldPosts(t.providerList),a(),i.setLoading("done",1),i.setLoading("done",-1)})["catch"](function(t){o.handleError(t)}),t.loadMore=function(n){i.isLoading(n)||e(function(e,s){if(i.setLoading("start",n),n>0){i.setPostsCount("newPosts","");var a=r.get("newPosts")||[];a.length>0?e([a,"newPosts"]):o.loadNewPosts(t.providerList).then(function(){e([r.get("newPosts")||[],"newPosts"])},function(t){s(t)})}else o.checkOldPosts(t.providerList).then(function(e){return e.length>0?o.loadOldPosts(e,t.providerList):void 0}).then(function(){var n=o.extractOldPosts(t.providerList);e([t.timelineData.concat(n)])})["catch"](function(t){s(t)})}).then(function(e){if("newPosts"===e[1]){var s=t.timelineData.concat(e[0]);t.timelineData=o.removeOldPosts(s,e[0],t.providerList),r.put("newPosts",[])}else t.timelineData=e[0];i.setDivider(n),i.setLoading("done",n)})["catch"](function(t){o.handleError(t,n)})},t.toggleAction=function(e,n){var o=n.provider,r=n.type,a=n.id_str,c=n.user.screen_name;if(!i.isActionWait(e,a)&&!i.isActionFrozen(e,a)){var l=i.isActionActive(e,a);if(("twitter"===o||"weibo"===o)&&("retweet"===e&&!l||"reply"===e))return void t.setControlCenter("write_"+o+"-"+e+"-"+r+":"+a+":"+c);i.setActionState(e,a,"wait"),i.setActionState(e,a,l?"inactive":"active"),s.toggleAction(e,o,a,l)["catch"](function(t){i.setActionState(e,a,l?"active":"inactive")})["finally"](function(){i.setActionState(e,a,"done")})}}}]);
angular.module("Oneline.templates",[]).run(["$templateCache",function(e){e.put("settings.html",'<!-- Social -->\n<div class="social-wrapper animate--faster">\n    <!-- Twitter -->\n    <div class="social-list vertically_center">\n        <div>\n            <button class="social-icon animate--faster tips" ng-click="toggleAuth(\'twitter\')" data-provider="twitter" type="button">\n                <svg viewBox="0 0 300 300">\n                    <use xlink:href="/public/img/icon-sprites.svg#twitter"></use>\n                </svg>\n            </button>\n        </div>\n    </div>\n    <!-- Instagram -->\n    <div class="social-list vertically_center">\n        <div>\n            <button class="social-icon animate--faster tips" ng-click="toggleAuth(\'instagram\')" data-provider="instagram" type="button">\n                <svg viewBox="0 0 775 300">\n                    <use xlink:href="/public/img/icon-sprites.svg#instagram"></use>\n                </svg>\n            </button>\n        </div>\n    </div>\n    <!-- Weibo -->\n    <div class="social-list vertically_center">\n        <div>\n            <button class="social-icon animate--faster tips" ng-click="toggleAuth(\'weibo\')" data-provider="weibo" type="button">\n                <svg viewBox="0 0 300 300">\n                    <use xlink:href="/public/img/icon-sprites.svg#weibo"></use>\n                </svg>\n            </button>\n        </div>\n    </div>\n</div>\n\n<!-- Replicant -->\n<button ng-if="providerList.length > 0" ng-click="setControlCenter(\'replicant--deckard\')" class="replicant-icon replicant-icon--deckard tips--deep animate--faster" type="button">\n    <svg viewBox="0 0 54 67">\n        <use xlink:href="/public/img/icon-sprites.svg#deckard"></use>\n    </svg>\n</button>\n<button ng-click="setControlCenter(\'replicant--rachael\')" class="replicant-icon replicant-icon--rachael tips--deep animate--faster" type="button">\n    <svg viewBox="0 0 54 67">\n        <use xlink:href="/public/img/icon-sprites.svg#rachael"></use>\n    </svg>\n</button>'),e.put("timeline.html",'<button ng-click="loadMore(1)" class="loadMore loadMore--initLoad loadMore--loading loadMore__count animate--faster" data-count type="button">\n</button>\n\n<div class="timeline" ng-repeat="item in timelineData | orderBy: \'-created_at\'" data-id="{{::item.id_str}}" data-date>\n\n    <div ng-class="::\'timeline--\' + item.provider" ng-include="::item.provider + \'/\' + item.type + \'.html\'"></div>\n\n</div>\n\n<button ng-click="loadMore(-1)" class="loadMore loadMore--initLoad loadMore__count animate--faster" data-count type="button">\n</button>\n'),e.put("actions/instagram.html",'<span class="cursor--pointer">\n    <button ng-click="setControlCenter(\'read_instagram-like\' + \':\' + item.id_str)" class="actions tips--deep" ng-class="::{\'icon--like\': item.favorited}" type="button">\n        <svg class="actions__button" viewBox="0 0 26 26">\n            <use xlink:href="/public/img/icon-sprites.svg#favorite"></use>\n        </svg>\n        <span class="actions__count" ng-attr-data-count="{{::item.favorite_count > 0 ? item.favorite_count : \'\'}}"></span>\n    </button>\n    <button ng-click="setControlCenter(\'read_instagram-reply\' + \':\' + item.id_str)" class="actions tips--deep" type="button">\n        <svg class="actions__button" viewBox="0 0 26 26">\n            <use xlink:href="/public/img/icon-sprites.svg#reply">\n        </svg>\n        <span class="actions__count" ng-attr-data-count="{{::item.reply_count > 0 ? item.reply_count : \'\'}}"></span>\n    </button>\n    <a ng-href="{{::item.link}}" target="_blank">\n        <button class="actions tips--deep" type="button">\n            <svg class="actions__button" viewBox="0 0 26 26" data-source>\n                <use xlink:href="/public/img/icon-sprites.svg#source"></use>\n            </svg>\n            <span class="actions__count"></span>\n        </button>\n    </a>\n</span>\n'),e.put("actions/twitter--quote.html",'<span class="cursor--pointer" data-quote-id="{{::item.quote.id_str}}">\n    <a ng-href="//twitter.com/{{::item.quote.user.screen_name}}/status/{{::item.quote.id_str}}" target="_blank">\n        <button class="actions tips--deep" type="button">\n            <svg class="actions__button" viewBox="0 0 26 26" data-source>\n                <use xlink:href="/public/img/icon-sprites.svg#source"></use>\n            </svg>\n            <span class="actions__count"></span>\n        </button>\n    </a>\n</span>'),e.put("actions/twitter.html",'<span class="cursor--pointer">\n    <!-- Favorite -->\n    <button ng-click="toggleAction(\'like\', item)" class="actions tips--deep" ng-class="::{\'icon--like tips--active\': item.favorited}" type="button">\n        <svg class="actions__button" viewBox="0 0 26 26" data-like>\n            <use xlink:href="/public/img/icon-sprites.svg#favorite"></use>\n        </svg>\n        <span class="actions__count" ng-attr-data-count="{{::item.favorite_count > 0 ? item.favorite_count : \'\'}}"></span>\n    </button>\n    <!-- Retweet -->\n    <button ng-click="toggleAction(\'retweet\', item)" class="actions tips--deep" ng-class="::{\'icon--retweet tips--frozen\': item.retweeted}" type="button">\n        <svg class="actions__button" viewBox="0 0 34 26" data-retweet>\n            <use xlink:href="/public/img/icon-sprites.svg#retweet"></use>\n        </svg>\n        <span class="actions__count" ng-attr-data-count="{{::item.retweet_count > 0 ? item.retweet_count : \'\'}}"></span>\n    </button>\n    <!-- Reply -->\n    <button ng-click="toggleAction(\'reply\', item)" class="actions tips--deep" type="button">\n        <svg class="actions__button" viewBox="0 0 26 26" data-reply>\n            <use xlink:href="/public/img/icon-sprites.svg#reply"></use>\n        </svg>\n        <span class="actions__count"></span>\n    </button>\n    <!-- Source -->\n    <a ng-href="//twitter.com/{{::item.user.screen_name}}/status/{{::item.id_str}}" target="_blank">\n        <button class="actions tips--deep" type="button">\n            <svg class="actions__button" viewBox="0 0 26 26" data-source>\n                <use xlink:href="/public/img/icon-sprites.svg#source"></use>\n            </svg>\n            <span class="actions__count"></span>\n        </button>\n    </a>\n</span>'),e.put("actions/weibo--quote.html",'<span class="cursor--pointer" data-quote-id="{{::item.retweet.id_str}}">\n    <a ng-href="//weibo.com/{{::item.retweet.user.uid}}/{{::item.retweet.mid}}" target="_blank">\n        <button class="actions tips--deep" type="button">\n            <svg class="actions__button" viewBox="0 0 26 26" data-source>\n                <use xlink:href="/public/img/icon-sprites.svg#source"></use>\n            </svg>\n            <span class="actions__count"></span>\n        </button>\n    </a>\n</span>'),e.put("actions/weibo.html",'<span class="cursor--pointer">\n    <!-- Retweet -->\n    <button ng-click="toggleAction(\'retweet\', item)" class="actions tips--deep" type="button">\n        <svg class="actions__button" viewBox="0 0 34 26" data-retweet>\n            <use xlink:href="/public/img/icon-sprites.svg#retweet"></use>\n        </svg>\n        <span class="actions__count" ng-attr-data-count="{{::item.retweet_count > 0 ? item.retweet_count : \'\'}}"></span>\n    </button>\n    <!-- Reply -->\n    <button ng-click="toggleAction(\'reply\', item)" class="actions tips--deep" type="button">\n        <svg class="actions__button" viewBox="0 0 26 26" data-reply>\n           <use xlink:href="/public/img/icon-sprites.svg#reply"></use>\n        </svg>\n        <span class="actions__count" ng-attr-data-count="{{::item.comments_count > 0 ? item.comments_count : \'\'}}"></span>\n    </button>\n    <!-- Source -->\n    <a ng-href="//weibo.com/{{::item.user.uid}}/{{::item.mid}}" target="_blank">\n        <button class="actions tips--deep" type="button">\n            <svg class="actions__button" viewBox="0 0 26 26" data-source>\n                <use xlink:href="/public/img/icon-sprites.svg#source"></use>\n            </svg>\n            <span class="actions__count"></span>\n        </button>\n    </a>\n    <!-- Star -->\n    <button ng-click="toggleAction(\'star\', item)" class="actions tips--deep" type="button">\n        <svg class="actions__button" viewBox="0 0 26 26" data-star>\n            <use xlink:href="/public/img/icon-sprites.svg#star"></use>\n        </svg>\n        <span class="actions__count"></span>\n    </button>\n</span>'),e.put("controlCenter/wrapper.html","<div ng-if=\"controlCenter\" class=\"animate--general\"> \n    <!-- Replicant -->\n    <div ng-if=\"::controlCenter.indexOf('replicant') >= 0\" ng-include=\" 'controlCenter/replicant/' + controlCenter.replace('replicant--', '') + '.html' \" class=\"replicant animate--general\">\n    </div>\n    <!-- Write -->\n    <div ng-if=\"::controlCenter.indexOf('write') >= 0\" ng-include=\" 'controlCenter/write/' + controlCenter.replace('write_', '').split('-')[0] + '.html' \" class=\"animate--general\">\n    </div>\n    <!-- Read -->\n    <div ng-if=\"::controlCenter.indexOf('read_') >= 0\" ng-include=\" 'controlCenter/read/' + controlCenter.replace('read_', '').split('-')[0] + '.html' \" class=\"animate--general\">\n    </div>\n</div>"),e.put("instagram/post.html",'<div class="timeline__profile">\n    <button ng-click="setControlCenter(\'userProfile\')" user-profile="::item.user" provider="instagram" from="timeline" type="button">\n        <img class="timeline__profile__avatar timeline__profile__avatar--instagram" ng-src="{{::item.user.avatar}}">\n    </button>\n    <div class="timeline__profile__fullname">\n        <a ng-href="//instagram.com/{{::item.user.screen_name}}" target="_blank">\n            <strong ng-bind="::item.user.name || item.user.screen_name"></strong>\n        </a>\n    </div>\n</div>\n\n<div class="timeline__content">\n\n    <div ng-include=" \'media/instagram.html\' "></div>\n    <p class="timeline__text" linkify="instagram">{{::item.text | html}}</p>\n</div>\n\n<div ng-include=" \'actions/instagram.html\' "></div>\n\n<span class="timeline__time tips" relative-date="{{::item.created_at}}"></span>\n'),e.put("media/instagram.html",'<div class="timeline__media">\n\n    <div ng-if="::!item.videos" class="timeline__media--large" ol-lazy-image="{{::item.images.ratio}}">\n        <a ng-href="{{::item.images.standard_resolution}}" class="icon--instagram" target="_blank">\n            <svg class="timeline__media__jumpButton tips--deep animate--faster" viewBox="0 0 100 100">\n                <use xlink:href="/public/img/icon-sprites.svg#eyeball"></use>\n            </svg>\n        </a>\n\n        <img ng-src="{{::item.images.standard_resolution}}" handle-image-error>\n    </div>\n\n    <ol-video ng-if="::item.videos" ol-src="{{::item.videos.standard_resolution}}" ol-poster="{{::item.images.low_resolution}}"></ol-video>\n\n</div>\n'),e.put("media/twitter--quote.html",'<div class="timeline__media">\n    <div ng-repeat="media in ::item.quote.media" class="timeline__media--large" ol-lazy-image="{{::media.ratio}}">\n        <a ng-if="::media.type === \'photo\'" ng-href="{{::media.image_url}}:large" class="icon--twitter" target="_blank">\n            <svg class="timeline__media__jumpButton tips--deep animate--faster" viewBox="0 0 100 100">\n                <use xlink:href="/public/img/icon-sprites.svg#eyeball"></use>\n            </svg>\n        </a>\n\n        <img ng-if="::media.type === \'photo\'" ng-src="{{::media.image_url}}" handle-image-error>\n\n        <ol-video ng-if="::media.type !== \'photo\'" ol-src="{{::media.video_url}}" ol-poster="{{::media.image_url + \':small\'}}"></ol-video>\n    </div>\n</div>\n'),e.put("media/twitter.html",'<div class="timeline__media">\n    <div ng-repeat="media in ::item.media" class="timeline__media--large" ol-lazy-image="{{::media.ratio}}">\n        <a ng-if="::media.type === \'photo\'" ng-href="{{::media.image_url}}:large" class="icon--twitter" target="_blank">\n            <svg class="timeline__media__jumpButton tips--deep animate--faster" viewBox="0 0 100 100">\n                <use xlink:href="/public/img/icon-sprites.svg#eyeball"></use>\n            </svg>\n        </a>\n\n        <img ng-if="::media.type === \'photo\'" ng-src="{{::media.image_url}}" handle-image-error>\n\n        <ol-video ng-if="::media.type !== \'photo\'" ol-src="{{::media.video_url}}" ol-poster="{{::media.image_url + \':small\'}}"></ol-video>\n    </div>\n</div>\n'),e.put("media/video.html",'<video ng-attr-poster="{{::olPoster}}" preload="none" loop webkit-playsinline="true"></video>\n\n<svg class="timeline__media__playButton animate--faster" viewBox="0 0 100 100">\n    <use xlink:href="/public/img/icon-sprites.svg#play"></use>\n</svg>'),e.put("media/weibo.html",'<div class="timeline__media overflow--x timeline__media--thumb">\n    <img class="animate--faster" ng-repeat="media in ::item.media" ng-src="{{:: media.image_url}}" ng-class="::{ \'timeline__media--gif\': media.type ===\'gif\' }" ol-image-thumb handle-image-error>\n</div>\n<div class="timeline__media timeline__media--hide" select-image image-count="{{:: item.media.length}}">\n    <img src="" alt="weibo_large_photo" handle-image-error>\n    <a href="" target="_blank" class="icon--weibo" ng-click="$event.stopPropagation()">\n        <svg class="timeline__media__jumpButton tips--deep animate--faster" viewBox="0 0 100 100">\n            <use xlink:href="/public/img/icon-sprites.svg#eyeball"></use>\n        </svg>\n    </a>\n</div>'),e.put("menu/left.html",'<div class="menu menu--left vertically_center animate--faster">\n\n    <div ng-show="isTimeline">\n        <a href="/settings">\n            <button class="menu__button animate--faster" type="button">\n                <svg viewBox="0 0 200 200">\n                    <g fill="none">\n                        <circle fill="#F1F1F1" cx="100" cy="100" r="100"/>\n                        <circle fill="#FFF" cx="100" cy="42.5" r="15" data-provider="twitter"/>\n                        <circle fill="#FFF" cx="100" cy="100" r="15" data-provider="instagram"/>\n                        <circle fill="#FFF" cx="100" cy="157.5" r="15" data-provider="weibo"/>\n                    </g>\n                </svg>\n            </button>\n        </a>\n    </div>\n\n</div>'),e.put("menu/right.html",'<div class="menu menu--right vertically_center animate--faster">\n\n    <div ng-if="!isTimeline && providerList.length > 0">\n        <a href="/">\n            <button class="menu__button animate--faster" type="button">\n                <svg viewBox="0 0 200 200">\n                    <use xlink:href="/public/img/icon-sprites.svg#ok"></use>\n                </svg>\n            </button>\n        </a>\n    </div>\n\n    <div ng-if="isTimeline && !controlCenter && (providerList.indexOf(\'twitter\') >= 0 || providerList.indexOf(\'weibo\') >= 0)" class="animate--general">\n        <button class="menu__button animate--faster" ng-click="setControlCenter(providerList.indexOf(\'twitter\') >= 0 ? \'write_twitter-tweet\' : \'write_weibo-tweet\')" type="button">\n            <svg viewBox="0 0 200 200" ng-class=":: providerList.indexOf(\'twitter\') >= 0 ? \'menu__button--twitter\' : \'menu__button--weibo\' ">\n               <use xlink:href="/public/img/icon-sprites.svg#newTweet"></use>\n            </svg>\n        </button>\n    </div>\n\n</div>'),e.put("twitter/quote.html",'<div ng-include=" \'twitter/component/profile.html\' "></div>\n\n<div ng-include=" \'twitter/component/content.html\' "></div>\n\n<!-- Origin Start -->\n<div class="timeline timeline--quote timeline--quote--twitter">\n\n    <div ng-include=" \'twitter/component/profile--quote.html\' "></div>\n\n    <div ng-include=" \'twitter/component/content--quote.html\' "></div>\n\n    <div ng-include=" \'actions/twitter--quote.html\' "></div>\n\n    <span class="timeline__time" relative-date="{{::item.quote.created_at}}"></span>\n\n</div>\n<!-- Origin End -->\n\n<div ng-include=" \'actions/twitter.html\' "></div>\n\n<span class="timeline__time tips" relative-date="{{::item.created_at}}"></span>'),e.put("twitter/retweet.html",'<div ng-include=" \'twitter/component/profile--retweet.html\' "></div>\n\n<div ng-include=" \'twitter/component/content.html\' "></div>\n\n<button class="timeline--retweet__profile__avatar" ng-click="setControlCenter(\'userProfile\')" user-profile="::item.user" provider="twitter" from="timeline" type="button">\n    <img class="timeline__profile__avatar" ng-src="{{::item.user.avatar.replace(\'normal\', \'bigger\')}}" alt="avatar">\n</button>\n\n<div ng-include=" \'actions/twitter.html\' "></div>\n\n<span class="timeline__time tips" relative-date="{{::item.created_at}}"></span>\n'),e.put("twitter/tweet.html",'<div ng-include=" \'twitter/component/profile.html\' "></div>\n\n<div ng-include=" \'twitter/component/content.html\' "></div>\n\n<div ng-include=" \'actions/twitter.html\' "></div>\n\n<span class="timeline__time tips" relative-date="{{::item.created_at}}"></span>'),e.put("weibo/quote.html",'<div ng-include=" \'weibo/component/profile.html\' "></div>\n\n<div ng-include=" \'weibo/component/content.html\' "></div>\n\n<!-- Origin Start -->\n<div class="timeline timeline--quote timeline--quote--weibo">\n\n    <div ng-include=" \'weibo/component/profile--retweet.html\' "></div>\n\n    <div ng-include=" \'weibo/component/content--retweet.html\' "></div>\n\n    <div ng-include=" \'actions/weibo--quote.html\' "></div>\n\n    <span class="timeline__time" relative-date="{{::item.retweet.created_at}}"></span>\n</div>\n<!-- Origin End -->\n\n<div ng-include=" \'actions/weibo.html\' "></div>\n\n<span class="timeline__time tips" relative-date="{{::item.created_at}}"></span>\n'),e.put("weibo/retweet.html",'<div ng-include=" \'weibo/component/profile--retweet.html\' "></div>\n\n<div ng-include=" \'weibo/component/content--retweet.html\' "></div>\n\n<a class="timeline--retweet__profile__avatar" ng-href="//weibo.com/n/{{::item.user.screen_name}}" target="_blank">\n    <img class="timeline__profile__avatar" ng-src="{{::item.user.avatar.replace(\'/50/\', \'/180/\')}}" alt="avatar">\n</a>\n\n<div ng-include=" \'actions/weibo.html\' "></div>\n\n<span class="timeline__time tips" relative-date="{{::item.created_at}}"></span>\n'),e.put("weibo/tweet.html",'<div ng-include=" \'weibo/component/profile.html\' "></div>\n\n<div ng-include=" \'weibo/component/content.html\' "></div>\n\n<div ng-include=" \'actions/weibo.html\' "></div>\n\n<span class="timeline__time tips" relative-date="{{::item.created_at}}"></span>'),e.put("controlCenter/read/instagram.html",'<div class="read overflow--y" ng-class="{\'read--reply\': readType === \'reply\'}" read>\n    <div ng-if="!readType" class="loadMore loadMore--initLoad loadMore--loading animate--faster"></div>\n\n    <div ng-if="readType === \'like\'" class="read__like">\n        <button ng-repeat="item in ::readItems" class="read__like__avatar timeline__media--inactive" type="button" user-profile="::item" provider="instagram" from="controlCenter">\n            <img ng-src="{{::item.avatar}}">\n        </button>\n\n        <div ng-if="readItems.length === 0" class="read--empty icon--inactive vertically_center">\n            <svg viewBox="0 0 34 26">\n                <use xlink:href="/public/img/icon-sprites.svg#retweet"></use>\n            </svg>\n        </div>\n    </div>\n\n    <ul ng-if="readType === \'reply\'" class="read__reply">\n        <li ng-repeat="item in ::readItems | orderBy: \'- created_at\'" class="vertically_center">\n            <button class="read__reply__avatar timeline__media--inactive" type="button" user-profile="::item" provider="instagram" from="controlCenter">\n                <img ng-src="{{::item.avatar}}">\n            </button>\n            <div class="read__reply__text">\n                <p linkify="instagram">{{::item.text | html}}</p>\n                <span class="read__reply__time tips" relative-date="{{::item.created_at}}"></span>\n            </div>\n        </li>\n\n        <div ng-if="readItems.length === 0" class="read--empty icon--inactive vertically_center">\n            <svg viewBox="0 0 26 26">\n                <use xlink:href="/public/img/icon-sprites.svg#reply"></use>\n            </svg>\n        </div>\n    </ul>\n</div>'),e.put("controlCenter/read/twitter.html",'<div class="read overflow--y" ng-class="{\'read--reply\': readType === \'reply\'}" read>\n    <div ng-if="!readType" class="loadMore loadMore--initLoad loadMore--loading animate--faster"></div>\n\n    <div ng-if="readType === \'retweet\'" class="read__like">\n        <button ng-repeat="item in ::readItems" class="read__like__avatar timeline__media--inactive" type="button" user-profile="::item" provider="twitter" from="controlCenter">\n            <img ng-src="{{::item.avatar}}">\n        </button>\n\n        <div ng-if="readItems.length === 0" class="read--empty icon--inactive vertically_center">\n            <svg viewBox="0 0 34 26">\n                <use xlink:href="/public/img/icon-sprites.svg#retweet"></use>\n            </svg>\n        </div>\n    </div>\n\n    <ul ng-if="readType === \'reply\'" class="read__reply">\n        <li ng-repeat="item in ::readItems | orderBy: \'- created_at\'" class="vertically_center">\n            <button class="read__reply__avatar timeline__media--inactive" type="button" user-profile="::item" provider="twitter" from="controlCenter">\n                <img ng-src="{{::item.avatar}}">\n            </button>\n            <div class="read__reply__text">\n                <p linkify="twitter">{{::item.text | html}}</p>\n                <span class="read__reply__time tips" relative-date="{{::item.created_at}}"></span>\n            </div>\n        </li>\n\n        <div ng-if="readItems.length === 0" class="read--empty icon--inactive vertically_center">\n            <svg viewBox="0 0 26 26">\n                <use xlink:href="/public/img/icon-sprites.svg#reply"></use>\n            </svg>\n        </div>\n    </ul>\n</div>\n<div class="switch-icon">\n    <button ng-click="setControlCenter(\'\', \'write_twitter-retweet:\' + controlCenter.split(\':\')[1])" class="icon--twitter animate--faster tips" type="button">\n        <svg viewBox="0 0 283 150">\n            <use xlink:href="/public/img/icon-sprites.svg#2Write"></use>\n        </svg>\n    </button>\n</div>'),e.put("controlCenter/read/weibo.html",'<div class="read overflow--y" ng-class="{\'read--reply\': readType === \'reply\'}" read>\n    <div ng-if="!readType" class="loadMore loadMore--initLoad loadMore--loading animate--faster"></div>\n\n    <div ng-if="readType === \'retweet\'" class="read__like">\n        <button ng-repeat="item in ::readItems" class="read__like__avatar timeline__media--inactive" type="button" user-profile="::item" provider="weibo" from="controlCenter">\n            <img ng-src="{{::item.avatar}}">\n        </button>\n\n        <div ng-if="readItems.length === 0" class="read--empty icon--inactive vertically_center">\n            <svg viewBox="0 0 34 26">\n                <use xlink:href="/public/img/icon-sprites.svg#retweet"></use>\n            </svg>\n        </div>\n    </div>\n\n    <ul ng-if="readType === \'reply\'" class="read__reply">\n        <li ng-repeat="item in ::readItems | orderBy: \'- created_at\'" class="vertically_center">\n            <a ng-href="//weibo.com/n/{{::item.screen_name}}" class="read__reply__avatar"  target="_blank">\n                <img ng-src="{{::item.avatar}}">\n            </a>\n            <div class="read__reply__text">\n                <p linkify="weibo" weibo-emotify>{{::item.text | html}}</p>\n                <span class="read__reply__time tips" relative-date="{{::item.created_at}}"></span>\n            </div>\n        </li>\n\n        <div ng-if="readItems.length === 0" class="read--empty icon--inactive vertically_center">\n            <svg viewBox="0 0 26 26">\n                <use xlink:href="/public/img/icon-sprites.svg#reply"></use>\n            </svg>\n        </div>\n    </ul>\n</div>\n<div class="switch-icon">\n    <button ng-click="setControlCenter(\'\', \'write_weibo-reply:\' + controlCenter.split(\':\')[1])" class="icon--weibo animate--faster tips" type="button">\n        <svg viewBox="0 0 283 150">\n            <use xlink:href="/public/img/icon-sprites.svg#2Write"></use>\n        </svg>\n    </button>\n</div>'),e.put("controlCenter/replicant/deckard.html",'<span class="replicant--deckard" replicant-deckard data-countdown></span>'),e.put("controlCenter/replicant/rachael.html",'<form method="POST" action="" replicant-rachael>\n    <input class="replicant--rachael" type="text" name="code" placeholder="80af294" required maxlength="7">\n</form>\n'),e.put("controlCenter/write/twitter.html",'<form name="newTweetForm" write>\n\n    <textarea class="write__textarea animate--general" type="text" name="tweet" autocomplete="off" spellcheck="false" required></textarea>\n\n    <div class="write__toolBar">\n        <!-- left -->\n        <geo-picker ng-if="item.type !== \'retweet\'" class="animate--faster"></geo-picker>\n        <!--            ⬇️ 使用 ng-show 防止 mediaIds 丟失 -->\n        <media-upload ng-show="item.type !== \'retweet\' && item.media.length < 4" class="animate--faster" provider="twitter"></media-upload>\n        <toggle-sensitive ng-if="item.media.length > 0" class="animate--faster"></toggle-sensitive>\n        <!-- right -->\n        <button class="write__btn write__btn--send icon--twitter tips" type="submit" data-count disabled>\n            <svg viewBox="0 0 113 72">\n                <use xlink:href="/public/img/icon-sprites.svg#writing"></use>\n            </svg>\n        </button>\n    </div>\n\n    <div class="write__previews">\n        <span ng-repeat="item in item.media" class="write__previews__item tips--active tips--inprocess animate--faster" ng-attr-data-mediaId="{{::item.fakeId}}">\n            <img ng-src="{{::item.image_url}}">\n        </span>\n    </div>\n</form>\n<div class="switch-icon">\n    <button ng-if="::controlCenter.indexOf(\'write_twitter-retweet\') >= 0" ng-click="setControlCenter(\'\', \'read_twitter-retweet:\' + controlCenter.split(\':\')[1])" class="icon--twitter animate--faster tips" type="button">\n        <svg viewBox="0 0 283 150">\n            <use xlink:href="/public/img/icon-sprites.svg#2Retweet"></use>\n        </svg>\n    </button>\n    <button ng-if="::providerList.indexOf(\'weibo\') >= 0 && controlCenter.indexOf(\'write_twitter-tweet\') >= 0" ng-click="setControlCenter(\'\', \'write_weibo-tweet\')" class="animate--faster tips--deep" type="button">\n        <svg viewBox="0 0 283 150">\n            <use xlink:href="/public/img/icon-sprites.svg#2Weibo"></use>\n        </svg>\n    </button>\n</div>'),e.put("controlCenter/write/weibo.html",'<form name="newTweetForm" write>\n\n    <textarea class="write__textarea animate--general" type="text" name="tweet" autocomplete="off" spellcheck="false" required></textarea>\n\n    <div class="write__toolBar">\n        <!-- left -->\n        <weibo-emotions></weibo-emotions>\n        <geo-picker ng-if="::controlCenter.indexOf(\'write_weibo-tweet\') >= 0"></geo-picker>\n        <!-- right -->\n        <button class="write__btn write__btn--send icon--weibo tips" type="submit" data-count disabled>\n            <svg viewBox="0 0 113 72">\n                <use xlink:href="/public/img/icon-sprites.svg#writing"></use>\n            </svg>\n        </button>\n    </div>\n\n    <div class="write__previews"></div>\n</form>\n<div class="switch-icon">\n    <button ng-if="::controlCenter.indexOf(\'write_weibo-reply\') >= 0" ng-click="setControlCenter(\'\', \'read_weibo-reply:\' + controlCenter.split(\':\')[1])" class="icon--weibo animate--faster tips" type="button">\n        <svg viewBox="0 0 283 150">\n            <use xlink:href="/public/img/icon-sprites.svg#2Reply"></use>\n        </svg>\n    </button>\n    <button ng-if="::providerList.indexOf(\'twitter\') >= 0 && controlCenter.indexOf(\'write_weibo-tweet\') >= 0" ng-click="setControlCenter(\'\', \'write_twitter-tweet\')" class="animate--faster tips--deep" type="button">\n        <svg viewBox="0 0 283 150">\n            <use xlink:href="/public/img/icon-sprites.svg#2Twitter"></use>\n        </svg>\n    </button>\n</div>'),e.put("twitter/component/content--quote.html",'<div class="timeline__content">\n    <p class="timeline__text" trim-media-link="{{::item.quote.mediaLink}}" linkify="twitter" ng-bind-html="::item.quote.text"></p>\n    <div ng-if="::item.quote.media && item.quote.media.length > 0" ng-include=" \'media/twitter--quote.html\' "></div>\n</div>'),e.put("twitter/component/content.html",'<div class="timeline__content">\n    <p class="timeline__text" trim-quote-link="{{::item.type}}" trim-media-link="{{::item.mediaLink}}" linkify="twitter" ng-bind-html="::item.text"></p>\n\n    <div ng-if="::item.media && item.media.length > 0" ng-include=" \'media/twitter.html\' "></div>\n</div>'),e.put("twitter/component/profile--quote.html",'<div class="timeline__profile">\n    <button ng-click="setControlCenter(\'userProfile\')" user-profile="::item.quote.user" provider="twitter" from="timeline" type="button">\n        <img class="timeline__profile__avatar" ng-src="{{::item.quote.user.avatar.replace(\'normal\', \'bigger\')}}">\n    </button>\n    <div class="timeline__profile__fullname">\n        <a ng-href="//twitter.com/{{::item.quote.user.screen_name}}" target="_blank">\n            <strong ng-bind="::item.quote.user.name"></strong>\n        <a>\n    </div>\n</div>'),e.put("twitter/component/profile--retweet.html",'<div class="timeline__profile">\n    <button ng-click="setControlCenter(\'userProfile\')" user-profile="::item.retweet.user" provider="twitter" from="timeline" type="button">\n        <img class="timeline__profile__avatar" ng-src="{{::item.retweet.user.avatar.replace(\'normal\', \'bigger\')}}">\n    </button>\n    <div class="timeline__profile__fullname">\n        <a ng-href="//twitter.com/{{::item.retweet.user.screen_name}}" target="_blank">\n            <strong ng-bind="::item.retweet.user.name"></strong>\n        </a>\n    </div>\n</div>'),e.put("twitter/component/profile.html",'<div class="timeline__profile">\n    <button ng-click="setControlCenter(\'userProfile\')" user-profile="::item.user" provider="twitter" from="timeline" type="button">\n        <img class="timeline__profile__avatar" ng-src="{{::item.user.avatar.replace(\'normal\', \'bigger\')}}">\n    </button>\n    <div class="timeline__profile__fullname">\n        <a ng-href="//twitter.com/{{::item.user.screen_name}}" target="_blank">\n            <strong ng-bind="::item.user.name"></strong>\n        </a>\n    </div>\n</div>'),e.put("weibo/component/content--retweet.html",'<div class="timeline__content">\n    <p class="timeline__text" linkify="weibo" weibo-emotify>{{::item.retweet.text | html}}</p>\n\n    <div ng-if="::item.media && item.media.length > 0" ng-include=" \'media/weibo.html\' "></div>\n</div>'),e.put("weibo/component/content.html",'<div class="timeline__content">\n    <p class="timeline__text" linkify="weibo" weibo-emotify>{{::item.text | html}}</p>\n\n    <div ng-if="::item.media && item.type === \'tweet\' && item.media.length > 0" ng-include=" \'media/weibo.html\' "></div>   \n</div>'),e.put("weibo/component/profile--retweet.html",'<div class="timeline__profile">\n    <a ng-href="//weibo.com/n/{{::item.retweet.user.screen_name}}" target="_blank">\n\n        <img class="timeline__profile__avatar" ng-src="{{::item.retweet.user.avatar.replace(\'/50/\', \'/180/\')}}">\n\n    </a>\n    <div class="timeline__profile__fullname">\n        <a ng-href="//weibo.com/n/{{::item.retweet.user.screen_name}}" target="_blank">\n            <strong ng-bind="::item.retweet.user.name"></strong>\n        </a>\n    </div>\n</div>'),e.put("weibo/component/profile.html",'<div class="timeline__profile">\n    <a ng-href="//weibo.com/n/{{::item.user.screen_name}}" target="_blank">\n\n        <img class="timeline__profile__avatar" ng-src="{{::item.user.avatar.replace(\'/50/\', \'/180/\')}}">\n\n    </a>\n    <div class="timeline__profile__fullname">\n        <a ng-href="//weibo.com/n/{{::item.user.screen_name}}" target="_blank">\n            <strong ng-bind="::item.user.name"></strong>\n        </a>\n    </div>\n</div>'),
e.put("controlCenter/read/component/profile.html",'<!-- 貼文數、粉絲數、追隨數 -->\n<div ng-if="::user.counts" class="profile__count">\n    <div class="profile__count__column" ng-attr-data-count="{{::user.counts.statuses}}">\n        <svg viewBox="0 0 60 60">\n            <use xlink:href ng-attr-xlink:href="{{::\'/public/img/icon-sprites.svg#\' + _p_type}}"></use>\n        </svg>\n    </div>\n    <div class="profile__count__column" ng-attr-data-count="{{::user.counts.followed_by}}">\n        <svg viewBox="0 0 60 60">\n            <use xlink:href="/public/img/icon-sprites.svg#followed_by"></use>\n        </svg>\n    </div>\n    <div class="profile__count__column" ng-attr-data-count="{{::user.counts.follows}}">\n        <svg viewBox="0 0 60 60">\n            <use xlink:href="/public/img/icon-sprites.svg#follows"></use>\n        </svg>\n    </div>\n</div>\n<!-- 簡介 -->\n<div ng-if="::user.bio">\n    <p class="timeline__text profile__biography" linkify="{{::_p_provider}}">{{::user.bio | html}}</p>\n</div>\n<div ng-if="::user.website" class="profile__website">\n    <a ng-href="{{::user.website}}" target="_blank">\n        <svg viewBox="0 0 100 100" class="tips animate--faster">\n            <use xlink:href="/public/img/icon-sprites.svg#link"></use>\n        </svg>\n    </a>\n</div>\n<!-- 加載動畫 -->\n<div ng-if="!user.timeline && !user.protected" class="loadMore loadMore--loading"></div>\n<!-- 是否為私人帳號 -->\n<div ng-if="user.protected" class="profile__locked">\n    <svg viewBox="0 0 40 40">\n        <use xlink:href="/public/img/icon-sprites.svg#locked"></use>\n    </svg>\n</div>\n'),e.put("controlCenter/read/component/quote__profile.html",'<div class="timeline__profile">\n    <a ng-href="//twitter.com/{{::item.quote.user.screen_name}}" target="_blank">\n        <img class="timeline__profile__avatar" ng-src="{{::item.quote.user.avatar.replace(\'normal\', \'bigger\')}}">\n    </a>\n    <div class="timeline__profile__fullname">\n        <a ng-href="//twitter.com/{{::item.quote.user.screen_name}}" target="_blank">\n            <strong ng-bind="::item.quote.user.name"></strong>\n        <a>\n    </div>\n</div>'),e.put("controlCenter/read/component/user--instagram.html",'<div class="timeline profile">\n\n    <div class="timeline--instagram profile--instagram">\n        <!-- Profile -->\n        <a class="timeline__profile profile__avatar" ng-href="//instagram.com/{{::user.screen_name}}" target="_blank">\n            <img class="timeline__profile__avatar" ng-src="{{::user.avatar}}" alt="avatar">\n        </a>\n        <div class="timeline__profile timeline__profile__fullname">\n            <a ng-href="//instagram.com/{{::user.screen_name}}" target="_blank">\n                <strong ng-bind="::user.name ? user.name : user.screen_name"></strong>\n            </a>\n        </div>\n\n        <div ng-if="true" ng-include=" \'controlCenter/read/component/profile.html\' " onload="_p_type = \'post\'; _p_provider = \'instagram\' "></div>\n\n        <!-- Timeline -->\n        <div ng-if="::user.timeline.length > 0" ng-repeat="item in ::user.timeline" class="timeline profile__timeline">\n\n            <div class="timeline__content">\n                <div ng-include=" \'media/instagram.html\' "></div>\n                <p class="timeline__text" linkify="instagram">{{::item.text | html}}</p>\n            </div>\n\n            <span class="cursor--pointer">\n                <!-- Favorite -->\n                <button class="actions tips--frozen" type="button">\n                    <svg class="actions__button" viewBox="0 0 26 26">\n                        <use xlink:href="/public/img/icon-sprites.svg#favorite"></use>\n                    </svg>\n                    <span class="actions__count" ng-attr-data-count="{{::item.favorite_count > 0 ? item.favorite_count : \'\'}}"></span>\n                </button>\n                <!-- Reply -->\n                <button class="actions tips--frozen" type="button">\n                    <svg class="actions__button" viewBox="0 0 26 26">\n                        <use xlink:href="/public/img/icon-sprites.svg#reply">\n                    </svg>\n                    <span class="actions__count" ng-attr-data-count="{{::item.reply_count > 0 ? item.reply_count : \'\'}}"></span>\n                </button>\n                <!-- Source -->\n                <a ng-href="{{::item.link}}" target="_blank">\n                    <button class="actions tips--deep" type="button">\n                        <svg class="actions__button" viewBox="0 0 26 26">\n                            <use xlink:href="/public/img/icon-sprites.svg#source"></use>\n                        </svg>\n                        <span class="actions__count"></span>\n                    </button>\n                </a>\n            </span>\n            <span class="timeline__time tips" relative-date="{{::item.created_at}}"></span>\n        </div>\n</div>'),e.put("controlCenter/read/component/user--twitter.html",'<div class="timeline profile">\n\n    <div class="timeline--twitter profile--twitter">\n        <!-- Profile -->\n        <a class="timeline__profile profile__avatar" ng-href="//twitter.com/{{::user.screen_name}}" target="_blank">\n            <img class="timeline__profile__avatar" ng-src="{{::user.avatar.replace(\'normal\', \'bigger\')}}" alt="avatar">\n        </a>\n        <div class="timeline__profile timeline__profile__fullname">\n            <a ng-href="//twitter.com/{{::user.screen_name}}" target="_blank">\n                <strong ng-bind="::user.name"></strong>\n            </a>\n        </div>\n        <div ng-if="::user.timeline">\n            <button class="profile__following tips--deep" ng-class="::{\'profile__following--active tips--active\': user.following}" type="button" toggle-following="twitter:{{::user.uid}}">\n                <svg viewBox="0 0 60 60">\n                    <use xlink:href="/public/img/icon-sprites.svg#following"></use>\n                </svg>\n            </button>\n        </div>\n        <!-- https://groups.google.com/d/msg/angular/5clM0kjHXq8/Hh0DngpjtPwJ -->\n        <div ng-if="true" ng-include=" \'controlCenter/read/component/profile.html\' " onload="_p_type = \'tweet\'; _p_provider = \'twitter\' "></div>\n\n        <!-- Timeline -->\n        <div ng-if="::user.timeline.length > 0" ng-repeat="item in ::user.timeline" class="timeline" ng-class=" item.type === \'retweet\' ? \'profile__timeline--retweet\' : \'profile__timeline\' ">\n\n            <div ng-if="::item.type === \'retweet\'" class="timeline__profile">\n                <a ng-href="//twitter.com/{{::item.retweet.user.screen_name}}" target="_blank">\n                    <img class="timeline__profile__avatar" ng-src="{{::item.retweet.user.avatar.replace(\'normal\', \'bigger\')}}">\n                </a>\n                <div class="timeline__profile__fullname">\n                    <a ng-href="//twitter.com/{{::item.retweet.user.screen_name}}" target="_blank">\n                        <strong ng-bind="::item.retweet.user.name"></strong>\n                    </a>\n                </div>\n            </div>\n\n            <div class="timeline__content">\n                <p class="timeline__text" trim-quote-link="{{::item.type}}" linkify="twitter" ng-bind-html="::item.text"></p>\n                <div ng-if="::item.media" ng-include=" \'media/twitter.html\' "></div>\n            </div>\n\n            <a ng-if="::item.type === \'retweet\'" class="timeline--retweet__profile__avatar" ng-href="//twitter.com/{{::item.user.screen_name}}" target="_blank">\n                <img class="timeline__profile__avatar" ng-src="{{::item.user.avatar}}" alt="avatar">\n            </a>\n\n            <!-- Quote -->\n            <div ng-if="::item.type === \'quote\'" class="timeline timeline--quote timeline--quote--twitter">\n\n                <div ng-include=" \'controlCenter/read/component/quote__profile.html\' "></div>\n\n                <div ng-include=" \'twitter/component/content--quote.html\' "></div>\n\n                <div ng-include=" \'actions/twitter--quote.html\' "></div>\n\n                <span class="timeline__time" relative-date="{{::item.quote.created_at}}"></span>\n\n            </div>\n\n            <span class="cursor--pointer">\n                <!-- Favorite -->\n                <button class="actions tips--frozen" type="button">\n                    <svg class="actions__button" viewBox="0 0 26 26">\n                        <use xlink:href="/public/img/icon-sprites.svg#favorite"></use>\n                    </svg>\n                    <span class="actions__count" ng-attr-data-count="{{::item.favorite_count > 0 ? item.favorite_count : \'\'}}"></span>\n                </button>\n                <!-- Retweet -->\n                <button class="actions tips--frozen" type="button">\n                    <svg class="actions__button" viewBox="0 0 34 26" data-retweet>\n                        <use xlink:href="/public/img/icon-sprites.svg#retweet"></use>\n                    </svg>\n                    <span class="actions__count" ng-attr-data-count="{{::item.retweet_count > 0 ? item.retweet_count : \'\'}}"></span>\n                </button>\n                <!-- Reply -->\n                <button class="actions tips--frozen" type="button">\n                    <svg class="actions__button" viewBox="0 0 26 26">\n                        <use xlink:href="/public/img/icon-sprites.svg#reply">\n                    </svg>\n                    <span class="actions__count" ng-attr-data-count="{{::item.reply_count > 0 ? item.reply_count : \'\'}}"></span>\n                </button>\n                <!-- Source -->\n                <a ng-href="//twitter.com/{{::user.screen_name}}/status/{{::item.id_str}}" target="_blank">\n                    <button class="actions tips--deep" type="button">\n                        <svg class="actions__button" viewBox="0 0 26 26">\n                            <use xlink:href="/public/img/icon-sprites.svg#source"></use>\n                        </svg>\n                        <span class="actions__count"></span>\n                    </button>\n                </a>\n            </span>\n            <span class="timeline__time tips" relative-date="{{::item.created_at}}"></span>\n        </div>\n</div>'),e.put("controlCenter/write/component/geoPicker.html",'<button class="write__btn write__btn--left tips--deep--peace" type="button">\n    <svg viewBox="0 0 200 200">\n        <use xlink:href="/public/img/icon-sprites.svg#geoPicker"></use>\n    </svg>\n</button>'),e.put("controlCenter/write/component/mediaUpload.html",'<label for="uploadMedia" class="write__btn write__btn--media tips--deep--peace" role="button">\n    <svg viewBox="0 0 200 200">\n        <use xlink:href="/public/img/icon-sprites.svg#camera"></use>\n    </svg>\n</label>\n<input style="display: none" id="uploadMedia" type="file" name="twitterMedia" accept="image/gif,image/jpeg,image/jpg,image/png">'),e.put("controlCenter/write/component/toggleSensitive.html",'<button class="write__btn write__btn--left tips--deep--peace" type="button">\n    <svg viewBox="0 0 200 200">\n        <use xlink:href="/public/img/icon-sprites.svg#sensitive"></use>\n    </svg>\n</button>'),e.put("controlCenter/write/component/weiboEmotions.html",'<button class="write__btn write__btn--left tips--deep--peace" type="button">\n    <svg viewBox="0 0 200 200">\n        <use xlink:href="/public/img/icon-sprites.svg#emotions"></use>\n    </svg>\n</button>\n<div ng-if="isShowEmotions" class="write__emotions overflow--y animate--faster">\n    <button ng-repeat="emotion in ::emotionsList" type="button" ng-click="insertEmotion(emotion)" weibo-emotify ng-bind="::\'[\' + emotion + \']\'">\n    </button>\n</div>')}]);
//# sourceMappingURL=oneline.min.js.map