angular.module("Oneline",["ngTouch","ngResource","ngSanitize","ngAnimate","ui.router","angular-jwt","linkify","weibo-emotify","Oneline.templates","Oneline.rootControllers","Oneline.settingsControllers","Oneline.timelineControllers","Oneline.maskControllers","Oneline.utilsServices","Oneline.timelineServices","Oneline.RESTfulServices","Oneline.tokenHelperServices","Oneline.UIServices","Oneline.controlCenterServices","Oneline.maskServices","Oneline.utilsDirectives","Oneline.mediaDirectives","Oneline.textDirectives","Oneline.controlCenterDirectives","Oneline.maskDirectives"]).config(["$locationProvider","$stateProvider","$compileProvider","$animateProvider","$urlRouterProvider","$httpProvider","jwtInterceptorProvider","weiboEmotifyProvider",function(e,t,i,n,r,l,o,s){e.html5Mode(!0),i.aHrefSanitizationWhitelist(/^\s*(https?|blob|data|mailto):/),n.classNameFilter(/animate--\w+/),o.tokenGetter=function(){return localStorage.getItem("tokenList")},l.interceptors.push("jwtInterceptor"),r.otherwise("/"),t.state("settings",{url:"/settings",templateUrl:"settings.html",controller:"settingsCtrl"}).state("timeline",{url:"/",templateUrl:"timeline.html",controller:"timelineCtrl"}).state("timeline.action",{url:"^/{provider:twitter|instagram|weibo}/{action:user|tags|location}/:id?x",controller:"maskCtrl"}),s.setEmotionsURL("/public/dist/emotions_v1.min.json")}]).run(["$q",function(e){angular.element.prototype.addClassTemporarily=function(e,t){var i=this;return i.addClass(e),setTimeout(function(){i.removeClass(e)},t),this},angular.element.prototype.delay=function(t){var i=this;return e(function(e,n){setTimeout(function(){e(i)},t)})}}]);
angular.module("Oneline.controlCenterDirectives",[]).directive("replicantDeckard",["Replicant","store",function(e,t){return{restrict:"A",link:function(n,i,o){function r(){a=setInterval(function(){for(var e="";e.length<7;e+=Math.random().toString(36).substr(2));i.html(e.substr(0,7))},100);var o=[];n.providerList.forEach(function(e){var n=t.get("profile_"+e);n&&o.push(n)}),e.deckard({profileList:JSON.stringify(o)}).$promise.then(function(e){var t=60;setTimeout(function(){clearInterval(a),i.html(e.code)},700),s=setInterval(function(){return 0>t?(r(),i.attr("data-countdown",""),void clearInterval(s)):void i.attr("data-countdown",t--)},1e3)},function(e){clearInterval(a)})}var a,s;i.on("$destroy",function(){clearInterval(a),clearInterval(s)}),r()}}}]).directive("replicantRachael",["Replicant","olTokenHelper","store",function(e,t,n){return{restrict:"A",link:function(i,o,r){o.on("submit",function(r){r.preventDefault();var a=o.children(),s=a.val();a[0].blur(),e.rachael({code:s}).$promise.then(function(e){e.msg.length>0?e.msg.forEach(function(e){alert(e)}):(t.replaceTokenList(e.tokenList),i.updateProviderList(),e.profileList.forEach(function(e){n.set("profile_"+e._provider,e)})),i.setControlCenter("")},function(e){a.addClassTemporarily("replicant--rachael--errCode",500)})})}}}]).directive("read",[function(){return{restrict:"A",controller:["$scope","Action",function(e,t){var n=e.controlCenter.split(":"),i=n[1],o=n[0].split("-")[0].split("_")[1],r=n[0].split("-")[1];t.get({action:r,provider:o,id:i}).$promise.then(function(t){e.readType=r,e.readItems=t.data})["catch"](function(){angular.element(document.querySelector(".read .loadMore__btn")).addClass("loadMore__btn--loading--fail")})}]}}]).directive("notification",["$compile","$timeout",function(e,t){return{restrict:"A",link:function(n,i,o){function r(i,o){return function(){i.hasClass("notification__column--active")||(i.parent().children().removeClass("notification__column--active"),i.addClass("notification__column--active "),t(function(){var t=angular.element(document.querySelector(".cancelMask__wrapper")),i="<"+o+' provider="'+a+'"></'+o+">";t.children().empty().append(e(i)(n))}))}}var a=o.notification,s=angular.element(i.find("button")[0]),c=angular.element(i.find("button")[1]);r(s,"mentions")(),s.on("click",r(s,"mentions")).on("$destroy",function(){s.off()}),c.on("click",r(c,"direct")).on("$destroy",function(){c.off()})}}}]).directive("write",["$timeout","$filter","Action","olUI","olWrite","store",function(e,t,n,i,o,r){return{restrict:"A",scope:!1,controller:["$scope",function(e){var t={twitter:/@([\u4e00-\u9fa5\w-]*)$/,instagram:/@([\w\.]*)$/,weibo:/@([\u4e00-\u9fa5\w-]*)$/};e.insertMention=function(e,n){o.removeText(t[n]),o.insertText(e.trim()+" ")}}],link:function(a,s,c){function l(){b[0].focus();var e=document.querySelector('[data-id="'+p+'"]'),t=angular.element(e);switch(m){case"tweet":b.val(r.get("newTweet_"+f))||"",s.triggerHandler("input");break;case"reply":"twitter"===f&&b.val(o.extractMentions(t.find("p")[0].innerText,"@"+u[2]));break;case"retweet":v="retweet","weibo"===f&&(v="tweet"!==w?"quote":"retweet",b.val("tweet"===w?"":"retweet"===w?"//@"+u[2]+": 转发微博":"//@"+u[2]+": "+t.find("p")[0].innerText),b[0].setSelectionRange(0,0)),b.prop("required",!1),_.prop("disabled",!1)}}function d(){var e=r.get("profile_"+f)||{};b[0].focus(),a.isShowLivePreview=!0,a.item={user:{name:e.name,avatar:e.avatar,screen_name:e.screen_name},media:[],text:b.val().trim(),created_at:Date.now(),type:v},o.generateTemplate(a,f),"retweet"===v?angular.extend(a.item,o.generateRetweetUser(p,w,f)):"quote"===v?angular.extend(a.item,o.generateQuoteUser(p,w,f)):null}var u=a.controlCenter.split(":"),p=u[1],f=u[0].split("-")[0].split("_")[1],m=u[0].split("-")[1],v="",w=u[0].split("-")[2],g="tweet"===m||"reply"===m||"weibo"===f?140:"retweet"===m?116:null,h=s.find("button"),_=h.eq(h.length-1),b=s.find("textarea");setTimeout(function(){l()},700);var y=r.get("mentions_"+f)||[],k={twitter:/(|\s)*@([\u4e00-\u9fa5\w-]*)$/,instagram:/(|\s)*@([\w\.]*)$/,weibo:/(|\s)*@([\u4e00-\u9fa5\w-]*)$/};a.isShowLivePreview=!1,a.isLeftPopup=!1,a.isShowMentions=!1,a.mentionsList=y,a.showLivePreview=d,s.on("submit",function(e){e.preventDefault();var t=b.val().trim(),o={status:t};"twitter"===f?(angular.extend(o,{geo:s.find("geo-picker").find("button").data("geo"),media_ids:s.find("media-upload").find("input").data("media_ids"),sensitive:s.find("toggle-sensitive").find("button").data("sensitive")}),"retweet"===m&&t.length>0&&(o.status=t+" https://twitter.com/"+u[2]+"/status/"+p)):"weibo"===f&&"tweet"===m&&angular.extend(o,{geo:s.find("geo-picker").find("button").data("geo")}),b.prop("disabled",!0),_.addClass("write__btn--send--sending"),n.update({action:v||m,provider:f,id:p||0},{params:o}).$promise.then(function(e){if("retweet"===m)if(i.setActionState("retweet",p,"active"),i.actionData("retweet",p,e.id_str),"quote"===v&&"twitter"===f)i.setActionState("retweet",p,"frozen");else{var t=~~i.actionData("retweet",p,null,"count")+1;i.actionData("retweet",p,t,"count")}a.setControlCenter(""),"tweet"===m&&r.remove("newTweet_"+f)})["catch"](function(){_.prop("disabled",!1),b.addClassTemporarily("write__textarea--err",500)})["finally"](function(){b.prop("disabled",!1),_.removeClass("write__btn--send--sending")})}).on("input",function(){var n=b.val(),i=n.trim().length>0?n:n.trim();e(function(){var e=b[0].selectionStart,n=i.slice(0,e).match(k[f]);if(n){var r=t("limitTo")(t("filter")(y,"twitter"===f?{$:n[2].trim()}:n[2].trim()),100);r.length>0?(a.isLeftPopup=o.isLeftPopup(),a.isShowMentions=!0,a.mentionsList=r):a.isShowMentions=!1}else a.isShowMentions&&(a.isShowMentions=!1)}),a.isShowLivePreview?(a.item.text=i,o.refreshPreviewText(i,f),"retweet"===m&&(i.length>0?("retweet"===v&&(angular.extend(a.item,o.generateQuoteUser(p,w,f)),o.generateTemplate(a,f)),v="quote"):("quote"===v&&(angular.extend(a.item,o.generateRetweetUser(p,w,f)),o.generateTemplate(a,f)),v="retweet"))):"retweet"===m&&(v=i.length>0?"quote":"retweet");var r="weibo"===f?o.weiboLength(i):i.length;r>g||0===r&&"retweet"!==m?_.prop("disabled",!0):_.prop("disabled",!1),_.attr("data-count",r>0?r:"").addClassTemporarily("write__btn--send--typing",700)}).on("$destroy",function(){"tweet"===m&&r.set("newTweet_"+f,b.val()),s.off()})}}}]).directive("geoPicker",["$window",function(e){return{restrict:"E",scope:{},templateUrl:"controlCenter/write/component/geoPicker.html",link:function(t,n,i){var o=n.find("button");o.on("click",function(){o.hasClass("tips--active--peace")?o.removeClass("tips--active--peace tips--inprocess").removeData("geo"):(o.addClass("tips--inprocess"),e.navigator.geolocation.getCurrentPosition(function(e){o.addClass("tips--active--peace").removeClass("tips--inprocess").data("geo",{lat:e.coords.latitude,"long":e.coords.longitude})},function(e){o.removeClass("tips--inprocess").addClassTemporarily("tips--error",500)},{maximumAge:6e4,timeout:7e3}))}).on("$destroy",function(){o.off("click")})}}}]).directive("mediaUpload",["Media",function(e){return{restrict:"E",templateUrl:"controlCenter/write/component/mediaUpload.html",link:function(t,n,i){function o(e,n){var i=new FileReader,o=new Image;i.onload=function(e){var i=URL.createObjectURL(s(e.target.result));o.src=i,o.onload=function(){var e=(o.height/o.width).toFixed(5),t=angular.element(document.querySelector(".cancelMask__wrapper .timeline__media"));t.length<=0&&(angular.element(document.querySelector(".cancelMask__wrapper .timeline__content")).append('<div class="timeline__media"></div>'),t=angular.element(document.querySelector(".cancelMask__wrapper .timeline__media"))),t.append('<div class="timeline__media--large" data-mediaId="'+n+'" data-ratio="'+e+'"><img src="'+i+'"></div>')},t.item.media.push({type:"photo",image_url:i,fakeId:n}),t.$apply()},i.readAsDataURL(e)}function r(e){angular.element(document.querySelectorAll('[data-mediaId="'+e+'"]'));t.item.media=t.item.media.filter(function(t){return t.fakeId!==e}),t.$apply()}function a(e,n){var i=angular.element(document.querySelectorAll('[data-mediaId="'+e+'"]'));angular.element(i[0]).css("padding-bottom",100*i.attr("data-ratio")+"%"),i.removeClass("tips--inprocess").attr("data-mediaId",n).on("click",function(){var e=l.data("media_ids")||[],n=i.attr("data-mediaId"),o=e.indexOf(n);e.splice(o,1),e.length<=0?l.removeData("media_ids"):l.data("media_ids",e),i.remove(),t.item.media.splice(o,1),t.$apply()}).on("$destroy",function(){i.off("click")})}function s(e){var t=";base64,";if(-1==e.indexOf(t)){var n=e.split(","),i=n[0].split(":")[1],o=decodeURIComponent(n[1]);return new Blob([o],{type:i})}for(var n=e.split(t),i=n[0].split(":")[1],o=window.atob(n[1]),r=o.length,a=new Uint8Array(r),s=0;r>s;++s)a[s]=o.charCodeAt(s);return new Blob([a],{type:i})}var c=i.provider,l=n.find("input");l.on("change",function(){var t=new FormData,n=l[0].files[0];document.querySelector(".write__previews__item")||l.data("media_ids",[]);var i=Date.now();o(n,i),t.append("twitterMedia",n),e.upload({provider:c},t).$promise.then(function(e){var t=l.data("media_ids")||[],n=e.media_id;t.push(n),l.data("media_ids",t),a(i,n)})["catch"](function(e){r(i)}),l[0].value=""}).on("$destroy",function(){l.off("change")})}}}]).directive("toggleSensitive",function(){return{restrict:"E",scope:{},templateUrl:"controlCenter/write/component/toggleSensitive.html",link:function(e,t,n){var i=t.find("button");i.on("click",function(){i.hasClass("tips--active--peace")?i.removeClass("tips--active--peace").data("sensitive",!1):i.addClass("tips--active--peace").data("sensitive",!0)}).on("$destroy",function(){i.off("click")})}}}).directive("weiboEmotions",["olWrite",function(e){return{restrict:"E",templateUrl:"controlCenter/write/component/weiboEmotions.html",controller:["$scope",function(t){t.isLeftPopup=!1,t.isShowEmotions=!1,t.emotionsList=[],t.insertEmotion=function(n){n="["+n+"]",e.insertText(n),t.isLeftPopup=e.isLeftPopup()}}],link:function(t,n,i){var o=n.find("button"),r="笑cry|微笑|嘻嘻|哈哈|可爱|可怜|挖鼻|吃惊|害羞|挤眼|闭嘴|鄙视|爱你|泪|偷笑|亲亲|生病|太开心|白眼|右哼哼|左哼哼|嘘|衰|委屈|吐|哈欠|抱抱|怒|疑问|馋嘴|拜拜|思考|汗|困|睡|钱|失望|酷|色|哼|鼓掌|晕|悲伤|抓狂|黑线|阴险|怒骂|互粉|心|伤心|猪头|熊猫|兔子|ok|耶|good|NO|赞|来|弱|草泥马|给力|围观|威武|奥特曼|礼物|钟|话筒|蜡烛|蛋糕|带着微博去旅行|最右|泪流满面|江南style|去旅行|doge|喵喵|哆啦A梦花心|哆啦A梦害怕|哆啦A梦吃惊|静香微笑|大雄微笑|胖虎微笑|小夫微笑";t.emotionsList=r.split("|"),o.on("click",function(){o.toggleClass("tips--active--peace"),t.$apply(function(){t.isLeftPopup=e.isLeftPopup(),t.isShowEmotions=!t.isShowEmotions}),document.querySelector("textarea").focus()}).on("$destroy",function(){o.off("click")})}}}]);
angular.module("Oneline.maskDirectives",[]).directive("showMenu",["olMask",function(t){return{restrict:"A",link:function(i,n,o){n.on("click",function(){var n=o.showMenu;i.setControlCenter("fullmask").then(function(){t.append("mask/menu/"+n+".html",i)})}).on("$destroy",function(){n.off()})}}}]).directive("userProfile",["store","$state",function(t,i){return{restrict:"A",link:function(n,o,e){o.on("click",function(){var n=e.userProfile;i.go("timeline.action",{provider:n,action:"user",id:t.get("profile_"+n).uid})})}}}]).directive("toggleFollowing",["Action",function(t){return{restrict:"A",link:function(i,n,o){n.on("click",function(){var i=angular.element(document.querySelectorAll(".profile__count__column")[1]),e=o.toggleFollowing.split(":"),a=e[0],c=e[1],l=n.hasClass("icon--"+a);n.addClass("tips--inprocess"),t[l?"destroy":"create"]({action:"follow",provider:a,id:c}).$promise.then(function(t){n.toggleClass("tips--active icon--"+a);var o=~~i.attr("data-count")+(l?-1:1);i.attr("data-count",o)})["catch"](function(t){n.addClassTemporarily("tips--error",500)})["finally"](function(){n.removeClass("tips--inprocess")})})}}}]).directive("mentions",["$timeout","olNotification",function(t,i){return{restrict:"E",scope:{},templateUrl:"mask/notification/mentions/twitter.html",controller:["$scope","$element",function(n,o){var e,a=o.attr("provider");n.notifications=[],n.loadState="initLoad",e=i.initLoad(a,"mentions"),e&&e.length>0?t(function(){n.notifications=e,n.loadState="loadFin"},700):i.load(!0).then(function(t){n.notifications=t,n.loadState="loadFin"})["catch"](function(t){n.loadState="loadFail"}),n.loadMentions=function(t){"loading"!==n.loadState&&(n.loadState="loading",i.load(!1).then(function(t){n.notifications=t,n.loadState="loadFin"})["catch"](function(t){n.loadState="loadFail"}))}}]}}]).directive("direct",["$timeout","$filter","olNotification",function(t,i,n){return{restrict:"E",scope:{},templateUrl:"mask/notification/direct/twitter.html",controller:["$scope","$element","store",function(i,o,e){function a(){var t=n.extractDirect(u);t[0].length>0&&Object.keys(t[1]).length>0&&(i.senderList=t[0],r=t[1],i.showDirect(s||i.senderList[0].uid)),i.loadState="loadFin"}function c(n){i.notifications=r[n],t(function(){var t=angular.element(document.querySelector('[js-direct-sender="'+n+'"]'));t.parent().children().removeClass("tips--active--peace"),t.addClass("tips--active--peace");var i=document.querySelector(".mask__notification");i.scrollTop=i.scrollHeight})}var l,r,s,d=o.attr("provider"),u=e.get("profile_"+d).uid;i.notifications=[],i.senderList=[],i._authUid=u,i.loadState="initLoad",l=n.initLoad(d,"direct"),l&&l.length>0?t(function(){a()},700):n.load(!0).then(function(t){a()})["catch"](function(t){i.loadState="loadFail"}),i.loadDirect=function(t){"loading"!==i.loadState&&(i.loadState="loading",n.load(!1).then(function(t){a()})["catch"](function(t){i.loadState="loadFail"}))},i.showDirect=function(n){s===n?c(n):(i.notifications=[],t(function(){c(n)},350)),s=n}}]}}]);
angular.module("Oneline.mediaDirectives",[]).directive("olVideo",function(){return{restrict:"E",scope:{olPoster:"@",olSrc:"@",olId:"@"},templateUrl:"media/video.html",link:function(e,t,n){var r="timeline__media__playButton--playing",i=t.children()[0];i.setAttribute("src",e.olSrc),t.on("click",function(){var n=angular.element(document.querySelector('[data-id="'+e.olId+'"]')),a=angular.element(t.children()[1]);i.paused?i.play():i.pause(),a.toggleClass(r),n.on("mouseleave",function(){i.pause(),a.removeClass(r),i.removeAttribute("loop"),n.off()})}).on("$destroy",function(){t.off()}),angular.element(i).on("ended",function(){playIcon.removeClass(r)})}}}).directive("olImageThumb",function(){return{restrict:"A",link:function(e,t,n){t.on("click",function(){var e=t.parent(),r=e.next(),i=e.children(),a=r.find("img"),o=r.find("a");if(i.removeClass("timeline__media--active").addClass("timeline__media--inactive"),t.addClass("timeline__media--active timeline__media--loading"),e.addClass("timeline__media--small"),r.removeClass("timeline__media--hide"),a.attr("src",n.src.replace(/square|small/,"bmiddle")),o.attr("href",n.src.replace(/square|small/,"large")),a.on("load",function(){1===i.length?t.parent().remove():null,t.removeClass("timeline__media--loading")}),!a.data("urlList")){var l=Array.prototype.map.call(i,function(e){return angular.element(e).attr("src").replace(/square|small/,"bmiddle")});a.data("urlList",l)}}).on("$destroy",function(){t.off()})}}}).directive("selectImage",function(){return{restrict:"A",link:function(e,t,n){n.imageCount>1&&t.on("mousemove",function(e){e.offsetX-t[0].offsetWidth/2>0?(t.removeClass("cursor--pre"),t.addClass("cursor--next")):(t.removeClass("cursor--next"),t.addClass("cursor--pre"))}).on("click",function(){var e=t.find("img"),n=e.data("urlList")||[],r=n.indexOf(e.attr("src")),i=t.hasClass("cursor--next")?r+1:r-1;if(!(0>i||i>n.length-1)){var a=angular.element(angular.element(t.parent().children()[0]).children()),o=angular.element(a[i]);a.removeClass("timeline__media--active timeline__media--loading"),o.addClass("timeline__media--active timeline__media--loading"),e.on("load",function(){o.removeClass("timeline__media--loading")}).attr("src",n[i]).next().attr("href",n[i].replace("bmiddle","large"))}}).on("$destroy",function(){t.off()})}}}).directive("handleImageError",function(){return{restrict:"A",link:function(e,t,n){t.on("error",function(){""!==t.attr("src")&&t.attr("src",'data:image/svg+xml;utf8,<svg viewBox="0 0 529 530" xmlns="http://www.w3.org/2000/svg"><g fill="none"><path d="M51.245 150.775c-3.454-1.729-5.458-.098-4.476 3.638l.706 2.688c8.01 30.498-2.986 73.86-24.566 96.854l-.662.706c-2.643 2.816-1.649 5.288 2.193 5.52l136.636 8.237c9.376.565 23.953-2.031 32.554-5.798l21.279-9.319-13.768-18.801c-5.55-7.579-16.851-17.127-25.254-21.333l-124.642-62.392z" fill="#000"/><path d="M9.298 290.938c13.001 129.203 122.073 230.062 254.702 230.062 141.385 0 256-114.615 256-256s-114.615-256-256-256c-84.794 0-159.96 41.226-206.547 104.728" stroke="#000" stroke-width="17" stroke-linecap="round" stroke-linejoin="round"/><path d="M361.259 190.733c-4.06-1.129-8.339-1.733-12.759-1.733-26.234 0-47.5 21.266-47.5 47.5 0 4.115.523 8.109 1.507 11.917" stroke="#000" stroke-width="17" stroke-linecap="round"/><path d="M213.468 406.97c13.141-16.776 37.347-28.026 65.032-28.026 30.37 0 56.552 13.538 68.536 33.056" stroke="#000" stroke-width="17" stroke-linecap="round" stroke-linejoin="round"/></g></svg>')})}}}).directive("fuckLongWeibo",function(){return{restrict:"A",link:function(e,t,n){t.on("load",function(){var e=t[0].width,n=window.innerWidth;if(.33*n/e>2){var r=t.next();r.attr("href",r.attr("href").replace("large","bmiddle"))}})}}}).directive("olLazyImage",function(){return{restrict:"A",scope:{ratio:"@olLazyImage"},link:function(e,t,n){var r=e.ratio;t.css("padding-bottom",100*r+"%")}}}).directive("usersInPhoto",function(){return{restrict:"A",scope:{usersInPhoto:"="},link:function(e,t,n){function r(e,t,n,r){var a,o,l;return e>.5?(a=(1-e)*n,t>.5?(o=(1-t)*r,l=i(o/a)+90):(o=t*r,l=i(a/o))):(a=e*n,t>.5?(o=(1-t)*r,l=i(a/o)+180):(o=t*r,l=-i(o/a))),l}function i(e){return 180*Math.atan(e)/Math.PI}var a=e.usersInPhoto;t.on("click",function(){var e=t.parent().find("span"),n=t.parent().parent()[0];t.hasClass("tips--active--peace")?(t.removeClass("tips--active--peace"),e.parent().removeClass("timeline__media__userTag--show")):(t.addClass("tips--active--peace"),a.forEach(function(t,i){var a=angular.element(e[i]),o=n.offsetWidth,l=n.offsetHeight,s=t.position.x,c=t.position.y,d=r(s,c,o,l);a.children().css({transform:"rotate("+-d+"deg)"}),a.parent().css({top:100*c+"%",left:"calc("+100*s+"% - 16px)",transform:"rotate(0deg)"}).addClass("timeline__media__userTag--show").addClassTemporarily("timeline__media__userTag--popup",700).delay(777).then(function(e){e.css("transform","rotate("+d+"deg)")})}))}).on("$destroy",function(){t.off()})}}});
angular.module("Oneline.textDirectives",[]).filter("olLinkify",function(){function u(u,e){if(u){var t=u.replace(/(?:https?\:\/\/)+(?![^\s]*?")([\w.,@?!^=%&amp;:\/~+#-]*[\w@?!^=%&amp;\/~+#-])?/gi,function(u){var e=document.createElement("div"),t=document.createElement("a");return t.href=u,t.target="_blank",t.innerHTML=u,e.appendChild(t),e.innerHTML});return t?("twitter"===e&&(t=t.replace(/(|\s)*@([\w]+)/g,'$1<a href="/twitter/user/$2">@$2</a>'),t=t.replace(/(^|\s)*[#＃]([^#＃\s!@$%^&*()+\-=\[\]{};':"\\|,.<>\/?\u3002\uff1f\uff01\uff0c\u3001\uff1b\uff1a\u300c\u300d\u300e\u300f\u2018\u2019\u201c\u201D\uff08\uff09\u3014\u3015\u3010\u3011\u2014\u2026\u2013\uff0e\u300a\u300B\u3008\u3009]+)/g,'$1<a href="/twitter/tags/$2">#$2</a>')),"instagram"===e&&(t=t.replace(/(|\s)*@([\w\.]+)/g,'$1<a href="/instagram/user/$2">@$2</a>'),t=t.replace(/(^|\s)*[#＃]([^#＃\s!@$%^&*()+\-=\[\]{};':"\\|,.<>\/?\u3002\uff1f\uff01\uff0c\u3001\uff1b\uff1a\u300c\u300d\u300e\u300f\u2018\u2019\u201c\u201D\uff08\uff09\u3014\u3015\u3010\u3011\u2014\u2026\u2013\uff0e\u300a\u300B\u3008\u3009]+)/g,'$1<a href="/instagram/tags/$2">#$2</a>')),"weibo"===e&&(t=t.replace(/(|\s)*@([\u4e00-\u9fa5\w-]+)/g,'$1<a href="/weibo/user/$2">@$2</a>'),t=t.replace(/(^|\s)*#([^#]+)#/g,function(u,e,t){return u=u||"",e=e||"",t=t||"",e+'<a href="http://huati.weibo.com/k/'+t.replace(/\[([\u4e00-\u9fa5]*\])/g,"")+'" target="_blank">#'+t+"#</a>"})),t):""}}return u}).directive("olLinkify",["$filter","$timeout",function(u,e){return{restrict:"A",link:function(t,r,i){var f=i.olLinkify||"normal";e(function(){r.html(u("olLinkify")(r.html(),f))})}}}]).directive("trimMediaLink",["$timeout",function(u){return{restrict:"A",link:function(e,t,r){u(function(){t.html(t.html().replace(r.trimMediaLink,""))})}}}]).directive("trimSuffixLink",["$timeout",function(u){return{restrict:"A",link:function(e,t,r){if("true"===r.trimSuffixLink){var i=/(?:https?\:\/\/)+(?![^\s]*?")([\w.,@?!^=%&amp;:\/~+#-]*[\w@?!^=%&amp;\/~+#-])?$/gi;u(function(){t.html(t.html().replace(i,""))})}}}}]).filter("html",["$sce",function(u){return function(e){return u.trustAsHtml(e)}}]);
angular.module("Oneline.utilsDirectives",[]).directive("onFinishRender",["$timeout",function(e){return{restrict:"A",link:function(t,i,n){(t.$last||t.$first)&&e(function(){t.$emit(n.onFinishRender)})}}}]).directive("disableBack",function(){return{restrict:"A",link:function(e,t,i){t.on("mousewheel",function(e){var t=this.scrollWidth-this.offsetWidth;(this.scrollLeft+e.deltaX<0||this.scrollLeft+e.deltaX>t)&&(e.preventDefault(),this.scrollLeft=Math.max(0,Math.min(t,this.scrollLeft+e.deltaX)))}).on("$destroy",function(){t.off()})}}}).directive("loadMoreIcon",function(){return{restrict:"E",replace:!0,template:'            <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">                <g fill="none" fill-rule="evenodd">                    <circle cx="42.5" cy="100" r="15"/>                    <circle cx="100" cy="100" r="15"/>                    <circle cx="157.5" cy="100.5" r="15"/>                </g>            </svg>'}});
angular.module("Oneline.RESTfulServices",[]).factory("Timeline",["$resource",function(e){return e("/timeline",null,{get:{method:"GET"}})}]).factory("Action",["$resource",function(e){return e("/actions/:action/:provider/:id",null,{create:{method:"PUT",params:{action:"@action",provider:"@provider",id:"@id"}},destroy:{method:"DELETE"},update:{method:"POST"},get:{method:"GET"}})}]).factory("Auth",["$resource",function(e){return e("/auth/revoke/:provider",null,{revoke:{method:"DELETE"}})}]).factory("Replicant",["$resource",function(e){return e("/auth/replicant/:replicant",null,{deckard:{method:"GET",params:{replicant:"deckard"}},rachael:{method:"POST",params:{replicant:"rachael"}}})}]).factory("Media",["$resource",function(e){return e("/upload/:provider",null,{upload:{method:"POST",transformRequest:angular.identity,headers:{"Content-Type":void 0}}})}]);
angular.module("Oneline.UIServices",[]).service("olUI",["$filter",function(t){this.setLoading=function(t,a){var e=angular.element(document.querySelectorAll("[js-load-timeline]")[1===a?0:1]);"start"===t?e.removeClass("loadMore__btn--loading--fail").addClass("loadMore__btn--loading"):"done"===t?e.removeClass("loadMore__btn--loading loadMore__btn--loading--fail").parent().removeClass("loadMore--initLoad"):"fail"===t&&e.addClass("loadMore__btn--loading loadMore__btn--loading--fail")},this.isLoading=function(t){var a=angular.element(document.querySelectorAll("[js-load-timeline]")[1===t?0:1]);return a.hasClass("loadMore__btn--loading")&&!a.hasClass("loadMore__btn--loading--fail")||a.parent().hasClass("loadMore__btn--initLoad")},this.setDivider=function(a){var e=document.querySelectorAll(".timeline:not(.timeline--quote)");e=angular.element(e[1===a?0:e.length-1]),e.attr("data-date",t("date")(Date.now(),"HH:mm")).addClass(1===a?"divider divider--top":"divider divider--bottom")},this.setPostsCount=function(t,a){var e="newPosts"===t;if(e&&a%1===0){var n=(~~a).toString().split(""),o={0:"⁰",1:"¹",2:"²",3:"³",4:"⁴",5:"⁵",6:"⁶",7:"⁷",8:"⁸",9:"⁹"};__msg="",""!==a&&n.forEach(function(t){__msg+=o[t]}),document.title="｜"+__msg}document.getElementsByClassName("loadMore__btn--count")[e?0:1].setAttribute("data-count",a)};var a=function(t,a){return angular.element(document.querySelector('[data-id="'+a+'"]').querySelector("[data-"+t+"]"))};this.setActionState=function(t,e,n){var o=a(t,e);switch(n){case"wait":o.addClass("actions__button--wait");break;case"done":o.removeClass("actions__button--wait");break;case"active":o.parent().addClass("tips--active icon--"+t);break;case"inactive":o.parent().removeClass("tips--active icon--"+t);break;case"frozen":o.parent().addClass("tips--frozen")}},this.isActionActive=function(t,e){var n=a(t,e);return n.parent().hasClass("icon--"+t)},this.isActionWait=function(t,e){var n=a(t,e);return n.hasClass("actions__button--wait")},this.isActionFrozen=function(t,e){var n=a(t,e);return n.parent().hasClass("tips--frozen")},this.actionData=function(t,e,n,o){var i,s=a(t,e);return"count"===o?(s=s.next(),i="data-count"):i="data-"+t,n||""===n?void s.attr(i,n):s.attr(i)}}]);
angular.module("Oneline.controlCenterServices",[]).service("olWrite",["$compile","$templateRequest","$timeout","$filter","weiboEmotify",function(e,t,n,r,a){function l(e,t,n,r){var a=document.querySelector('[data-id="'+t+'"]'),l="quote"===n?1:0,i="twitter"===r?"//twitter.com/":"weibo"===r?"//weibo.com/n/":null;switch(e){case"text":return a.querySelectorAll("p")[l].innerText;case"name":return a.querySelectorAll(".timeline__profile__fullname strong")[l].innerText;case"avatar":return a.querySelectorAll(".timeline__profile__avatar")[l].getAttribute("src");case"screen_name":return a.querySelectorAll(".timeline__profile__fullname a")[l].getAttribute("href").replace(i,"");case"created_at":return a.querySelectorAll("[relative-date]")[l].getAttribute("relative-date")}}this.weiboLength=function(e){var t=(e.match(/[\x00-\x7F]+/g)||[]).join("").length,n=e.length-t;return n+Math.round(t/2)},this.extractMentions=function(e,t){var n=[t],r="";return n=n.concat(e.match(/(|\s)*@([\w]+)/g)||[]),n=n.map(function(e){return e.trim()}),n=n.filter(function(e,t){return n.indexOf(e)==t}),n.forEach(function(e){r=r+e+" "}),r},this.generateTemplate=function(r,a){var l=this,i="mask/component/timeline/"+a+".html",u=angular.element(document.querySelector(".cancelMask__wrapper"));t(i).then(function(t){t='<div class="animate--enter">'+t+"</div>",u.children().empty().append(e(t)(r))}),n(function(){angular.element(document.querySelectorAll('.cancelMask__wrapper [role="button"]')).css("pointer-events","none"),angular.element(document.querySelector(".cancelMask__wrapper .mask__timeline")).removeClass("mask__timeline"),l.refreshPreviewText(r.item.text,a)})},this.generateRetweetUser=function(e,t,n){return{text:l("text",e,t,n),retweet:{user:{name:l("name",e,t,n),avatar:l("avatar",e,t,n),screen_name:l("screen_name",e,t,n)}},media:[],type:"retweet"}},this.generateQuoteUser=function(e,t,n){var r={text:l("text",e,t,n),created_at:l("created_at",e,t,n),user:{name:l("name",e,t,n),avatar:l("avatar",e,t,n),screen_name:l("screen_name",e,t,n)}};return"twitter"===n?{quote:r,type:"quote"}:{retweet:r,type:"quote"}},this.refreshPreviewText=function(e,t){var l=angular.element(document.querySelector(".cancelMask__wrapper"));e=r("linkify")(e,t)||"",n(function(){"twitter"===t?angular.element(l.find("p")[0]).html(e):a.then(function(t){angular.element(l.find("p")[0]).html(t(e)||"")})})},this.insertText=function(e){var t=document.querySelector("textarea"),n=t.selectionStart,r=t.selectionEnd,a=n+e.length;n||"0"==n?t.value=t.value.substring(0,n)+e+t.value.substring(r,t.value.length):t.value+=e,angular.element(t).parent().triggerHandler("input"),t.setSelectionRange(a,a),t.focus()},this.removeText=function(e){var t=document.querySelector("textarea"),n=t.selectionStart,r=t.value.slice(0,n),a=t.value.slice(n);t.value=r.replace(e,"")+a,n-=1,t.setSelectionRange(n,n),1===t.value.length&&(t.value="")},this.isLeftPopup=function(){var e=document.querySelector("textarea"),t=document.querySelector(".write__textarea span"),n=e.selectionStart,r=e.offsetWidth-10;t.innerHTML=e.value.substr(0,n).replace(/\n$/,"\n");var a=t.getClientRects(),l=a[a.length-1],i=l.width;return i>r/2}}]);
angular.module("Oneline.maskServices",[]).service("olMask",["$q","$timeout","$compile","$templateRequest","Action",function(e,t,n,i,r){this.append=function(e,r){t(function(){var t=angular.element(document.querySelector(".cancelMask__wrapper"));i(e,r).then(function(e){t.children().empty().append(n(e)(r))})})},this.loadOldPosts=function(t,n,i,o){var a=e.defer();return r.get({action:t,provider:n,id:i,max_id:o}).$promise.then(function(e){a.resolve(e.data)})["catch"](function(e){a.reject(e)}),a.promise}}]).service("olNotification",["$q","$filter","store","Action",function(e,t,n,i){function r(e,n){return t("orderBy")(t("filter")(d,function(t,i,r){return t.sender.uid===e||t.sender.uid===n&&t.recipient.uid===e}),"created_at")}var o,a,c,d,u;this.initLoad=function(e,t){return o=e,a=t,c="mentions"===t?"notification_m_"+e:"notification_d_"+e,_info=n.get(c)||{},d=_info.notifications||[],u=_info.max_id,d},this.load=function(t){var r=e.defer();return i.get({action:a,provider:o,id:0,min_id:t?null:u}).$promise.then(function(e){e=e.data,u=e.max_id||u,e.data.length>0&&(d=d.concat(e.data),n.set(c,{notifications:d,max_id:u})),r.resolve(d)})["catch"](function(e){r.reject(e)}),r.promise},this.extractDirect=function(e){for(var t=[],n={},i=[],o=0,a=d.length;a>o;o++){var c=d[o].sender;c.uid!==e&&i.indexOf(c.uid)<0&&(t.push(d[o].sender),i.push(c.uid))}if(1===t.length){var u=t[0].uid;n[u]=r(u,e)}else t=t.sort(function(t,i){var o=t.uid,a=i.uid,c=r(o,e),d=r(a,e);n[o]=c,n[a]=d;var u=c[c.length-1].created_at;return latestCreatedAt2=d[d.length-1].created_at,u<latestCreatedAt2});return[t,n]}}]);
angular.module("Oneline.timelineServices",[]).service("olTimelineHelper",["$q","$state","Timeline","timelineCache","olUI","olTokenHelper","Action","store","arrayUnique",function(t,e,n,o,i,a,r,s,c){var u=Date.now(),l=18e5;this.initLoad=function(e){var o=t.defer(),i=this;return n.get().$promise.then(function(t){if(!t||t.data&&t.data.length<1)return void o.reject({status:304});i.storePosts("oldPosts",t,e);var n={data:[],max_id:t.max_id,max_date:t.max_date};return i.storePosts("newPosts",n,e),i.checkOldPosts(e).then(function(t){return t.length>0?i.loadOldPosts(t,e):void o.resolve()})}).then(function(){o.resolve()})["catch"](function(t){o.reject(t)}),o.promise},this.initTimelineSettings=function(){u=Date.now()},this.getId=function(t,e){var n,i,a="";return"oldPosts"===t?(n="_maxId-",i="_min_id"):(n="_minId-",i="_max_id"),e.forEach(function(t,r){var s=t+n+o.get(t+i)+(r===e.length-1?"":",");a+=s}),a},this.storePosts=function(t,e,n){var i,a,r,s=o.get(t)||[];"oldPosts"===t?(i="min",a="_min_id",r="_min_date"):(i="max",a="_max_id",r="_max_date"),n.forEach(function(t){var n=t+a,s=e[i+"_id"][t],c=t+r,u=e[i+"_date"][t];s&&o.put(n,s),u&&o.put(c,u)}),s=s.concat(e.data),o.put(t,s)},this.checkOldPosts=function(e){return t(function(t,n){var i=e.filter(function(t){return u-o.get(t+"_min_date")<l});t(i)})},this.extractOldPosts=function(t){for(var e,n=o.get("oldPosts")||[],i=!0;i;)e=n.filter(function(t){var e=u-t.created_at;return e>0&&l>=e}),u-=l,e.length>0&&(i=!1);return this.updateOldPostsCount(t),e},this.loadOldPosts=function(e,o){function i(e){var i=t.defer(),a=r.getId("oldPosts",e);return n.get({id:a}).$promise.then(function(t){!t||!t.data||t.data&&t.data.length<1?i.reject({status:304}):(r.storePosts("oldPosts",t,o),i.resolve())})["catch"](function(t){i.reject(t)}),i.promise}var a=t.defer(),r=this;return i(e).then(function(){a.resolve()})["catch"](function(t){a.reject(t)}),a.promise},this.loadNewPosts=function(e){var o=t.defer();return _this=this,n.get({id:_this.getId("newPosts",e)}).$promise.then(function(t){t.data&&t.data.length>0?(_this.storePosts("newPosts",t,e),o.resolve()):o.reject({status:304})},function(t){o.reject(t)}),o.promise},this.removeOldPosts=function(t,e,n){var i=Date.now(),a=o.get("oldPosts")||[];return a=a.concat(e),o.put("oldPosts",a),u=i-l,this.updateOldPostsCount(n),t.filter(function(t){return i-t.created_at<l})},this.updateOldPostsCount=function(t){this.checkOldPosts(t).then(function(t){if(t.length>0)i.setPostsCount("oldPosts","");else{var e=o.get("oldPosts")||[],n=0;e.forEach(function(t){var e=u-t.created_at;e>0&&l>=e&&n++}),i.setPostsCount("oldPosts",0===n?"":n)}})},this.handleError=function(t,n){if(console.log(t),t){var o=n;switch(n=o?o:1,t.status){case 304:i.setLoading("done",n);break;case 401:var r=t.data.invalidToken||["twitter","instagram","weibo"];r.forEach(function(t){a.removeToken(t)}),e.go("settings");break;case 429:var s=1e3*t.data.reset,c=new Date(s).toLocaleTimeString("en-GB").substring(0,5),u=1===n?"newPosts":"oldPosts";i.setLoading("fail",n),i.setPostsCount(u,c),setTimeout(function(){i.setPostsCount(u,"⟳")},s-Date.now());break;default:i.setLoading("fail",n)}}},this.toggleAction=function(t,e,n,o){var a=o?"destroy":"create",s=n;return"retweet"===t&&"destroy"===a&&(n=i.actionData(t,s)),r[a]({action:t,provider:e,id:n}).$promise.then(function(e){if("create"===a){if("retweet"===t&&i.actionData(t,s,e.id_str),"star"!==t){var n=~~i.actionData(t,s,null,"count")+1;i.actionData(t,s,n,"count")}}else if("star"!==t){var n=~~i.actionData(t,s,null,"count")-1;i.actionData(t,s,n>0?n:"","count")}})},this.recordMentions=function(t){var e=2e3,n={twitter:/(|\s)*@([\w]+)/g,instagram:/(|\s)*@([\w\.]+)/g,weibo:/(|\s)*@([\u4e00-\u9fa5\w-]+)/g},o={twitter:"//twitter.com/",instagram:"//instagram.com/",weibo:"//weibo.com/n/"};t.forEach(function(t){if("instagram"!==t){var i=s.get("mentions_"+t)||[],a=[document.querySelectorAll(".timeline--"+t+" p"),document.querySelectorAll(".timeline--"+t+" .timeline__profile__fullname a")];angular.forEach(angular.element(a[0]),function(o){var a=o.innerText.match(n[t]);if(a){if("twitter"===t&&(a=a.map(function(t){return{s:t.trim()}})),i.length>=e)if("twitter"===t){var r=a.length;i=i.filter(function(t){return!t.hasOwnProperty("u")&&r>0?(r--,!1):!0})}else i.splice(0,a.length);i=i.concat(a)}}),"weibo"===t&&(i=i.map(function(t){return t.trim()})),angular.forEach(angular.element(a[1]),function(e){var n=angular.element(e),a=n.attr("href");if(a){var r="@"+a.replace(o[t],"");"twitter"===t&&(r={s:r,u:n.find("strong").text()}),i.push(r)}}),s.set("mentions_"+t,"twitter"===t?c.obj(i):c.literal(i))}})}}]);
angular.module("Oneline.tokenHelperServices",[]).service("olTokenHelper",["jwtHelper","store",function(e,n){this.addToken=function(){var t=localStorage.getItem("addToken"),r=e.decodeToken(t).provider,i=n.get("tokenList")||[];i=o.removeToken(i,r),i.push(t),n.set("tokenList",i),n.remove("addToken")},this.replaceTokenList=function(e){n.set("tokenList",e)},this.removeToken=function(e){var t=n.get("tokenList")||[];t=o.removeToken(t,e),n.set("tokenList",t)},this.clearInvalidToken=function(){var o=n.get("tokenList")||[],t=this;o.forEach(function(n){var o=e.isTokenExpired(n),r=e.decodeToken(n).provider;o&&t.removeToken(r)})},this.getProviderList=function(){var o=n.get("tokenList")||[];return o.map(function(n){return e.decodeToken(n).provider})},this.isValidToken=function(){var o=n.get("tokenList")||[];return o.length>0&&o.every(function(n){return!e.isTokenExpired(n)})};var o={removeToken:function(n,o){return n.filter(function(n){return o!==e.decodeToken(n).provider})}}}]);
angular.module("Oneline.utilsServices",["relativeDate"]).value("relativeDateTranslations",{just_now:"0s",seconds_ago:"{{time}}s",a_minute_ago:"1m",minutes_ago:"{{time}}m",an_hour_ago:"1h",hours_ago:"{{time}}h",a_day_ago:"1d",days_ago:"{{time}}d",a_week_ago:"1w",weeks_ago:"{{time}}w",a_month_ago:"1M",months_ago:"{{time}}M",a_year_ago:"1y",years_ago:"{{time}}y",over_a_year_ago:"> 1y",seconds_from_now:"+ {{time}}s",a_minute_from_now:"+ 1m",minutes_from_now:"+ {{time}}m",an_hour_from_now:"+ 1h",hours_from_now:"+ {{time}}h",a_day_from_now:"+ 1d",days_from_now:"+ {{time}}d",a_week_from_now:"+ 1w",weeks_from_now:"+ {{time}}w",a_month_from_now:"+ 1M",months_from_now:"+ {{time}}M",a_year_from_now:"+ 1y",years_from_now:"+ {{time}}y",over_a_year_from_now:"++ 1y"}).factory("timelineCache",["$cacheFactory",function(e){return e("timelineCache")}]).service("store",function(){function e(e){try{e=JSON.parse(e)}catch(o){}finally{return e}}this.get=function(o){return e(localStorage.getItem(o))},this.set=function(e,o){localStorage.setItem(e,JSON.stringify(o))},this.remove=function(e){localStorage.removeItem(e)}}).service("arrayUnique",function(){this.literal=function(e){for(var o={},t=[],a=0;a<e.length;a++)o[e[a]]||(o[e[a]]=!0,t.push(e[a]));return t},this.obj=function(e){var o,t=[],a=[],n=e.length;for(o=0;n>o;o++)t[e[o].s]||(t[e[o].s]=!0,a.push(e[o]));return a}});
angular.module("Oneline.maskControllers",[]).controller("maskCtrl",["$scope","$state","$stateParams","Action","store","olMask",function(e,a,t,n,l,i){function o(){e.loadState="initLoad",e.mask={},"user"!==s&&angular.extend(e.mask,{type:s,title:m,q:c}),e.loadMaskTimeline=function(){if("loading"!==e.loadState){var a="user"===s?"user_timeline":d,t=document.querySelectorAll(".mask .timeline"),n=angular.element(t[t.length-1]),l="weibo"===r&&"location"===s?n.attr("data-created"):n.attr("data-id");e.loadState="loading",i.loadOldPosts(a,r,c,l).then(function(a){e.mask.timeline=e.mask.timeline.concat(a),e.loadState="loadFin"})["catch"](function(a){e.loadState="loadFail"})}};var a="mask/"+("user"===s?"user":"search")+"/"+r+".html";i.append(a,e),f?g.addClass("timeline__media--loading"):null,n.get({action:d,provider:r,id:u}).$promise.then(function(a){angular.extend(e.mask,"user"===s?a.data:{timeline:a.data}),e.loadState="loadFin",f?g.addClass("timeline__media--active"):null})["catch"](function(){angular.extend(e.mask,{avatar:"/public/img/src/locked.svg","protected":!0}),e.loadState="loadFail",f?g.addClass("tips--frozen"):null})["finally"](function(){f?g.removeClass("timeline__media--loading"):null})}var r=t.provider,s=t.action,d="twitter"===r?"user"===s?"user":"search":s,c=t.id,u="twitter"===r?"tags"===s?"#"+c:"location"===s?"place:"+c:c:c,m=t.x;e.providerList.indexOf(r)<0&&a.go("settings");var f=e.controlCenter.indexOf("read")>=0;if(f){var g=angular.element(document.querySelector('[data-btn="'+c+'"]'));if(g.hasClass("tips--frozen"))return;o()}else e.setControlCenter("fullmask").then(function(){o()})}]);
angular.module("Oneline.rootControllers",[]).controller("rootController",["$q","$rootScope","$window","$scope","$timeout","$state","olTokenHelper","olUI","timelineCache",function(e,n,t,r,o,i,l,a,c){r.providerList=l.getProviderList(),r.controlCenter="",r.updateProviderList=function(){var e=l.getProviderList();o(function(){r.providerList=e})},r.setControlCenter=function(n){function t(e){r.controlCenter=e,o(function(){var n=angular.element(document.querySelector(".cancelMask__wrapper")),t=angular.element(document.querySelector(".controlCenter")),r=e.match(/replicant|read|write|notification/);r?(n.addClass("cancelMask__wrapper--"+r[0]),t.addClass("controlCenter--"+r[0])):(n.removeClass(l("cancelMask__wrapper--")),t.removeClass(l("controlCenter--")))})}function l(e){var n=["replicant","read","write","notification"];return n.map(function(n){return e+n}).join(" ")}var a=e.defer();return""===n&&"timeline.action"===i.current.name&&i.go("timeline"),r.controlCenter&&""!==n?(t(""),o(function(){t(n),a.resolve()},700)):(t(n),a.resolve()),a.promise},r["goto"]=function(e,n){var t=i.current.name;if("left"===e){if(r.providerList<=0)return;"settings"===t?i.go("timeline"):angular.element(document.querySelector("[js-show-menu]")).triggerHandler("click")}else"timeline"===t?r.controlCenter?r.setControlCenter(""):i.go("settings"):null},angular.element(t).on("keydown",function(e){27===e.keyCode&&r.$apply(function(){r.setControlCenter("")})}),n.$on("$stateChangeStart",function(e,n,t,r,o){"timeline"===n.name&&(l.isValidToken()||(e.preventDefault(),i.go("settings")))}),n.$on("$stateChangeSuccess",function(e,n,t,o,i){"settings"===n.name&&(l.isValidToken()||l.clearInvalidToken(),document.title="｜",c.removeAll(),r.updateProviderList(),r.setControlCenter("")),"timeline.action"!==o.name||n.name&&"timeline"!==n.name||r.setControlCenter("")})}]);
angular.module("Oneline.settingsControllers",[]).controller("settingsCtrl",["$scope","$window","olTokenHelper","Auth",function(e,n,o,t){n.addEventListener("storage",function(n){"addToken"===n.key&&(o.addToken(),e.updateProviderList())}),e.toggleAuth=function(r){e.providerList.indexOf(r)<0?n.open("/auth/"+r,"_blank"):t.revoke({provider:r}).$promise["finally"](function(){o.removeToken(r),e.updateProviderList()})}}]);
angular.module("Oneline.timelineControllers",[]).controller("timelineCtrl",["$scope","$q","Timeline","olUI","olTimelineHelper","timelineCache",function(t,e,n,i,o,s){function r(){t.autoRefresh=setInterval(function(){i.setLoading("start",1),o.loadNewPosts(t.providerList).then(function(){var t=(s.get("newPosts")||[]).length;i.setLoading("done",1),i.setPostsCount("newPosts",t)})["finally"](function(){i.setLoading("done",1)})},18e4),t.$on("$destroy",function(){clearInterval(t.autoRefresh)})}t.timelineData=[],t.$on("ngRepeatFinished",function(){o.recordMentions(t.providerList)}),o.initTimelineSettings(),o.initLoad(t.providerList).then(function(){t.timelineData=o.extractOldPosts(t.providerList),r(),i.setLoading("done",1),i.setLoading("done",-1)})["catch"](function(t){o.handleError(t)}),t.loadMore=function(n){i.isLoading(n)||e(function(e,r){if(i.setLoading("start",n),n>0){i.setPostsCount("newPosts","");var a=s.get("newPosts")||[];a.length>0?e([a,"newPosts"]):o.loadNewPosts(t.providerList).then(function(){e([s.get("newPosts")||[],"newPosts"])},function(t){r(t)})}else o.checkOldPosts(t.providerList).then(function(e){return e.length>0?o.loadOldPosts(e,t.providerList):void 0}).then(function(){var n=o.extractOldPosts(t.providerList);e([t.timelineData.concat(n)])})["catch"](function(t){r(t)})}).then(function(e){if("newPosts"===e[1]){var r=t.timelineData.concat(e[0]);t.timelineData=o.removeOldPosts(r,e[0],t.providerList),s.put("newPosts",[])}else t.timelineData=e[0];i.setDivider(n),i.setLoading("done",n)})["catch"](function(t){o.handleError(t,n)})},t.toggleAction=function(e,n){var s=n.provider,r=n.type,a=n.id_str,c=n.user.screen_name;if(!i.isActionWait(e,a)&&!i.isActionFrozen(e,a)){var l=i.isActionActive(e,a);if(("twitter"===s||"weibo"===s)&&("retweet"===e&&!l||"reply"===e))return void t.setControlCenter("write_"+s+"-"+e+"-"+r+":"+a+":"+c);i.setActionState(e,a,"wait"),i.setActionState(e,a,l?"inactive":"active"),o.toggleAction(e,s,a,l)["catch"](function(t){i.setActionState(e,a,l?"active":"inactive")})["finally"](function(){i.setActionState(e,a,"done")})}}}]);
angular.module("Oneline.templates",[]).run(["$templateCache",function(e){e.put("settings.html",'<div class="oneline overflow--y animate--general">\n    <!-- Social -->\n    <div class="social-wrapper animate--faster">\n        <!-- Twitter -->\n        <div class="social-list vertically_center">\n            <div>\n                <button class="social-icon animate--faster tips" ng-click="toggleAuth(\'twitter\')" ng-class="{\'social-icon--active tips--active\': providerList.indexOf(\'twitter\') >= 0}" type="button">\n                    <svg viewBox="0 0 300 300">\n                        <use xlink:href="/public/img/icon-sprites.svg#twitter"></use>\n                    </svg>\n                </button>\n            </div>\n        </div>\n        <!-- Instagram -->\n        <div class="social-list vertically_center">\n            <div>\n                <button class="social-icon animate--faster tips" ng-click="toggleAuth(\'instagram\')" ng-class="{\'social-icon--active tips--active\': providerList.indexOf(\'instagram\') >= 0}" type="button">\n                    <svg viewBox="0 0 775 300">\n                        <use xlink:href="/public/img/icon-sprites.svg#instagram"></use>\n                    </svg>\n                </button>\n            </div>\n        </div>\n        <!-- Weibo -->\n        <div class="social-list vertically_center">\n            <div>\n                <button class="social-icon animate--faster tips" ng-click="toggleAuth(\'weibo\')" ng-class="{\'social-icon--active tips--active\': providerList.indexOf(\'weibo\') >= 0}" type="button">\n                    <svg viewBox="0 0 300 300">\n                        <use xlink:href="/public/img/icon-sprites.svg#weibo"></use>\n                    </svg>\n                </button>\n            </div>\n        </div>\n    </div>\n\n    <!-- Replicant -->\n    <button ng-if="providerList.length > 0" ng-click="setControlCenter(\'replicant--deckard\')" class="replicant-icon replicant-icon--deckard tips--deep--peace" type="button">\n        <svg viewBox="0 0 54 67">\n            <use xlink:href="/public/img/icon-sprites.svg#deckard"></use>\n        </svg>\n    </button>\n    <button ng-click="setControlCenter(\'replicant--rachael\')" class="replicant-icon replicant-icon--rachael tips--deep--peace" type="button">\n        <svg viewBox="0 0 54 67">\n            <use xlink:href="/public/img/icon-sprites.svg#rachael"></use>\n        </svg>\n    </button>\n</div>\n\n<!-- Mask & ControlCenter -->\n<div ng-if="controlCenter" class="cancelMask animate--general" ng-click="setControlCenter(\'\')">\n    <div class="cancelMask__wrapper overflow--y">\n        <div ng-click="$event.stopPropagation()"></div>\n    </div>\n</div>\n<div ng-include=" \'controlCenter/wrapper.html\' " class="controlCenter vertically_center animate--general"></div>\n\n<!-- Menu: Right -->\n<div ng-if="providerList.length > 0" class="menu menu--right vertically_center animate--faster">\n    <div>\n        <a href="/" role="button">\n            <span class="menu__button btn animate--faster">\n                <svg viewBox="0 0 200 200">\n                    <use xlink:href="/public/img/icon-sprites.svg#ok"></use>\n                </svg>\n            </span>\n        </a>\n    </div>\n</div>'),e.put("timeline.html",'<div class="oneline oneline--timeline overflow--y animate--general">\n\n    <div class="loadMore loadMore--initLoad loadMore--new">\n        <button ng-click="loadMore(1)" class="loadMore__btn loadMore__btn--loading loadMore__btn--new loadMore__btn--count animate--faster" data-count type="button" js-load-timeline>\n            <load-more-icon></load-more-icon>\n        </button>\n    </div>\n\n    <div class="timeline" ng-repeat="item in timelineData | orderBy: \'-created_at\'" data-id="{{::item.id_str}}" data-date on-finish-render="ngRepeatFinished">\n\n        <div ng-class="::\'timeline--\' + item.provider" ng-include="::item.provider + \'/\' + item.type + \'.html\'"></div>\n\n    </div>\n\n    <div class="loadMore loadMore--initLoad loadMore--old">\n        <button ng-click="loadMore(-1)" class="loadMore__btn loadMore__btn--count loadMore__btn--old animate--faster" data-count type="button" js-load-timeline>\n            <load-more-icon></load-more-icon>\n        </button>\n    </div>\n\n</div>\n\n<!-- Mask & ControlCenter -->\n<div ng-if="controlCenter" class="cancelMask cancelMask--timeline animate--general" ng-click="setControlCenter(\'\')">\n    <div class="cancelMask__wrapper overflow--y">\n        <div ng-click="$event.stopPropagation()"></div>\n    </div>\n</div>\n<div ui-view class="animate--general"></div>\n<div ng-include=" \'controlCenter/wrapper.html\' " class="controlCenter controlCenter--timeline vertically_center animate--general"></div>\n\n<!-- Menu: Left -->\n<div class="menu menu--timeline menu--left menu--timeline--left vertically_center animate--faster">\n    <div>\n        <a href="/settings" role="button">\n            <span class="menu__button btn animate--faster">\n                <svg viewBox="0 0 200 200">\n                    <g fill="none">\n                        <circle fill="#F1F1F1" cx="100" cy="100" r="100"/>\n                        <circle fill="#FFF" ng-attr-fill="{{::providerList.indexOf(\'twitter\') >= 0 ? \'#2AA9E0\' : \'#FFF\'}}" cx="100" cy="42.5" r="15"/>\n                        <circle fill="#FFF" ng-attr-fill="{{::providerList.indexOf(\'instagram\') >= 0 ? \'#3F5D87\' : \'#FFF\'}}" cx="100" cy="100" r="15" />\n                        <circle fill="#FFF" ng-attr-fill="{{::providerList.indexOf(\'weibo\') >= 0 ? \'#E6162D\' : \'#FFF\'}}" cx="100" cy="157.5" r="15"/>\n                    </g>\n                </svg>\n            </span>\n        </a>\n    </div>\n</div>\n<!-- Menu: Right -->\n<div class="menu menu--timeline menu--right menu--timeline--right vertically_center animate--faster">\n    <!--                      ⬇️ 修復 $compile 失效的 BUG -->\n    <div ng-show="!controlCenter" ng-init="::_firstProvider = providerList.indexOf(\'twitter\') >= 0 ? \'twitter\' : providerList.indexOf(\'weibo\') >= 0 ? \'weibo\' : \'instagram\'">\n        <button class="menu__button animate--faster" ng-class="::\'icon--\' + _firstProvider" type="button" show-menu="{{::_firstProvider}}" js-show-menu>\n            <svg viewBox="0 0 200 200">\n                <g fill-rule="evenodd">\n                    <circle fill="#F1F1F1" cx="100" cy="100" r="100"/>\n                    <path fill ng-attr-fill="{{::_firstProvider !== \'instagram\' ? null : \'#FFF\'}}" d="M96.63 30.143c1.862-3.393 4.88-3.392 6.74 0l10.26 18.714c1.862 3.393.232 6.143-3.634 6.143H90.004c-3.868 0-5.495-2.75-3.635-6.143l10.26-18.714z"/>\n                    <circle cx="100" cy="100" r="15"/>\n                    <rect fill="#FFF" ng-attr-fill="{{::_firstProvider === \'twitter\' ? \'#2AA9E0\' : \'#FFF\'}}" x="86" y="145" width="28" height="28" rx="7"/>\n                </g>\n            </svg>\n        </button>\n    </div>\n\n    <div ng-if="controlCenter">\n        <button class="menu__button animate--faster" type="button" ng-click="setControlCenter(\'\')">\n            <svg viewBox="0 0 200 200">\n                <use xlink:href="/public/img/icon-sprites.svg#cancel"></use>\n            </svg>\n        </button>\n    </div>\n</div>\n'),e.put("actions/instagram.html",'<span class="cursor--pointer">\n    <!-- Favorite -->\n    <button ng-click="setControlCenter(\'read_instagram-like\' + \':\' + item.id_str)" class="actions tips--deep" ng-class="::{\'icon--like\': item.favorited}" type="button">\n        <svg class="actions__button" viewBox="0 0 26 26">\n            <use xlink:href="/public/img/icon-sprites.svg#favorite"></use>\n        </svg>\n        <span class="actions__count" ng-attr-data-count="{{::item.favorite_count > 0 ? item.favorite_count : \'\'}}"></span>\n    </button>\n    <!-- Reply -->\n    <button ng-click="setControlCenter(\'read_instagram-reply\' + \':\' + item.id_str)" class="actions tips--deep" type="button">\n        <svg class="actions__button" viewBox="0 0 26 26">\n            <use xlink:href="/public/img/icon-sprites.svg#reply">\n        </svg>\n        <span class="actions__count" ng-attr-data-count="{{::item.reply_count > 0 ? item.reply_count : \'\'}}"></span>\n    </button>\n    <!-- Source -->\n    <a ng-href="{{::item.link}}" target="_blank" role="button">\n        <span class="actions btn tips--deep">\n            <svg class="actions__button" viewBox="0 0 26 26" data-source>\n                <use xlink:href="/public/img/icon-sprites.svg#source"></use>\n            </svg>\n            <span class="actions__count"></span>\n        </span>\n    </a>\n    <!-- Location -->\n    <a ng-if="::item.location" ng-href="/instagram/location/{{::item.location.id}}?x={{::item.location.name}}" role="button">\n        <span class="timeline__location btn tips--deep">\n            <svg viewBox="0 0 26 26">\n                <use xlink:href="/public/img/icon-sprites.svg#location"></use>\n            </svg>\n            <span class="timeline__location__name" ng-bind="::item.location.name"></span>\n        </span>\n    </a>\n</span>\n'),e.put("actions/twitter--quote.html",'<span class="cursor--pointer" data-quote-id="{{::item.quote.id_str}}">\n    <a ng-href="//twitter.com/{{::item.quote.user.screen_name}}/status/{{::item.quote.id_str}}" target="_blank" role="button">\n        <span class="actions btn tips--deep">\n            <svg class="actions__button" viewBox="0 0 26 26" data-source>\n                <use xlink:href="/public/img/icon-sprites.svg#source"></use>\n            </svg>\n            <span class="actions__count"></span>\n        </span>\n    </a>\n</span>'),e.put("actions/twitter.html",'<span class="cursor--pointer">\n    <!-- Favorite -->\n    <button ng-click="toggleAction(\'like\', item)" class="actions tips--deep" ng-class="::{\'icon--like tips--active\': item.favorited}" type="button">\n        <svg class="actions__button" viewBox="0 0 26 26" data-like>\n            <use xlink:href="/public/img/icon-sprites.svg#favorite"></use>\n        </svg>\n        <span class="actions__count" ng-attr-data-count="{{::item.favorite_count > 0 ? item.favorite_count : \'\'}}"></span>\n    </button>\n    <!-- Retweet -->\n    <button ng-click="toggleAction(\'retweet\', item)" class="actions tips--deep" ng-class="::{\'icon--retweet tips--frozen\': item.retweeted}" type="button">\n        <svg class="actions__button" viewBox="0 0 34 26" data-retweet>\n            <use xlink:href="/public/img/icon-sprites.svg#retweet"></use>\n        </svg>\n        <span class="actions__count" ng-attr-data-count="{{::item.retweet_count > 0 ? item.retweet_count : \'\'}}"></span>\n    </button>\n    <!-- Reply -->\n    <button ng-click="toggleAction(\'reply\', item)" class="actions tips--deep" type="button">\n        <svg class="actions__button" viewBox="0 0 26 26" data-reply>\n            <use xlink:href="/public/img/icon-sprites.svg#reply"></use>\n        </svg>\n        <span class="actions__count"></span>\n    </button>\n    <!-- Source -->\n    <a ng-href="//twitter.com/{{::item.user.screen_name}}/status/{{::item.id_str}}" target="_blank" role="button">\n        <span class="actions btn tips--deep">\n            <svg class="actions__button" viewBox="0 0 26 26" data-source>\n                <use xlink:href="/public/img/icon-sprites.svg#source"></use>\n            </svg>\n            <span class="actions__count"></span>\n        </span>\n    </a>\n    <!-- Location -->\n    <a ng-if="::item.location" ng-href="/twitter/location/{{::item.location.id}}?x={{::item.location.name}}" role="button">\n        <span class="timeline__location btn tips--deep">\n            <svg viewBox="0 0 26 26">\n                <use xlink:href="/public/img/icon-sprites.svg#location"></use>\n            </svg>\n            <span class="timeline__location__name" ng-bind="::item.location.name"></span>\n        </span>\n    </a>\n</span>'),e.put("actions/weibo--quote.html",'<span class="cursor--pointer" data-quote-id="{{::item.retweet.id_str}}">\n    <a ng-href="//weibo.com/{{::item.retweet.user.uid}}/{{::item.retweet.mid}}" target="_blank" role="button">\n        <span class="actions btn tips--deep">\n            <svg class="actions__button" viewBox="0 0 26 26" data-source>\n                <use xlink:href="/public/img/icon-sprites.svg#source"></use>\n            </svg>\n            <span class="actions__count"></span>\n        </span>\n    </a>\n</span>'),e.put("actions/weibo.html",'<span class="cursor--pointer">\n    <!-- Retweet -->\n    <button ng-click="toggleAction(\'retweet\', item)" class="actions tips--deep" type="button">\n        <svg class="actions__button" viewBox="0 0 34 26" data-retweet>\n            <use xlink:href="/public/img/icon-sprites.svg#retweet"></use>\n        </svg>\n        <span class="actions__count" ng-attr-data-count="{{::item.retweet_count > 0 ? item.retweet_count : \'\'}}"></span>\n    </button>\n    <!-- Reply -->\n    <button ng-click="toggleAction(\'reply\', item)" class="actions tips--deep" type="button">\n        <svg class="actions__button" viewBox="0 0 26 26" data-reply>\n           <use xlink:href="/public/img/icon-sprites.svg#reply"></use>\n        </svg>\n        <span class="actions__count" ng-attr-data-count="{{::item.comments_count > 0 ? item.comments_count : \'\'}}"></span>\n    </button>\n    <!-- Source -->\n    <a ng-href="//weibo.com/{{::item.user.uid}}/{{::item.mid}}" target="_blank" role="button">\n        <span class="actions btn tips--deep">\n            <svg class="actions__button" viewBox="0 0 26 26" data-source>\n                <use xlink:href="/public/img/icon-sprites.svg#source"></use>\n            </svg>\n            <span class="actions__count"></span>\n        </span>\n    </a>\n    <!-- Star -->\n    <button ng-click="toggleAction(\'star\', item)" class="actions tips--deep" type="button">\n        <svg class="actions__button" viewBox="0 0 26 26" data-star>\n            <use xlink:href="/public/img/icon-sprites.svg#star"></use>\n        </svg>\n        <span class="actions__count"></span>\n    </button>\n    <!-- Location -->\n    <a ng-if="::item.location" ng-href="/weibo/location/{{::item.location.lat}}_{{::item.location.long}}?x=位置" role="button">\n        <span class="timeline__location btn tips--deep">\n            <svg viewBox="0 0 26 26">\n                <use xlink:href="/public/img/icon-sprites.svg#location"></use>\n            </svg>\n        </span>\n    </a>\n</span>'),e.put("controlCenter/wrapper.html","<div ng-if=\"controlCenter\" class=\"animate--general\"> \n    <!-- Replicant -->\n    <div ng-if=\"::controlCenter.indexOf('replicant') >= 0\" ng-include=\" 'controlCenter/replicant/' + controlCenter.replace('replicant--', '') + '.html' \" class=\"replicant animate--general\">\n    </div>\n    <!-- Write -->\n    <div ng-if=\"::controlCenter.indexOf('write') >= 0\" ng-include=\" 'controlCenter/write/' + controlCenter.replace('write_', '').split('-')[0] + '.html' \" class=\"animate--general\">\n    </div>\n    <!-- Read -->\n    <div ng-if=\"::controlCenter.indexOf('read_') >= 0\" ng-include=\" 'controlCenter/read/' + controlCenter.replace('read_', '').split('-')[0] + '.html' \" class=\"animate--general\">\n    </div>\n    <!-- Notification -->\n    <div ng-if=\"::controlCenter.indexOf('notification_') >= 0\" ng-include=\" 'controlCenter/notification/' + controlCenter.replace('notification_', '').split('-')[0] + '.html' \" class=\"animate--general\">\n    </div>\n</div>"),e.put("instagram/post.html",'<div class="timeline__profile">\n    <a ng-href="/instagram/user/{{::item.user.uid}}">\n        <img class="timeline__profile__avatar timeline__profile__avatar--instagram" ng-src="{{::item.user.avatar}}">\n    </a>\n    <div class="timeline__profile__fullname">\n        <a ng-href="//instagram.com/{{::item.user.screen_name}}" target="_blank">\n            <strong ng-bind="::item.user.name || item.user.screen_name"></strong>\n        </a>\n    </div>\n</div>\n\n<div class="timeline__content">\n\n    <div ng-include=" \'media/instagram.html\' "></div>\n    <p class="timeline__text" ol-linkify="instagram">{{::item.text | html}}</p>\n</div>\n\n<div ng-include=" \'actions/instagram.html\' "></div>\n\n<span class="timeline__time tips" relative-date="{{::item.created_at}}"></span>\n'),e.put("media/instagram.html",'<div class="timeline__media">\n\n    <div class="timeline__media--large" ol-lazy-image="{{::item.images.ratio}}">\n        <a ng-if="::!item.videos" ng-href="{{::item.images.standard_resolution}}" class="timeline__media__icon timeline__media__icon--origin icon--instagram tips--deep animate--faster" target="_blank">\n            <svg viewBox="0 0 100 100">\n                <use xlink:href="/public/img/icon-sprites.svg#eyeball"></use>\n            </svg>\n        </a>\n\n        <img ng-if="::!item.videos" ng-src="{{::item.images.standard_resolution}}" handle-image-error>\n\n        <div ng-if="::!item.videos && item.users_in_photo">\n            <button class="timeline__media__icon timeline__media__icon--users icon--instagram tips--deep--peace animate--faster" users-in-photo="::item.users_in_photo">\n                <svg viewBox="0 0 102 118">\n                    <use xlink:href="/public/img/icon-sprites.svg#users_in_photo"></use>\n                </svg>\n            </button>\n\n            <a ng-repeat="user in ::item.users_in_photo" class="timeline__media__userTag animate--faster" ng-href="//instagram.com/{{::user.user.username}}" target="_blank">\n                <div class="timeline__media__userTag__pointer"></div>\n                <span class="timeline__media__userTag__content">\n                    <img ng-src="{{::user.user.profile_picture}}">\n                </span>\n            </a>\n        </div>\n\n\n        <ol-video ng-if="::item.videos" ol-src="{{::item.videos.standard_resolution}}" ol-poster="{{::item.images.low_resolution}}" ol-id="{{::item.id_str}}"></ol-video>\n    </div>\n\n</div>\n'),e.put("media/twitter--quote.html",'<div class="timeline__media">\n    <div ng-repeat="media in ::item.quote.media" class="timeline__media--large" ol-lazy-image="{{::media.ratio}}">\n        <a ng-if="::media.type === \'photo\'" ng-href="{{::media.image_url}}:large" class="timeline__media__icon timeline__media__icon--origin icon--twitter tips--deep animate--faster" target="_blank">\n            <svg viewBox="0 0 100 100">\n                <use xlink:href="/public/img/icon-sprites.svg#eyeball"></use>\n            </svg>\n        </a>\n\n        <img ng-if="::media.type === \'photo\'" ng-src="{{::media.image_url}}" handle-image-error>\n\n        <ol-video ng-if="::media.type !== \'photo\'" ol-src="{{::media.video_url}}" ol-poster="{{::media.image_url + \':small\'}}" ol-id="{{::item.id_str}}"></ol-video>\n    </div>\n</div>\n'),e.put("media/twitter.html",'<div class="timeline__media">\n    <div ng-repeat="media in ::item.media" class="timeline__media--large" ol-lazy-image="{{::media.ratio}}">\n        <a ng-if="::media.type === \'photo\'" ng-href="{{::media.image_url}}:large" class="timeline__media__icon timeline__media__icon--origin icon--twitter tips--deep animate--faster" target="_blank">\n            <svg viewBox="0 0 100 100">\n                <use xlink:href="/public/img/icon-sprites.svg#eyeball"></use>\n            </svg>\n        </a>\n\n        <img ng-if="::media.type === \'photo\'" ng-src="{{::media.image_url}}" handle-image-error>\n\n        <ol-video ng-if="::media.type !== \'photo\'" ol-src="{{::media.video_url}}" ol-poster="{{::media.image_url + \':small\'}}" ol-id="{{::item.id_str}}"></ol-video>\n    </div>\n</div>\n'),e.put("media/video.html",'<video ng-attr-poster="{{::olPoster}}" preload="none" loop webkit-playsinline="true"></video>\n\n<svg class="timeline__media__playButton animate--faster" viewBox="0 0 100 100">\n    <use xlink:href="/public/img/icon-sprites.svg#play"></use>\n</svg>'),e.put("media/weibo.html",'<div class="timeline__media overflow--x timeline__media--thumb">\n    <img class="animate--faster" ng-repeat="media in ::item.media" ng-src="{{:: media.image_url}}" ng-class="::{ \'timeline__media--gif\': media.type ===\'gif\' }" ol-image-thumb handle-image-error>\n</div>\n<div class="timeline__media timeline__media--hide" select-image image-count="{{:: item.media.length}}">\n    <img src="" alt="weibo_large_photo" handle-image-error fuck-long-weibo>\n\n    <a href="" target="_blank" class="timeline__media__icon timeline__media__icon--origin icon--weibo tips--deep animate--faster" ng-click="$event.stopPropagation()">\n        <svg viewBox="0 0 100 100">\n            <use xlink:href="/public/img/icon-sprites.svg#eyeball"></use>\n        </svg>\n    </a>\n</div>'),e.put("twitter/quote.html",'<div ng-include=" \'twitter/component/profile.html\' "></div>\n\n<div ng-include=" \'twitter/component/content.html\' "></div>\n\n<!-- Origin Start -->\n<div class="timeline timeline--quote timeline--quote--twitter">\n\n    <div ng-include=" \'twitter/component/profile--quote.html\' "></div>\n\n    <div ng-include=" \'twitter/component/content--quote.html\' "></div>\n\n    <div ng-include=" \'actions/twitter--quote.html\' "></div>\n\n    <span class="timeline__time" relative-date="{{::item.quote.created_at}}"></span>\n\n</div>\n<!-- Origin End -->\n\n<div ng-include=" \'actions/twitter.html\' "></div>\n\n<span class="timeline__time tips" relative-date="{{::item.created_at}}"></span>'),e.put("twitter/retweet.html",'<div ng-include=" \'twitter/component/profile--retweet.html\' "></div>\n\n<div ng-include=" \'twitter/component/content.html\' "></div>\n\n\n<a class="timeline--retweet__profile__avatar" ng-href="/twitter/user/{{::item.user.screen_name}}">\n    <img class="timeline__profile__avatar" ng-src="{{::item.user.avatar.replace(\'normal\', \'bigger\')}}" alt="avatar">\n</a>\n\n<div ng-include=" \'actions/twitter.html\' "></div>\n\n<span class="timeline__time tips" relative-date="{{::item.created_at}}"></span>\n'),e.put("twitter/tweet.html",'<div ng-include=" \'twitter/component/profile.html\' "></div>\n\n<div ng-include=" \'twitter/component/content.html\' "></div>\n\n<div ng-include=" \'actions/twitter.html\' "></div>\n\n<span class="timeline__time tips" relative-date="{{::item.created_at}}"></span>'),e.put("weibo/quote.html",'<div ng-include=" \'weibo/component/profile.html\' "></div>\n\n<div ng-include=" \'weibo/component/content.html\' "></div>\n\n<!-- Origin Start -->\n<div class="timeline timeline--quote timeline--quote--weibo">\n\n    <div ng-include=" \'weibo/component/profile--retweet.html\' "></div>\n\n    <div ng-include=" \'weibo/component/content--retweet.html\' "></div>\n\n    <div ng-include=" \'actions/weibo--quote.html\' "></div>\n\n    <span class="timeline__time" relative-date="{{::item.retweet.created_at}}"></span>\n</div>\n<!-- Origin End -->\n\n<div ng-include=" \'actions/weibo.html\' "></div>\n\n<span class="timeline__time tips" relative-date="{{::item.created_at}}"></span>\n'),e.put("weibo/retweet.html",'<div ng-include=" \'weibo/component/profile--retweet.html\' "></div>\n\n<div ng-include=" \'weibo/component/content--retweet.html\' "></div>\n\n<a class="timeline--retweet__profile__avatar" ng-href="//weibo.com/n/{{::item.user.screen_name}}" target="_blank">\n    <img class="timeline__profile__avatar" ng-src="{{::item.user.avatar.replace(\'/50/\', \'/180/\')}}" alt="avatar">\n</a>\n\n<div ng-include=" \'actions/weibo.html\' "></div>\n\n<span class="timeline__time tips" relative-date="{{::item.created_at}}"></span>\n'),e.put("weibo/tweet.html",'<div ng-include=" \'weibo/component/profile.html\' "></div>\n\n<div ng-include=" \'weibo/component/content.html\' "></div>\n\n<div ng-include=" \'actions/weibo.html\' "></div>\n\n<span class="timeline__time tips" relative-date="{{::item.created_at}}"></span>'),e.put("controlCenter/notification/twitter.html",'<div notification="twitter">\n    <button class="notification__column tips--deep--peace" type="button">\n        <svg viewBox="0 0 26 26">\n           <use xlink:href="/public/img/icon-sprites.svg#mentions"></use>\n        </svg>\n    </button>\n    <button class="notification__column tips--deep--peace"type="button">\n        <svg viewBox="0 0 28 23">\n           <use xlink:href="/public/img/icon-sprites.svg#direct_msg"></use>\n        </svg>\n    </button>\n</div>'),e.put("controlCenter/read/instagram.html",'<div class="read overflow--y" ng-class="{\'read--reply\': readType === \'reply\'}" read>\n\n    <div ng-if="!readType" class="loadMore loadMore--initLoad  loadMore--new">\n        <div class="loadMore__btn loadMore__btn--loading loadMore__btn--new loadMore__btn--instagram animate--faster">\n            <load-more-icon></load-more-icon>\n        </div>\n    </div>\n\n    <div ng-if="readType === \'like\'" class="read__like">\n        <a ng-repeat="item in ::readItems" ng-href="/instagram/user/{{::item.screen_name}}" class="read__like__avatar timeline__media--inactive btn" role="button" data-btn="{{::item.screen_name}}">\n            <img ng-src="{{::item.avatar}}">\n        </a>\n        <div ng-if="readItems.length === 0" class="read--empty icon--inactive vertically_center">\n            <svg viewBox="0 0 34 26">\n                <use xlink:href="/public/img/icon-sprites.svg#retweet"></use>\n            </svg>\n        </div>\n    </div>\n\n    <ul ng-if="readType === \'reply\'" class="read__reply">\n        <li ng-repeat="item in ::readItems | orderBy: \'- created_at\'" class="vertically_center">\n            <a ng-href="/instagram/user/{{::item.screen_name}}" class="read__reply__avatar timeline__media--inactive btn" role="button" data-btn="{{::item.screen_name}}">\n                <img ng-src="{{::item.avatar}}">\n            </a>\n            <div class="read__reply__text">\n                <p linkify="instagram">{{::item.text | html}}</p>\n                <span class="read__reply__time tips" relative-date="{{::item.created_at}}"></span>\n            </div>\n        </li>\n\n        <div ng-if="readItems.length === 0" class="read--empty icon--inactive vertically_center">\n            <svg viewBox="0 0 26 26">\n                <use xlink:href="/public/img/icon-sprites.svg#reply"></use>\n            </svg>\n        </div>\n    </ul>\n</div>'),e.put("controlCenter/read/twitter.html",'<div class="read overflow--y" ng-class="{\'read--reply\': readType === \'reply\'}" read>\n\n    <div ng-if="!readType" class="loadMore loadMore--initLoad loadMore--new">\n        <div class="loadMore__btn loadMore__btn--loading loadMore__btn--new loadMore__btn--twitter animate--faster">\n            <load-more-icon></load-more-icon>\n        </div>\n    </div>\n\n    <div ng-if="readType === \'retweet\'" class="read__like">\n        <a ng-repeat="item in ::readItems" ng-href="/twitter/user/{{::item.screen_name}}" class="read__like__avatar timeline__media--inactive btn" role="button" data-btn="{{::item.screen_name}}">\n            <img ng-src="{{::item.avatar}}">\n        </a>\n        <div ng-if="readItems.length === 0" class="read--empty icon--inactive vertically_center">\n            <svg viewBox="0 0 34 26">\n                <use xlink:href="/public/img/icon-sprites.svg#retweet"></use>\n            </svg>\n        </div>\n    </div>\n\n</div>\n<div class="switch-icon">\n    <button ng-click="setControlCenter(\'write_twitter-retweet:\' + controlCenter.split(\':\')[1])" class="icon--twitter animate--faster tips" type="button">\n        <svg viewBox="0 0 283 150">\n            <use xlink:href="/public/img/icon-sprites.svg#2Write"></use>\n        </svg>\n    </button>\n</div>'),e.put("controlCenter/read/weibo.html",'<div class="read overflow--y" ng-class="{\'read--reply\': readType === \'reply\'}" read>\n\n    <div ng-if="!readType" class="loadMore loadMore--initLoad loadMore--new">\n        <div class="loadMore__btn loadMore__btn--loading loadMore__btn--new loadMore__btn--weibo animate--faster">\n            <load-more-icon></load-more-icon>\n        </div>\n    </div>\n\n    <ul ng-if="readType === \'reply\'" class="read__reply">\n        <li ng-repeat="item in ::readItems | orderBy: \'- created_at\'" class="vertically_center">\n            <a ng-href="//weibo.com/n/{{::item.screen_name}}" class="read__reply__avatar"  target="_blank">\n                <img ng-src="{{::item.avatar}}">\n            </a>\n            <div class="read__reply__text">\n                <p linkify="weibo" weibo-emotify>{{::item.text | html}}</p>\n                <span class="read__reply__time tips" relative-date="{{::item.created_at}}"></span>\n            </div>\n        </li>\n\n        <div ng-if="readItems.length === 0" class="read--empty icon--inactive vertically_center">\n            <svg viewBox="0 0 26 26">\n                <use xlink:href="/public/img/icon-sprites.svg#reply"></use>\n            </svg>\n        </div>\n    </ul>\n</div>\n<div class="switch-icon">\n    <button ng-click="setControlCenter(\'write_weibo-reply:\' + controlCenter.split(\':\')[1])" class="icon--weibo animate--faster tips" type="button">\n        <svg viewBox="0 0 283 150">\n            <use xlink:href="/public/img/icon-sprites.svg#2Write"></use>\n        </svg>\n    </button>\n</div>'),e.put("controlCenter/replicant/deckard.html",'<span class="replicant--deckard" replicant-deckard data-countdown></span>'),e.put("controlCenter/replicant/rachael.html",'<form method="POST" action="" replicant-rachael>\n    <input class="replicant--rachael" type="text" name="code" placeholder="80af294" required maxlength="7">\n</form>\n'),e.put("controlCenter/write/twitter.html",'<form name="newTweetForm" write class="write__form">\n\n    <textarea class="write__textarea animate--general" type="text" name="tweet" autocomplete="off" spellcheck="false" required></textarea>\n    <div class="write__textarea write__textarea--mirror"><span></span></div>\n\n    <div class="write__toolBar">\n        <!-- left -->\n        <geo-picker ng-if="item.type !== \'retweet\'" class="animate--faster"></geo-picker>\n        <!--            ⬇️ 使用 ng-show 防止 mediaIds 丟失 -->\n        <media-upload ng-show="item.type !== \'retweet\' && item.media.length < 4" class="animate--faster" provider="twitter"></media-upload>\n        <toggle-sensitive ng-if="item.media.length > 0" class="animate--faster"></toggle-sensitive>\n        <!-- right -->\n        <button class="write__btn write__btn--send icon--twitter tips" type="submit" data-count disabled>\n            <svg viewBox="0 0 113 72">\n                <use xlink:href="/public/img/icon-sprites.svg#writing"></use>\n            </svg>\n        </button>\n    </div>\n\n    <div class="write__previews">\n        <span ng-repeat="item in item.media" class="write__previews__item tips--active tips--inprocess animate--faster" ng-attr-data-mediaId="{{::item.fakeId}}">\n            <img ng-src="{{::item.image_url}}">\n        </span>\n    </div>\n\n    <button ng-if="!isShowLivePreview" ng-click="showLivePreview()" class="write__live-preview animate--faster tips" type="button">\n        <svg viewBox="0 0 200 100">\n            <use xlink:href="/public/img/icon-sprites.svg#show"></use>\n        </svg>\n    </button>\n</form>\n<div ng-if="isShowMentions" class="write__mentions write__popup overflow--y animate--faster" ng-class="{\'write__popup--left\': isLeftPopup, \'write__popup--right\': !isLeftPopup}">\n    <button ng-repeat="mention in mentionsList" ng-click="insertMention(mention.s, \'twitter\')" ng-bind="mention.u || mention.s"></button>\n</div>\n<div class="switch-icon">\n    <button ng-if="::controlCenter.indexOf(\'write_twitter-retweet\') >= 0" ng-click="setControlCenter(\'read_twitter-retweet:\' + controlCenter.split(\':\')[1])" class="icon--twitter animate--faster tips" type="button">\n        <svg viewBox="0 0 283 150">\n            <use xlink:href="/public/img/icon-sprites.svg#2Retweet"></use>\n        </svg>\n    </button>\n    <button ng-if="::providerList.indexOf(\'weibo\') >= 0 && controlCenter.indexOf(\'write_twitter-tweet\') >= 0" ng-click="setControlCenter(\'write_weibo-tweet\')" class="animate--faster tips--deep" type="button">\n        <svg viewBox="0 0 283 150">\n            <use xlink:href="/public/img/icon-sprites.svg#2Weibo"></use>\n        </svg>\n    </button>\n</div>'),
e.put("controlCenter/write/weibo.html",'<form name="newTweetForm" write class="write__form">\n\n    <textarea class="write__textarea animate--general" type="text" name="tweet" autocomplete="off" spellcheck="false" required></textarea>\n    <div class="write__textarea write__textarea--mirror"><span></span></div>\n\n    <div class="write__toolBar">\n        <!-- left -->\n        <weibo-emotions></weibo-emotions>\n        <geo-picker ng-if="::controlCenter.indexOf(\'write_weibo-tweet\') >= 0"></geo-picker>\n        <!-- right -->\n        <button class="write__btn write__btn--send icon--weibo tips" type="submit" data-count disabled>\n            <svg viewBox="0 0 113 72">\n                <use xlink:href="/public/img/icon-sprites.svg#writing"></use>\n            </svg>\n        </button>\n    </div>\n\n    <div class="write__previews"></div>\n\n    <button ng-if="!isShowLivePreview" ng-click="showLivePreview()" class="write__live-preview animate--faster tips" type="button">\n        <svg viewBox="0 0 200 100">\n            <use xlink:href="/public/img/icon-sprites.svg#show"></use>\n        </svg>\n    </button>\n</form>\n<div ng-if="isShowMentions" class="write__mentions write__popup overflow--y animate--faster" ng-class="{\'write__popup--left\': isLeftPopup, \'write__popup--right\': !isLeftPopup}">\n    <button ng-repeat="mention in mentionsList" ng-click="insertMention(mention, \'weibo\')" ng-bind="mention"></button>\n</div>\n<div ng-if="isShowEmotions" class="write__emotions write__popup overflow--y animate--faster" ng-class="{\'write__popup--left\': isLeftPopup, \'write__popup--right\': !isLeftPopup}">\n    <button ng-repeat="emotion in ::emotionsList" type="button" ng-click="insertEmotion(emotion)" weibo-emotify ng-bind="::\'[\' + emotion + \']\'">\n    </button>\n</div>\n<div class="switch-icon">\n    <button ng-if="::controlCenter.indexOf(\'write_weibo-reply\') >= 0" ng-click="setControlCenter(\'read_weibo-reply:\' + controlCenter.split(\':\')[1])" class="icon--weibo animate--faster tips" type="button">\n        <svg viewBox="0 0 283 150">\n            <use xlink:href="/public/img/icon-sprites.svg#2Reply"></use>\n        </svg>\n    </button>\n    <button ng-if="::providerList.indexOf(\'twitter\') >= 0 && controlCenter.indexOf(\'write_weibo-tweet\') >= 0" ng-click="setControlCenter(\'write_twitter-tweet\')" class="animate--faster tips--deep" type="button">\n        <svg viewBox="0 0 283 150">\n            <use xlink:href="/public/img/icon-sprites.svg#2Twitter"></use>\n        </svg>\n    </button>\n</div>'),e.put("mask/menu/instagram.html",'<!-- 用戶信息 -->\n<button user-profile="instagram" class="mask__menu--row mask__menu--row--1 mask__menu__button icon--instagram tips animate--faster" type="button">\n    <svg viewBox="0 0 200 200">\n       <use xlink:href="/public/img/icon-sprites.svg#profile"></use>\n    </svg>\n</button>\n\n<!-- Switch -->\n<button ng-if="::providerList.indexOf(\'weibo\') >= 0" class="mask__menu__button mask__menu__button--switch mask__menu__button--switch--left icon--weibo tips--deep--peace" type="button" show-menu="weibo">\n    <svg viewBox="0 0 77 77">\n        <use xlink:href="/public/img/icon-sprites.svg#2"></use>\n    </svg>\n</button>\n<button ng-if="::providerList.indexOf(\'twitter\') >= 0" class="mask__menu__button mask__menu__button--switch mask__menu__button--switch--right icon--twitter tips--deep--peace" type="button" show-menu="twitter">\n    <svg viewBox="0 0 77 77">\n        <use xlink:href="/public/img/icon-sprites.svg#2"></use>\n    </svg>\n</button>'),e.put("mask/menu/twitter.html",'<!-- 寫推 -->\n<button class="mask__menu--row mask__menu--row--3 mask__menu--row--3--1 mask__menu__button icon--twitter tips animate--faster" ng-click="setControlCenter(\'write_twitter-tweet\')" type="button">\n    <svg viewBox="0 0 200 200">\n       <use xlink:href="/public/img/icon-sprites.svg#newTweet"></use>\n    </svg>\n</button>\n<!-- 用戶信息 -->\n<button user-profile="twitter" class="mask__menu--row mask__menu--row--3 mask__menu--row--3--2 mask__menu__button icon--twitter btn tips animate--faster" type="button">\n    <svg viewBox="0 0 200 200">\n       <use xlink:href="/public/img/icon-sprites.svg#profile"></use>\n    </svg>\n</button>\n<!-- 通知 -->\n<button class="mask__menu--row mask__menu--row--3 mask__menu--row--3--3 mask__menu__button icon--twitter tips animate--faster" ng-click="setControlCenter(\'notification_twitter\')" type="button">\n    <svg viewBox="0 0 200 200">\n       <use xlink:href="/public/img/icon-sprites.svg#notification"></use>\n    </svg>\n</button>\n\n<!-- Switch -->\n<button ng-if="::providerList.indexOf(\'instagram\') >= 0" class="mask__menu__button mask__menu__button--switch mask__menu__button--switch--left icon--instagram tips--deep--peace" type="button" show-menu="instagram">\n    <svg viewBox="0 0 77 77">\n        <use xlink:href="/public/img/icon-sprites.svg#2"></use>\n    </svg>\n</button>\n<button ng-if="::providerList.indexOf(\'weibo\') >= 0" class="mask__menu__button mask__menu__button--switch mask__menu__button--switch--right icon--weibo tips--deep--peace" type="button" show-menu="weibo">\n    <svg viewBox="0 0 77 77">\n        <use xlink:href="/public/img/icon-sprites.svg#2"></use>\n    </svg>\n</button>\n'),e.put("mask/menu/weibo.html",'<!-- 寫推 -->\n<button class="mask__menu--row mask__menu--row--2 mask__menu--row--2--1 mask__menu__button icon--weibo tips animate--faster" ng-click="setControlCenter(\'write_weibo-tweet\')" type="button">\n    <svg viewBox="0 0 200 200">\n       <use xlink:href="/public/img/icon-sprites.svg#newTweet"></use>\n    </svg>\n</button>\n<!-- 用戶信息 -->\n<button user-profile="weibo" class="mask__menu--row mask__menu--row--2 mask__menu--row--2--2 mask__menu__button icon--weibo btn tips animate--faster" type="button">\n    <svg viewBox="0 0 200 200">\n       <use xlink:href="/public/img/icon-sprites.svg#profile"></use>\n    </svg>\n</button>\n\n<!-- Switch -->\n<button ng-if="::providerList.indexOf(\'twitter\') >= 0" class="mask__menu__button mask__menu__button--switch mask__menu__button--switch--left icon--twitter tips--deep--peace" type="button" show-menu="twitter">\n    <svg viewBox="0 0 77 77">\n        <use xlink:href="/public/img/icon-sprites.svg#2"></use>\n    </svg>\n</button>\n<button ng-if="::providerList.indexOf(\'instagram\') >= 0" class="mask__menu__button mask__menu__button--switch mask__menu__button--switch--right icon--instagram tips--deep--peace" type="button" show-menu="instagram">\n    <svg viewBox="0 0 77 77">\n        <use xlink:href="/public/img/icon-sprites.svg#2"></use>\n    </svg>\n</button>'),e.put("mask/search/instagram.html",'<div ng-if="loadState !== \'initLoad\'" class="timeline mask animate--enter">\n\n    <div class="timeline--twitter">\n        <!-- Header -->\n        <div ng-switch="::mask.type" class="mask__header mask__header--instagram">\n            <!-- Location -->\n            <a ng-switch-when="location" ng-href="//instagram.com/explore/locations/{{mask.q}}" target="_blank" role="button">\n                <span class="mask__header__title btn icon--instagram tips--deep">\n                    <svg viewBox="0 0 60 60">\n                       <use xlink:href="/public/img/icon-sprites.svg#location"></use>\n                    </svg>\n                    <span ng-bind="mask.title"></h3>\n                </span>\n            </a>\n            <!-- Tags -->\n            <a ng-switch-when="tags" ng-href="//instagram.com/explore/tags/{{mask.q}}" target="_blank" role="button">\n                <span class="mask__header__title btn icon--instagram tips--deep">\n                    <svg viewBox="0 0 60 60">\n                       <use xlink:href="/public/img/icon-sprites.svg#tags"></use>\n                    </svg>\n                    <span ng-bind="mask.q"></h3>\n                </span>\n            </a>\n        </div>\n\n        <!-- Timeline -->\n        <div ng-if="mask.timeline.length > 0">\n            <div ng-repeat="item in mask.timeline | orderBy: \'-created_at\'" ng-include=" \'mask/component/timeline/instagram.html\' ">\n            </div>\n        </div>\n    </div>\n\n</div>\n\n<div class="loadMore loadMore--old" ng-class="{\'loadMore--initLoad\': loadState === \'initLoad\'}">\n    <button ng-if="loadState === \'initLoad\' || mask.timeline.length >= 5" ng-click="loadMaskTimeline()" class="loadMore__btn loadMore__btn--old loadMore__btn--instagram animate--faster"  ng-class="{\'loadMore__btn--loading\': loadState !== \'loadFin\', \'loadMore__btn--loading--fail\': loadState === \'loadFail\'}" type="button">\n        <load-more-icon></load-more-icon>\n    </button>\n</div>'),e.put("mask/search/twitter.html",'<div ng-if="loadState !== \'initLoad\'" class="timeline mask animate--enter">\n\n    <div class="timeline--twitter">\n        <!-- Header -->\n        <div ng-switch="::mask.type" class="mask__header mask__header--twitter">\n            <!-- Location -->\n            <a ng-switch-when="location" ng-href="//twitter.com/search?q=place:{{mask.q}}" target="_blank" role="button">\n                <span class="mask__header__title btn icon--twitter tips--deep">\n                    <svg viewBox="0 0 60 60">\n                       <use xlink:href="/public/img/icon-sprites.svg#location"></use>\n                    </svg>\n                    <span ng-bind="mask.title"></span>\n                </span>\n            </a>\n            <!-- Tags -->\n            <a ng-switch-when="tags" ng-href="//twitter.com/search?q=%23{{mask.q}}" target="_blank" role="button">\n                <span class="mask__header__title btn icon--twitter tips--deep">\n                    <svg viewBox="0 0 60 60">\n                       <use xlink:href="/public/img/icon-sprites.svg#tags"></use>\n                    </svg>\n                    <span ng-bind="mask.q"></h3>\n                </span>\n            </a>\n        </div>\n\n        <!-- Timeline -->\n        <div ng-if="mask.timeline.length > 0">\n            <div ng-repeat="item in mask.timeline | orderBy: \'-created_at\'" ng-include=" \'mask/component/timeline/twitter.html\' ">\n            </div>\n        </div>\n    </div>\n\n</div>\n\n<div class="loadMore loadMore--old" ng-class="{\'loadMore--initLoad\': loadState === \'initLoad\'}">\n    <button ng-if="loadState === \'initLoad\' || mask.timeline.length >= 5" ng-click="loadMaskTimeline()" class="loadMore__btn loadMore__btn--old loadMore__btn--twitter animate--faster"  ng-class="{\'loadMore__btn--loading\': loadState !== \'loadFin\', \'loadMore__btn--loading--fail\': loadState === \'loadFail\'}" type="button">\n        <load-more-icon></load-more-icon>\n    </button>\n</div>'),e.put("mask/search/weibo.html",'<div ng-if="loadState !== \'initLoad\'" class="timeline mask animate--enter">\n\n    <div class="timeline--twitter">\n        <!-- Header -->\n        <div ng-switch="mask.type" class="mask__header mask__header--weibo">\n            <!-- Location -->\n            <a ng-switch-when="location" ng-href="//maps.google.com/maps?z=12&t=h&q=loc:{{mask.q.split(\'_\')[0]}}+{{mask.q.split(\'_\')[1]}}" target="_blank" role="button">\n                <span class="mask__header__title btn icon--weibo tips--deep">\n                    <svg viewBox="0 0 60 60">\n                       <use xlink:href="/public/img/icon-sprites.svg#location"></use>\n                    </svg>\n                    <span ng-bind="mask.title"></h3>\n                </span>\n            </a>\n            <!-- Tags -->\n        </div>\n\n        <!-- Timeline -->\n        <div ng-if="mask.timeline.length > 0">\n            <div ng-repeat="item in mask.timeline | orderBy: \'-created_at\'" ng-include=" \'mask/component/timeline/weibo.html\' ">\n            </div>\n        </div>\n    </div>\n\n</div>\n\n<div class="loadMore loadMore--old" ng-class="{\'loadMore--initLoad\': loadState === \'initLoad\'}">\n    <button ng-if="loadState === \'initLoad\' || mask.timeline.length >= 5" ng-click="loadMaskTimeline()" class="loadMore__btn loadMore__btn--old loadMore__btn--weibo animate--faster"  ng-class="{\'loadMore__btn--loading\': loadState !== \'loadFin\', \'loadMore__btn--loading--fail\': loadState === \'loadFail\'}" type="button">\n        <load-more-icon></load-more-icon>\n    </button>\n</div>'),e.put("mask/user/instagram.html",'<div ng-if="loadState !== \'initLoad\'" class="timeline mask animate--enter">\n\n    <div class="timeline--instagram profile--instagram">\n        <!-- Profile -->\n        <a class="timeline__profile profile__avatar" ng-href="//instagram.com/{{mask.screen_name}}" target="_blank">\n            <img class="timeline__profile__avatar" ng-src="{{mask.avatar}}" alt="avatar">\n        </a>\n        <div class="timeline__profile timeline__profile__fullname">\n            <a ng-href="//instagram.com/{{mask.screen_name}}" target="_blank">\n                <strong ng-bind="mask.name ? mask.name : mask.screen_name"></strong>\n            </a>\n        </div>\n\n        <div ng-if="true" ng-include=" \'mask/user/component/profile.html\' " onload="_p_type = \'post\'; _p_provider = \'instagram\' "></div>\n\n        <!-- Timeline -->\n        <div ng-if="mask.timeline.length > 0">\n            <div ng-repeat="item in mask.timeline | orderBy: \'-created_at\'" ng-include=" \'mask/component/user_timeline/instagram.html\' "></div>\n        </div>\n    </div>\n\n</div>\n\n<div class="loadMore loadMore--old" ng-class="{\'loadMore--initLoad\': loadState === \'initLoad\'}">\n    <button ng-if="loadState === \'initLoad\' || mask.timeline.length >= 7 && !mask.protected" ng-click="loadMaskTimeline()" class="loadMore__btn loadMore__btn--old loadMore__btn--instagram animate--faster"  ng-class="{\'loadMore__btn--loading\': loadState !== \'loadFin\', \'loadMore__btn--loading--fail\': loadState === \'loadFail\'}" type="button">\n        <load-more-icon></load-more-icon>\n    </button>\n</div>'),e.put("mask/user/twitter.html",'<div ng-if="loadState !== \'initLoad\'" class="timeline mask animate--enter">\n\n    <div class="timeline--twitter profile--twitter">\n        <!-- Profile -->\n        <a class="timeline__profile profile__avatar" ng-href="//twitter.com/{{mask.screen_name}}" target="_blank">\n            <img class="timeline__profile__avatar" ng-src="{{mask.avatar.replace(\'normal\', \'bigger\')}}" alt="avatar">\n        </a>\n        <div class="timeline__profile timeline__profile__fullname">\n            <a ng-href="//twitter.com/{{mask.screen_name}}" target="_blank">\n                <strong ng-bind="mask.name"></strong>\n            </a>\n        </div>\n        <div ng-if="mask.timeline">\n            <button class="profile__following tips--deep" ng-class="::{\'icon--twitter tips--active\': mask.following}" type="button" toggle-following="twitter:{{mask.uid}}">\n                <svg viewBox="0 0 60 60">\n                    <use xlink:href="/public/img/icon-sprites.svg#following"></use>\n                </svg>\n            </button>\n        </div>\n        <!-- https://groups.google.com/d/msg/angular/5clM0kjHXq8/Hh0DngpjtPwJ -->\n        <div ng-if="true" ng-include=" \'mask/user/component/profile.html\' " onload="_p_type = \'tweet\'; _p_provider = \'twitter\' "></div>\n\n        <!-- Timeline -->\n        <div ng-if="mask.timeline.length > 0">\n            <div ng-repeat="item in mask.timeline | orderBy: \'-created_at\'" ng-include=" \'mask/component/user_timeline/twitter.html\' "></div>\n        </div>\n    </div>\n\n</div>\n\n<div class="loadMore loadMore--old" ng-class="{\'loadMore--initLoad\': loadState === \'initLoad\'}">\n    <button ng-if="loadState === \'initLoad\' || (mask.timeline.length >= 7 && !mask.protected)" ng-click="loadMaskTimeline()" class="loadMore__btn loadMore__btn--old loadMore__btn--twitter animate--faster"  ng-class="{\'loadMore__btn--loading\': loadState !== \'loadFin\', \'loadMore__btn--loading--fail\': loadState === \'loadFail\'}" type="button">\n        <load-more-icon></load-more-icon>\n    </button>\n</div>'),e.put("mask/user/weibo.html",'<div ng-if="loadState !== \'initLoad\'" class="timeline mask animate--enter">\n\n    <div class="timeline--weibo profile--weibo">\n        <!-- Profile -->\n        <a class="timeline__profile profile__avatar" ng-href="//weibo.com/n/{{mask.screen_name}}" target="_blank">\n            <img class="timeline__profile__avatar" ng-src="{{mask.avatar.replace(\'/50/\', \'/180/\')}}" alt="avatar">\n        </a>\n        <div class="timeline__profile timeline__profile__fullname">\n            <a ng-href="//weibo.com/n/{{mask.screen_name}}" target="_blank">\n                <strong ng-bind="mask.name"></strong>\n            </a>\n        </div>\n\n        <div ng-if="true" ng-include=" \'mask/user/component/profile.html\' " onload="_p_type = \'tweet\'; _p_provider = \'weibo\' "></div>\n\n        <!-- Timeline -->\n        <div ng-if="mask.timeline.length > 0">\n            <div ng-repeat="item in mask.timeline | orderBy: \'-created_at\'" ng-include=" \'mask/component/user_timeline/weibo.html\' "></div>\n        </div>\n    </div>\n\n</div>\n\n<div class="loadMore loadMore--old" ng-class="{\'loadMore--initLoad\': loadState === \'initLoad\'}">\n    <button ng-if="loadState === \'initLoad\' || (mask.timeline.length >= 5 && !mask.protected)" ng-click="loadMaskTimeline()" class="loadMore__btn loadMore__btn--old loadMore__btn--weibo animate--faster"  ng-class="{\'loadMore__btn--loading\': loadState !== \'loadFin\', \'loadMore__btn--loading--fail\': loadState === \'loadFail\'}" type="button">\n        <load-more-icon></load-more-icon>\n    </button>\n</div>'),e.put("twitter/component/content--quote.html",'<div class="timeline__content">\n    <p class="timeline__text" trim-media-link="{{::item.quote.mediaLink}}" ol-linkify="twitter" ng-bind-html="::item.quote.text"></p>\n    <div ng-if="::item.quote.media && item.quote.media.length > 0" ng-include=" \'media/twitter--quote.html\' "></div>\n</div>'),e.put("twitter/component/content.html",'<div class="timeline__content">\n    <p class="timeline__text" trim-suffix-link="{{::item.type === \'quote\'}}" trim-media-link="{{::item.mediaLink}}" ol-linkify="twitter" ng-bind-html="::item.text"></p>\n\n    <div ng-if="::item.media && item.media.length > 0" ng-include=" \'media/twitter.html\' "></div>\n</div>'),e.put("twitter/component/profile--quote.html",'<div class="timeline__profile">\n    <a ng-href="/twitter/user/{{::item.quote.user.screen_name}}">\n        <img class="timeline__profile__avatar" ng-src="{{::item.quote.user.avatar.replace(\'normal\', \'bigger\')}}">\n    </a>\n    <div class="timeline__profile__fullname">\n        <a ng-href="//twitter.com/{{::item.quote.user.screen_name}}" target="_blank">\n            <strong ng-bind="::item.quote.user.name"></strong>\n        </a>\n    </div>\n</div>'),e.put("twitter/component/profile--retweet.html",'<div class="timeline__profile">\n    <a ng-href="/twitter/user/{{::item.retweet.user.screen_name}}">\n        <img class="timeline__profile__avatar" ng-src="{{::item.retweet.user.avatar.replace(\'normal\', \'bigger\')}}">\n    </a>\n    <div class="timeline__profile__fullname">\n        <a ng-href="//twitter.com/{{::item.retweet.user.screen_name}}" target="_blank">\n            <strong ng-bind="::item.retweet.user.name"></strong>\n        </a>\n    </div>\n</div>'),e.put("twitter/component/profile.html",'<div class="timeline__profile">\n    <a ng-href="/twitter/user/{{::item.user.screen_name}}">\n        <img class="timeline__profile__avatar" ng-src="{{::item.user.avatar.replace(\'normal\', \'bigger\')}}">\n    </a>\n    <div class="timeline__profile__fullname">\n        <a ng-href="//twitter.com/{{::item.user.screen_name}}" target="_blank">\n            <strong ng-bind="::item.user.name"></strong>\n        </a>\n    </div>\n</div>'),e.put("weibo/component/content--retweet.html",'<div class="timeline__content">\n    <p class="timeline__text" linkify="weibo" weibo-emotify trim-suffix-link="{{::!!item.location}}">{{::item.retweet.text | html}}</p>\n\n    <div ng-if="::item.media && item.media.length > 0" ng-include=" \'media/weibo.html\' "></div>\n</div>'),e.put("weibo/component/content.html",'<div class="timeline__content">\n    <p class="timeline__text" linkify="weibo" weibo-emotify trim-suffix-link="{{::!!item.location}}">{{::item.text | html}}</p>\n\n    <div ng-if="::item.media && item.type === \'tweet\' && item.media.length > 0" ng-include=" \'media/weibo.html\' "></div>   \n</div>'),e.put("weibo/component/profile--retweet.html",'<div class="timeline__profile">\n    <a ng-href="//weibo.com/n/{{::item.retweet.user.screen_name}}" target="_blank">\n        <img class="timeline__profile__avatar" ng-src="{{::item.retweet.user.avatar.replace(\'/50/\', \'/180/\')}}">\n    </a>\n    <div class="timeline__profile__fullname">\n        <a ng-href="//weibo.com/n/{{::item.retweet.user.screen_name}}" target="_blank">\n            <strong ng-bind="::item.retweet.user.name"></strong>\n        </a>\n    </div>\n</div>'),e.put("weibo/component/profile.html",'<div class="timeline__profile">\n    <a ng-href="//weibo.com/n/{{::item.user.screen_name}}" target="_blank">\n        <img class="timeline__profile__avatar" ng-src="{{::item.user.avatar.replace(\'/50/\', \'/180/\')}}">\n    </a>\n    <div class="timeline__profile__fullname">\n        <a ng-href="//weibo.com/n/{{::item.user.screen_name}}" target="_blank">\n            <strong ng-bind="::item.user.name"></strong>\n        </a>\n    </div>\n</div>'),e.put("controlCenter/write/component/geoPicker.html",'<button class="write__btn write__btn--left tips--deep--peace" type="button">\n    <svg viewBox="0 0 200 200">\n        <use xlink:href="/public/img/icon-sprites.svg#geoPicker"></use>\n    </svg>\n</button>'),e.put("controlCenter/write/component/mediaUpload.html",'<label for="uploadMedia" class="write__btn write__btn--media tips--deep--peace" role="button">\n    <svg viewBox="0 0 200 200">\n        <use xlink:href="/public/img/icon-sprites.svg#camera"></use>\n    </svg>\n</label>\n<input style="display: none" id="uploadMedia" type="file" name="twitterMedia" accept="image/gif,image/jpeg,image/jpg,image/png">'),e.put("controlCenter/write/component/toggleSensitive.html",'<button class="write__btn write__btn--left tips--deep--peace" type="button">\n    <svg viewBox="0 0 200 200">\n        <use xlink:href="/public/img/icon-sprites.svg#sensitive"></use>\n    </svg>\n</button>'),e.put("controlCenter/write/component/weiboEmotions.html",'<button class="write__btn write__btn--left tips--deep--peace" type="button">\n    <svg viewBox="0 0 200 200">\n        <use xlink:href="/public/img/icon-sprites.svg#emotions"></use>\n    </svg>\n</button>'),e.put("mask/component/actions/instagram.html",'<span class="cursor--pointer">\n    <!-- Favorite -->\n    <button class="actions tips--frozen" type="button">\n        <svg class="actions__button" viewBox="0 0 26 26">\n            <use xlink:href="/public/img/icon-sprites.svg#favorite"></use>\n        </svg>\n        <span class="actions__count" ng-attr-data-count="{{::item.favorite_count > 0 ? item.favorite_count : \'\'}}"></span>\n    </button>\n    <!-- Reply -->\n    <button class="actions tips--frozen" type="button">\n        <svg class="actions__button" viewBox="0 0 26 26">\n            <use xlink:href="/public/img/icon-sprites.svg#reply">\n        </svg>\n        <span class="actions__count" ng-attr-data-count="{{::item.reply_count > 0 ? item.reply_count : \'\'}}"></span>\n    </button>\n    <!-- Source -->\n    <a ng-href="{{::item.link}}" target="_blank" role="button">\n        <span class="actions btn tips--deep">\n            <svg class="actions__button" viewBox="0 0 26 26">\n                <use xlink:href="/public/img/icon-sprites.svg#source"></use>\n            </svg>\n            <span class="actions__count"></span>\n        </span>\n    </a>\n    <!-- Location -->\n    <a ng-if="::item.location" ng-href="//instagram.com/explore/locations/{{::item.location.id}}" target="_blank" role="button">\n        <span class="timeline__location btn tips--deep">\n            <svg viewBox="0 0 26 26">\n                <use xlink:href="/public/img/icon-sprites.svg#location"></use>\n            </svg>\n            <span class="timeline__location__name" ng-bind="::item.location.name"></span>\n        </span>\n    </a>\n</span>'),e.put("mask/component/actions/twitter.html",'<span class="cursor--pointer">\n    <!-- Favorite -->\n    <button class="actions tips--frozen" type="button">\n        <svg class="actions__button" viewBox="0 0 26 26">\n            <use xlink:href="/public/img/icon-sprites.svg#favorite"></use>\n        </svg>\n        <span class="actions__count" ng-attr-data-count="{{::item.favorite_count > 0 ? item.favorite_count : \'\'}}"></span>\n    </button>\n    <!-- Retweet -->\n    <button class="actions tips--frozen" type="button">\n        <svg class="actions__button" viewBox="0 0 34 26" data-retweet>\n            <use xlink:href="/public/img/icon-sprites.svg#retweet"></use>\n        </svg>\n        <span class="actions__count" ng-attr-data-count="{{::item.retweet_count > 0 ? item.retweet_count : \'\'}}"></span>\n    </button>\n    <!-- Reply -->\n    <button class="actions tips--frozen" type="button">\n        <svg class="actions__button" viewBox="0 0 26 26">\n            <use xlink:href="/public/img/icon-sprites.svg#reply">\n        </svg>\n        <span class="actions__count" ng-attr-data-count="{{::item.reply_count > 0 ? item.reply_count : \'\'}}"></span>\n    </button>\n    <!-- Source -->\n    <a ng-href="//twitter.com/{{::item.user.screen_name}}/status/{{::item.id_str}}" target="_blank" role="button">\n        <span class="actions btn tips--deep">\n            <svg class="actions__button" viewBox="0 0 26 26">\n                <use xlink:href="/public/img/icon-sprites.svg#source"></use>\n            </svg>\n            <span class="actions__count"></span>\n        </span>\n    </a>\n    <!-- Location -->\n    <a ng-if="::item.location" ng-href="//twitter.com/search?q=place%3A{{::item.location.id}}" target="_blank" role="button">\n        <span class="timeline__location btn tips--deep">\n            <svg viewBox="0 0 26 26">\n                <use xlink:href="/public/img/icon-sprites.svg#location"></use>\n            </svg>\n            <span class="timeline__location__name" ng-bind="::item.location.name"></span>\n        </span>\n    </a>\n</span>'),e.put("mask/component/actions/weibo.html",'<span class="cursor--pointer">\n    <!-- Retweet -->\n    <button class="actions tips--frozen" type="button">\n        <svg class="actions__button" viewBox="0 0 34 26" data-retweet>\n            <use xlink:href="/public/img/icon-sprites.svg#retweet"></use>\n        </svg>\n        <span class="actions__count" ng-attr-data-count="{{::item.retweet_count > 0 ? item.retweet_count : \'\'}}"></span>\n    </button>\n    <!-- Reply -->\n    <button class="actions tips--frozen" type="button">\n        <svg class="actions__button" viewBox="0 0 26 26">\n            <use xlink:href="/public/img/icon-sprites.svg#reply">\n        </svg>\n        <span class="actions__count" ng-attr-data-count="{{::item.comments_count > 0 ? item.comments_count : \'\'}}"></span>\n    </button>\n    <!-- Source -->\n    <a ng-href="//weibo.com/{{::item.user.uid}}/{{::item.mid}}" target="_blank" role="button">\n        <span class="actions btn tips--deep">\n            <svg class="actions__button" viewBox="0 0 26 26">\n                <use xlink:href="/public/img/icon-sprites.svg#source"></use>\n            </svg>\n            <span class="actions__count"></span>\n        </span>\n    </a>\n    <!-- Location -->\n    <a ng-if="::item.location" ng-href="//maps.google.com/maps?z=12&t=h&q=loc:{{::item.location.lat}}+{{::item.location.long}}" target="_blank" role="button">\n        <span class="timeline__location btn tips--deep">\n            <svg viewBox="0 0 60 60">\n               <use xlink:href="/public/img/icon-sprites.svg#location"></use>\n            </svg>\n        </span>\n    </a>\n</span>'),e.put("mask/component/content/twitter.html",'<!-- timeline & user_timeline common component -->\n<div class="timeline__content">\n    <p class="timeline__text" trim-suffix-link="{{::item.type === \'quote\'}}" trim-media-link="{{::item.mediaLink}}" linkify="twitter" ng-bind-html="::item.text"></p>\n    <div ng-if="::item.media && item.media.length > 0" ng-include=" \'media/twitter.html\' "></div>\n</div>\n\n<a ng-if="::item.type === \'retweet\'" class="timeline--retweet__profile__avatar" ng-href="//twitter.com/{{::item.user.screen_name}}" target="_blank">\n    <img class="timeline__profile__avatar" ng-src="{{::item.user.avatar}}" alt="avatar">\n</a>\n\n<!-- Quote -->\n<div ng-if="::item.type === \'quote\'" class="timeline timeline--quote timeline--quote--twitter">\n\n    <div class="timeline__profile">\n        <a ng-href="//twitter.com/{{::item.quote.user.screen_name}}" target="_blank">\n            <img class="timeline__profile__avatar" ng-src="{{::item.quote.user.avatar.replace(\'normal\', \'bigger\')}}">\n        </a>\n        <div class="timeline__profile__fullname">\n            <a ng-href="//twitter.com/{{::item.quote.user.screen_name}}" target="_blank">\n                <strong ng-bind="::item.quote.user.name"></strong>\n            </a>\n        </div>\n    </div>\n\n    <div class="timeline__content">\n        <p class="timeline__text" trim-media-link="{{::item.quote.mediaLink}}" linkify="twitter" ng-bind-html="::item.quote.text"></p>\n        <div ng-if="::item.quote.media && item.quote.media.length > 0" ng-include=" \'media/twitter--quote.html\' "></div>\n    </div>\n\n    <div ng-include=" \'actions/twitter--quote.html\' "></div>\n\n    <span class="timeline__time" relative-date="{{::item.quote.created_at}}"></span>\n\n</div>\n'),e.put("mask/component/content/weibo.html",'<div ng-if="::item.type !== \'retweet\'" class="timeline__content">\n    <p class="timeline__text" linkify="weibo" weibo-emotify trim-suffix-link="{{::!!item.location}}">{{::item.text | html}}</p>\n    <div ng-if="::item.media && item.type === \'tweet\' && item.media.length > 0" ng-include=" \'media/weibo.html\' "></div>\n</div>\n\n<div ng-if="::item.type === \'retweet\'" class="timeline__content">\n    <p class="timeline__text" linkify="weibo" weibo-emotify>{{::item.retweet.text | html}}</p>\n\n    <div ng-if="::item.media && item.media.length > 0" ng-include=" \'media/weibo.html\' "></div>\n</div>\n\n<a ng-if="::item.type === \'retweet\'" class="timeline--retweet__profile__avatar" ng-href="//weibo.com/n/{{::item.user.screen_name}}" target="_blank">\n    <img class="timeline__profile__avatar" ng-src="{{::item.user.avatar}}" alt="avatar">\n</a>\n\n<!-- Quote -->\n<div ng-if="::item.type === \'quote\'" class="timeline timeline--quote timeline--quote--weibo">\n\n    <div class="timeline__profile">\n        <a ng-href="//weibo.com/n/{{::item.retweet.user.screen_name}}" target="_blank">\n            <img class="timeline__profile__avatar" ng-src="{{::item.retweet.user.avatar.replace(\'/50/\', \'/180/\')}}">\n        </a>\n        <div class="timeline__profile__fullname">\n            <a ng-href="//weibo.com/n/{{::item.retweet.user.screen_name}}" target="_blank">\n                <strong ng-bind="::item.retweet.user.name"></strong>\n            </a>\n        </div>\n    </div>\n\n    <div class="timeline__content">\n        <p class="timeline__text" linkify="weibo" weibo-emotify>{{::item.retweet.text | html}}</p>\n\n        <div ng-if="::item.media && item.media.length > 0" ng-include=" \'media/weibo.html\' "></div>\n    </div>\n\n    <div ng-include=" \'actions/weibo--quote.html\' "></div>\n\n    <span class="timeline__time" relative-date="{{::item.retweet.created_at}}"></span>\n\n</div>\n'),e.put("mask/component/timeline/instagram.html",'<div class="timeline timeline--instagram mask__timeline" data-id="{{::item.id_str}}">\n\n    <div class="timeline__profile">\n        <a ng-href="//instagram.com/{{::item.user.screen_name}}" target="_blank">\n            <img class="timeline__profile__avatar timeline__profile__avatar--instagram" ng-src="{{::item.user.avatar}}">\n        </a>\n        <div class="timeline__profile__fullname">\n            <a ng-href="//instagram.com/{{::item.user.screen_name}}" target="_blank">\n                <strong ng-bind="::item.user.name || item.user.screen_name"></strong>\n            </a>\n        </div>\n    </div>\n\n    <div class="timeline__content">\n        <div ng-include=" \'media/instagram.html\' "></div>\n        <p class="timeline__text" linkify="instagram">{{::item.text | html}}</p>\n    </div>\n\n    <!-- Actions -->\n    <span class="cursor--pointer">\n        <!-- Source -->\n        <a ng-href="{{::item.link}}" target="_blank" role="button">\n            <span class="actions btn tips--deep">\n                <svg class="actions__button" viewBox="0 0 26 26">\n                    <use xlink:href="/public/img/icon-sprites.svg#source"></use>\n                </svg>\n                <span class="actions__count"></span>\n            </span>\n        </a>\n        <!-- Location -->\n        <a ng-if="::item.location" ng-href="//instagram.com/explore/locations/{{::item.location.id}}" target="_blank" role="button">\n            <span class="timeline__location btn tips--deep">\n                <svg viewBox="0 0 26 26">\n                    <use xlink:href="/public/img/icon-sprites.svg#location"></use>\n                </svg>\n                <span class="timeline__location__name" ng-bind="::item.location.name"></span>\n            </span>\n        </a>\n    </span>\n\n    <span class="timeline__time tips" relative-date="{{::item.created_at}}"></span>    \n</div>\n'),
e.put("mask/component/timeline/twitter.html",'<div class="timeline timeline--twitter mask__timeline" data-id="{{::item.r_id_str || item.id_str}}">\n\n    <div class="timeline__profile" ng-init="_author = item.type === \'retweet\' ? item.retweet.user : item.user">\n        <a ng-href="//twitter.com/{{::_author.screen_name}}" target="_blank">\n            <img class="timeline__profile__avatar" ng-src="{{::_author.avatar.replace(\'normal\', \'bigger\')}}">\n        </a>\n        <div class="timeline__profile__fullname">\n            <a ng-href="//twitter.com/{{::_author.screen_name}}" target="_blank">\n                <strong ng-bind="::_author.name"></strong>\n            </a>\n        </div>\n    </div>\n\n    <!-- Content -->\n    <div ng-include=" \'mask/component/content/twitter.html\' "></div>\n\n    <!-- Actions -->\n    <span class="cursor--pointer">\n        <!-- Source -->\n        <a ng-href="//twitter.com/{{::_author.screen_name}}/status/{{::item.id_str}}" target="_blank" role="button">\n            <span class="actions btn tips--deep">\n                <svg class="actions__button" viewBox="0 0 26 26">\n                    <use xlink:href="/public/img/icon-sprites.svg#source"></use>\n                </svg>\n                <span class="actions__count"></span>\n            </span>\n        </a>\n        <!-- Location -->\n        <a ng-if="::item.location" ng-href="//twitter.com/search?q=place%3A{{::item.location.id}}" target="_blank" role="button">\n            <span class="timeline__location btn tips--deep">\n                <svg viewBox="0 0 60 60">\n                   <use xlink:href="/public/img/icon-sprites.svg#location"></use>\n                </svg>\n                <span class="timeline__location__name" ng-bind="::item.location.name"></span>\n            </span>\n        </a>\n    </span>\n\n    <span class="timeline__time tips" relative-date="{{::item.created_at}}"></span>\n    \n</div>\n'),e.put("mask/component/timeline/weibo.html",'<div class="timeline timeline--weibo mask__timeline" data-id="{{::item.r_id_str || item.id_str}}" data-created="{{::item.created_at}}">\n\n    <div class="timeline__profile" ng-init="_author = item.type === \'retweet\' ? item.retweet.user : item.user">\n        <a ng-href="//weibo.com/n/{{::_author.screen_name}}" target="_blank">\n            <img class="timeline__profile__avatar" ng-src="{{::_author.avatar.replace(\'/50/\', \'/180/\')}}">\n        </a>\n        <div class="timeline__profile__fullname">\n            <a ng-href="//weibo.com/n/{{::_author.screen_name}}" target="_blank">\n                <strong ng-bind="::_author.name"></strong>\n            </a>\n        </div>\n    </div>\n\n    <!-- Content -->\n    <div ng-include=" \'mask/component/content/weibo.html\' "></div>\n\n    <!-- Actions -->\n    <span class="cursor--pointer">\n        <!-- Source -->\n        <a ng-href="//weibo.com/{{::_author.uid}}/{{::item.mid}}" target="_blank" role="button">\n            <span class="actions btn tips--deep">\n                <svg class="actions__button" viewBox="0 0 26 26">\n                    <use xlink:href="/public/img/icon-sprites.svg#source"></use>\n                </svg>\n                <span class="actions__count"></span>\n            </span>\n        </a>\n        <!-- Location -->\n        <a ng-if="::item.location" ng-href="//maps.google.com/maps?z=12&t=h&q=loc:{{::item.location.lat}}+{{::item.location.long}}" target="_blank" role="button">\n            <span class="timeline__location btn tips--deep">\n                <svg viewBox="0 0 60 60">\n                   <use xlink:href="/public/img/icon-sprites.svg#location"></use>\n                </svg>\n            </span>\n        </a>\n    </span>\n\n    <span class="timeline__time tips" relative-date="{{::item.created_at}}"></span>\n\n</div>'),e.put("mask/notification/direct/twitter.html",'<div class="loadMore loadMore--new" ng-class="{\'loadMore--initLoad\': loadState === \'initLoad\'}">\n    <button ng-click="loadDirect(\'new\')" class="loadMore__btn loadMore__btn--twitter loadMore__btn--new animate--faster" ng-class="{\'loadMore__btn--loading\': loadState !== \'loadFin\', \'loadMore__btn--loading--fail\': loadState === \'loadFail\'}" type="button">\n        <load-more-icon></load-more-icon>\n    </button>\n</div>\n\n<div ng-if="notifications.length > 0" class="timeline profile mask__notification overflow--y animate--faster animate--enter">\n    <div class="timeline--twitter profile--twitter">\n\n        <div class="mask__source">\n            <a href="https://twitter.com/messages" target="_blank">\n                <svg viewBox="0 0 28 23">\n                   <use xlink:href="/public/img/icon-sprites.svg#direct_msg"></use>\n                </svg>\n            </a>\n        </div>\n\n        <!-- Timeline -->\n        <div class="timeline mask__msg" ng-repeat="item in notifications track by item.id_str" ng-class="::item.sender.uid === _authUid ? \'mask__msg--me\' : \'mask__msg--others\'">\n\n            <div class="mask__msg__content">\n                <p class="mask__msg__text" linkify="twitter" ng-bind-html="::item.text"></p>\n                <div ng-if="::item.media" ng-include=" \'media/twitter.html\' "></div>\n            </div>\n\n            <span class="mask__msg__time tips" relative-date="{{::item.created_at}}">\n            </span>\n        </div>\n\n    </div>\n</div>\n\n<div ng-if="senderList.length > 0" class="mask__sender overflow--x animate--faster" disable-back>\n    <button ng-repeat="item in senderList" ng-click="showDirect(item.uid)" class="tips--deep--peace animate--faster" js-direct-sender="{{::item.uid}}">\n        <img ng-src="{{::item.avatar}}" alt="">\n    </button>\n</div>'),e.put("mask/notification/mentions/twitter.html",'<div class="loadMore loadMore--new" ng-class="{\'loadMore--initLoad\': loadState === \'initLoad\'}">\n    <button ng-click="loadMentions(\'new\')" class="loadMore__btn loadMore__btn--twitter loadMore__btn--new animate--faster" ng-class="{\'loadMore__btn--loading\': loadState !== \'loadFin\', \'loadMore__btn--loading--fail\': loadState === \'loadFail\'}" type="button">\n        <load-more-icon></load-more-icon>\n    </button>\n</div>\n\n<div ng-if="notifications.length > 0" class="timeline profile mask__notification overflow--y animate--enter">\n    <div class="timeline--twitter profile--twitter">\n\n        <div class="mask__source">\n            <a href="https://twitter.com/mentions" target="_blank">\n                <svg viewBox="0 0 26 26">\n                   <use xlink:href="/public/img/icon-sprites.svg#mentions"></use>\n                </svg>\n            </a>\n        </div>\n\n        <!-- Timeline -->\n        <div ng-repeat="item in notifications | orderBy: \'-created_at\'" ng-include=" \'mask/component/timeline/twitter.html\' ">\n        </div>\n\n    </div>\n</div>'),e.put("mask/user/component/profile.html",'<!-- 貼文數、粉絲數、追隨數 -->\n<div ng-if="mask.counts" class="profile__count">\n    <div class="profile__count__column" ng-class="::\'icon--\' + _p_provider" ng-attr-data-count="{{::mask.counts.statuses}}">\n        <svg viewBox="0 0 60 60">\n            <use xlink:href ng-attr-xlink:href="{{::\'/public/img/icon-sprites.svg#\' + _p_type}}"></use>\n        </svg>\n    </div>\n    <div class="profile__count__column" ng-class="::\'icon--\' + _p_provider" ng-attr-data-count="{{::mask.counts.followed_by}}">\n        <svg viewBox="0 0 60 60">\n            <use xlink:href="/public/img/icon-sprites.svg#followed_by"></use>\n        </svg>\n    </div>\n    <div class="profile__count__column" ng-class="::\'icon--\' + _p_provider" ng-attr-data-count="{{::mask.counts.follows}}">\n        <svg viewBox="0 0 60 60">\n            <use xlink:href="/public/img/icon-sprites.svg#follows"></use>\n        </svg>\n    </div>\n</div>\n<!-- 簡介 -->\n<div ng-if="mask.bio">\n    <p class="timeline__text profile__biography" linkify="{{::_p_provider}}">{{::mask.bio | html}}</p>\n</div>\n<div ng-if="mask.website" class="profile__website">\n    <a ng-href="{{::mask.website}}" target="_blank">\n        <svg viewBox="0 0 100 100" class="tips animate--faster">\n            <use xlink:href="/public/img/icon-sprites.svg#link"></use>\n        </svg>\n    </a>\n</div>\n<!-- 是否為私人帳號 -->\n<div ng-if="mask.protected && !mask.timeline.length" class="profile__locked">\n    <svg viewBox="0 0 40 40">\n        <use xlink:href="/public/img/icon-sprites.svg#locked"></use>\n    </svg>\n</div>\n'),e.put("mask/component/user_timeline/instagram.html",'<div class="timeline timeline--instagram mask__user_timeline" ng-class="::{\'mask__user_timeline--location\': item.location}" data-id="{{::item.id_str}}">\n    <div class="timeline__content">\n        <div ng-include=" \'media/instagram.html\' "></div>\n        <p class="timeline__text" linkify="instagram">{{::item.text | html}}</p>\n    </div>\n\n    <!-- Actions -->\n    <div ng-include=" \'mask/component/actions/instagram.html\' "></div>\n\n    <span class="timeline__time tips" relative-date="{{::item.created_at}}"></span>    \n</div>\n'),e.put("mask/component/user_timeline/twitter.html",'<div class="timeline timeline--twitter" ng-class="::{\'mask__user_timeline\': item.type !== \'retweet\', \'mask__user_timeline--gutter\': item.type === \'retweet\', \'mask__user_timeline--location\': item.location}" data-id="{{::item.r_id_str || item.id_str}}">\n\n    <div ng-if="::item.type === \'retweet\'" class="timeline__profile">\n        <a ng-href="//twitter.com/{{::item.retweet.user.screen_name}}" target="_blank">\n            <img class="timeline__profile__avatar" ng-src="{{::item.retweet.user.avatar.replace(\'normal\', \'bigger\')}}">\n        </a>\n        <div class="timeline__profile__fullname">\n            <a ng-href="//twitter.com/{{::item.retweet.user.screen_name}}" target="_blank">\n                <strong ng-bind="::item.retweet.user.name"></strong>\n            </a>\n        </div>\n    </div>\n\n    <!-- Content -->\n    <div ng-include=" \'mask/component/content/twitter.html\' "></div>\n\n    <!-- Actions -->\n    <div ng-include=" \'mask/component/actions/twitter.html\' "></div>\n\n    <span class="timeline__time tips" relative-date="{{::item.created_at}}"></span>\n\n</div>'),e.put("mask/component/user_timeline/weibo.html",'<div class="timeline timeline--weibo" ng-class="::{\'mask__user_timeline\': item.type !== \'retweet\', \'mask__user_timeline--gutter\': item.type === \'retweet\', \'mask__user_timeline--location\': item.location}" data-id="{{::item.r_id_str || item.id_str}}">\n\n    <div ng-if="::item.type === \'retweet\'" class="timeline__profile">\n        <a ng-href="//weibo.com/n/{{::item.retweet.user.screen_name}}" target="_blank">\n            <img class="timeline__profile__avatar" ng-src="{{::item.retweet.user.avatar.replace(\'/50/\', \'/180/\')}}">\n        </a>\n        <div class="timeline__profile__fullname">\n            <a ng-href="//weibo.com/n/{{::item.retweet.user.screen_name}}" target="_blank">\n                <strong ng-bind="::item.retweet.user.name"></strong>\n            </a>\n        </div>\n    </div>\n\n    <!-- Content -->\n    <div ng-include=" \'mask/component/content/weibo.html\' "></div>\n\n    <!-- Actions -->\n    <div ng-include=" \'mask/component/actions/weibo.html\' "></div>\n\n    <span class="timeline__time tips" relative-date="{{::item.created_at}}"></span>\n\n</div>')}]);
//# sourceMappingURL=oneline.min.js.map
