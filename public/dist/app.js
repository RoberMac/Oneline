webpackJsonp([1],{0:function(e,t,n){e.exports=n(223)},72:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){var t=";base64,";if(-1==e.indexOf(t)){var n=e.split(","),r=n[0].split(":")[1],a=decodeURIComponent(n[1]);return new Blob([a],{type:r})}for(var n=e.split(t),r=n[0].split(":")[1],a=window.atob(n[1]),i=a.length,o=new Uint8Array(i),l=0;i>l;++l)o[l]=a.charCodeAt(l);return new Blob([o],{type:r})}function o(e){var t=e.media;return e.provider,t.map(function(e){var t=e.url,n=e.ratio;return{type:"photo",image_url:t,ratio:n}})}Object.defineProperty(t,"__esModule",{value:!0}),t.initLivePreview=t.addImagePreview=t.uploadMedia=t.initStatus=t.draft=t.submitWrite=t.insertText=t.removeText=t.getCountInfo=t.isLeftPopup=t.extractMentions=void 0;var l=n(20),s=r(l),u=n(34),c=r(u),d=n(14),f=r(d),p=n(31),h=n(43),m=r(h),v=n(8),b=(t.extractMentions=function(e){var t=e.status,n=e.provider,r={twitter:/(|\s)*@([\u4e00-\u9fa5\w-]*)$/,weibo:/(|\s)*@([\u4e00-\u9fa5\w-]*)$/},a=t.match(r[n]);return a?(a=a[2].trim().toLowerCase(),f["default"].get("mentions_"+n).filter("twitter"===n?function(e){return Object.keys(e).some(function(t){return e[t].toLowerCase().indexOf(a)>=0})}:function(e){return e.toLowerCase().indexOf(a)>=0}).slice(0,100)):[]},t.isLeftPopup=function(){var e=document.querySelector("textarea"),t=document.querySelector(".write__textarea span"),n=e.selectionStart,r=e.offsetWidth-10;t.innerHTML=e.value.substr(0,n).replace(/\n$/,"\n");var a=t.getClientRects(),i=a[a.length-1],o=i.width;return o>r/2},t.getCountInfo=function(e){var t=e.action,n=e.provider,r=e.status,a="quote"===t&&"twitter"===n?116:140,i=void 0,o=void 0;if("weibo"===n){var l=(r.match(/[\x00-\x7F]+/g)||[]).join("").length,s=r.length-l;i=s+Math.round(l/2)}else i=r.length;return o=i>a?!0:!1,{count:i,isOverLimitCount:o}},t.removeText=function(e){var t=document.querySelector("textarea"),n=t.selectionStart,r=t.value.slice(0,n),a=t.value.slice(n);t.value=r.replace(e,"")+a,n-=1,t.setSelectionRange(n,n),1===t.value.length&&(t.value="")},t.insertText=function(e){var t=document.querySelector("textarea"),n=t.selectionStart,r=t.selectionEnd,a=n+e.length;n||"0"==n?t.value=t.value.substring(0,n)+e+t.value.substring(r,t.value.length):t.value+=e,t.setSelectionRange(a,a)},t.submitWrite=function(e){var t=e.action,n=e.provider,r=e.id,a=e.status,i=(e.mentions,e.geo),o=e.media,l=e.sensitive,u=e.location.state,c="twitter"===n,d="weibo"===n,f={status:a};if(c){var h=o.length>0?o.map(function(e){var t=e.id;return t}):void 0;(0,s["default"])(f,{geo:i,sensitive:l,media_ids:h}),"quote"===t&&(f.status=a+" https://twitter.com/"+u.user.screen_name+"/status/"+r)}else d&&"tweet"===t&&(0,s["default"])(f,{geo:i});return new Promise(function(e,a){v.Action.update({action:t,provider:n,id:r},{params:f}).then(function(n){("retweet"===t||"quote"===t)&&m["default"].dispatch((0,p.updatePost)({id_str:r,retweeted:!0,retweet_count:u.retweet_count+1,retweeted_id_str:n.id_str})),e()})["catch"](function(e){return a(e)})})},t.draft={get:function(e){var t=e.action,n=e.provider;return c["default"].get(t+"_"+n)},set:function(e){var t=e.action,n=e.provider,r=e.status;"tweet"===t&&c["default"].set(t+"_"+n,r)},remove:function(e){var t=e.action,n=e.provider;return c["default"].remove(t+"_"+n)}});t.initStatus=function(e){var t=e.action,n=e.provider,r=(e.id,e.location),a=r.state,i=document.querySelector("textarea");switch(t){case"tweet":i.value=b.get({action:t,provider:n})||"";break;case"reply":"twitter"===n&&(i.value=["@"+a.user.screen_name].concat(a.text.match(/(|\s)*@([\w]+)/g)||[]).map(function(e){return e.trim()}).filter(function(e,t,n){return n.indexOf(e)==t}).join(" ")+" ");break;case"retweet":"weibo"===n&&(a.retweet||a.quote)&&(i.value="//@"+a.user.screen_name+": "+a.text,i.setSelectionRange(0,0))}},t.uploadMedia=function(e){var t=e.provider,n=e.file;return new Promise(function(e,r){var a=new FormData;a.append("twitterMedia",n),v.Media.upload({provider:t},a).then(function(t){var n=t.media_id;e(n)})["catch"](function(e){r(e)})})},t.addImagePreview=function(e){var t=e.file;return new Promise(function(e,n){var r=new FileReader,a=new Image;r.onload=function(t){var n=URL.createObjectURL(i(t.target.result));a.src=n,a.onload=function(){var t=(a.height/a.width).toFixed(5);e({previewURL:n,ratio:t})}},r.readAsDataURL(t)})},t.initLivePreview=function(e){var t=e.type,n=e.provider,r=e.status,i=e.media,l=e.livePreviewPost,u=e.post;if("reply"===t)return{};var c={},d=l.created_at,p=l.user;switch((0,s["default"])(c,{provider:n,type:t,created_at:d||Date.now(),text:r,user:p||f["default"].get("profile_"+n),media:o({media:i,provider:n})}),t){case"retweet":case"quote":(0,s["default"])(c,a({},t,"weibo"===n&&u[t]||u))}return c}},73:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),i=r(a),o=n(4),l=r(o);t["default"]=function(e){var t=e.provider,n=e.link,r=e.iconName,a=e.title;return i["default"].createElement("div",{className:"banner color--"+t},n?i["default"].createElement("a",{href:n,target:"_blank"},i["default"].createElement("span",{className:"banner__title btn icon--"+t+" tips--deep"},i["default"].createElement(l["default"],{name:r}),i["default"].createElement("span",null,a))):i["default"].createElement("span",{className:"banner__title icon--"+t+" tips--deep--peace"},i["default"].createElement(l["default"],{name:r}),i["default"].createElement("span",null,a)))}},176:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),i=r(a),o=n(6),l=r(o),s=n(222),u=r(s);t["default"]=function(e){var t=e.location,n=e.main,r=e.leftSidebar,a=e.rightSidebar,o=!/^\/settings/.test(t.pathname),s=(0,l["default"])({"oneline oneline--enter animate--general":!0,"oneline--timeline":o}),c=(0,l["default"])({"sidebar sidebar--left vertically_center animate--faster":!0,"sidebar--timeline sidebar--timeline--left":o}),d=(0,l["default"])({"sidebar sidebar--right vertically_center animate--faster":!0,"sidebar--timeline sidebar--timeline--right":o});return i["default"].createElement("div",null,o&&i["default"].createElement(u["default"],{target:".spin--new",container:".oneline__wrapper",duration:700}),i["default"].createElement("div",{className:s},n),i["default"].createElement("div",{className:c},r),i["default"].createElement("div",{className:d},a))}},177:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),u=r(s),c=n(6),d=r(c),f=n(4),p=r(f),h=function(e){function t(e){a(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.state={active:!1},n.handleSubmit=n.handleSubmit.bind(n),n.handleClick=n.handleClick.bind(n),n}return o(t,e),l(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.refs.input;this.props.onSearchChange(t.value)}},{key:"handleClick",value:function(){var e=this.state.active,t=this.refs.input;e?(t.blur(),t.value=""):t.focus(),this.setState({active:!e}),this.props.onIconClick()}},{key:"render",value:function(){var e=(this.props.type,this.state.active),t=(0,d["default"])({"searchBar searchBar--local animate--faster":!0,"searchBar--active":e}),n=(0,d["default"])({searchBar__icon:!0,"icon--gray":e,"icon--white":!e}),r=e?"cancel":"search";return u["default"].createElement("div",{className:t},u["default"].createElement("form",{className:"searchBar__form",onSubmit:this.handleSubmit},u["default"].createElement("input",{className:"searchBar__input animate--faster",type:"text",autoComplete:"off",spellCheck:"false",required:!0,ref:"input"}),u["default"].createElement("button",{className:n,type:"button",onClick:this.handleClick},u["default"].createElement(p["default"],{name:r}))))}}]),t}(u["default"].Component),m=function(e){function t(e){a(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.state={search:!1},n.toggleSearch=n.toggleSearch.bind(n),n.handleSearchChange=n.handleSearchChange.bind(n),n}return o(t,e),l(t,[{key:"toggleSearch",value:function(){var e=this.props.onChange,t=this.state.search;e(t?{actionType:"reset"}:{actionType:"init"}),this.setState({search:!t})}},{key:"handleSearchChange",value:function(e){var t=this.props,n=t.onChange,r=t.allPosts,a=e?r.filter(function(t){var n=t.text+" "+(t.quote?t.quote.text:"")+" "+(t.retweet?t.retweet.text:"");return n.toLowerCase().indexOf(e)>=0}):[];n({actionType:"update",newShowingPosts:a})}},{key:"render",value:function(){return u["default"].createElement(h,{onIconClick:this.toggleSearch,onSearchChange:this.handleSearchChange})}}]),t}(u["default"].Component);t["default"]=m},178:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.HomeRightSidebar=t.HomeLeftSidebar=void 0;var a=n(1),i=r(a),o=n(13),l=n(28),s=n(6),u=r(s),c=n(4),d=(r(c),(0,u["default"])("sidebar__button","btn","animate--faster")),f=function(e){var t=e.firstProvider;return i["default"].createElement(o.Link,{to:"/home/"+t},i["default"].createElement("span",{className:d+" icon--"+t,type:"button"},i["default"].createElement("svg",{viewBox:"0 0 200 200"},i["default"].createElement("g",{"fill-rule":"evenodd"},i["default"].createElement("circle",{fill:"#F1F1F1",cx:"100",cy:"100",r:"100"}),i["default"].createElement("circle",{cx:"100",cy:"100",r:"15"}),i["default"].createElement("path",{fill:"instagram"!==t?null:"#FFF",d:"M96.63 30.143c1.862-3.393 4.88-3.392 6.74 0l10.26 18.714c1.862 3.393.232 6.143-3.634 6.143H90.004c-3.868 0-5.495-2.75-3.635-6.143l10.26-18.714z"}),i["default"].createElement("rect",{fill:"twitter"===t?null:"#FFF",x:"86",y:"145",width:"28",height:"28",rx:"7"})))))},p=function(e){var t=e.activeProviders;return i["default"].createElement(o.Link,{to:"/settings"},i["default"].createElement("span",{className:d},i["default"].createElement("svg",{viewBox:"0 0 200 200"},i["default"].createElement("g",{fill:"none"},i["default"].createElement("circle",{fill:"#F1F1F1",cx:"100",cy:"100",r:"100"}),i["default"].createElement("circle",{fill:t.indexOf("twitter")>=0?"#2AA9E0":"#FFF",cx:"100",cy:"42.5",r:"15"}),i["default"].createElement("circle",{fill:t.indexOf("instagram")>=0?"#3F5D87":"#FFF",cx:"100",cy:"100",r:"15"}),i["default"].createElement("circle",{fill:t.indexOf("weibo")>=0?"#E6162D":"#FFF",cx:"100",cy:"157.5",r:"15"})))))},h=function(e){var t=e.activeProviders,n=!/home$/.test(location.pathname);return n?i["default"].createElement("span",null):i["default"].createElement(p,{activeProviders:t})},m=function(e){var t=e.activeProviders,n=!/home$/.test(location.pathname),r=t.indexOf("twitter")>=0?"twitter":t.indexOf("weibo")>=0?"weibo":"instagram";return n?i["default"].createElement("span",null):i["default"].createElement(f,{firstProvider:r})};t.HomeLeftSidebar=(0,l.connect)(function(e){return{activeProviders:e.auth.activeProviders}})(h),t.HomeRightSidebar=(0,l.connect)(function(e){return{activeProviders:e.auth.activeProviders}})(m)},179:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),c=r(u),d=n(28),f=n(61),p=r(f),h=n(80),m=r(h),v=n(55),b=n(31),y=n(180),g=r(y),w=n(26),_=r(w),E=n(41),k=r(E),P=n(42),S=r(P),O=n(177),C=r(O),j=function(e){function t(){return a(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),s(t,[{key:"shouldComponentUpdate",value:function(e,t){var n=(0,m["default"])(this,e,t);return n}},{key:"render",value:function(){return c["default"].createElement("div",null,this.props.showingPosts.sort(function(e,t){return e.created_at<t.created_at?1:-1}).map(function(e){return c["default"].createElement(_["default"],{key:e.id_str,post:e})}))}}]),t}(c["default"].Component),x=function(e){function t(e){a(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.state={dependenciesLoaded:!1,search:!1},n.loadPosts=n.loadPosts.bind(n),n.handleSearch=n.handleSearch.bind(n),n.handleSwipedLeft=n.handleSwipedLeft.bind(n),n.handleSwipedRight=n.handleSwipedRight.bind(n),n}return o(t,e),s(t,[{key:"loadPosts",value:function(e){var t=e.postsType,n=e.isAutoFetch,r=this.props,a=r.fetchPosts,i=r.replaceTokenList,o=r.history;return a({postsType:t,isAutoFetch:n})["catch"](function(e){throw 401===e.res.status&&(i([]),o.push("/settings")),e})}},{key:"handleSearch",value:function(e){var t=e.actionType,n=e.newShowingPosts,r=this.props,a=r.updateShowingPosts,i=r.showingPosts;switch(t){case"init":this.recordShowingPost=i,this.setState({search:!0});break;case"update":a(n);break;case"reset":a(this.recordShowingPost),this.setState({search:!1})}}},{key:"handleSwipedLeft",value:function(){var e=this.props.activeProviders,t=e.indexOf("twitter")>=0?"twitter":e.indexOf("weibo")>=0?"weibo":"instagram";this.props.history.push("/home/"+t)}},{key:"handleSwipedRight",value:function(){this.props.history.push("/settings")}},{key:"handleWindowBlur",value:function(){var e=document.getElementsByTagName("video");[].forEach.call(e,function(e){e.pause()})}},{key:"componentWillMount",value:function(){var e=this,t=this.props,n=t.activeProviders,r=t.isInitLoad,a=t.resetState;(0,g["default"])(n).then(function(){return e.setState({dependenciesLoaded:!0})}),a(),r&&this.loadPosts({postsType:"newPosts"}).then(function(){e.autoFetchIntervalId=setInterval(function(){e.loadPosts({postsType:"newPosts",isAutoFetch:!0})},18e4),window.addEventListener("blur",e.handleWindowBlur)})}},{key:"componentWillUnmount",value:function(){this.props.resetState(),document.title="｜",clearInterval(this.autoFetchIntervalId),window.removeEventListener("blur",this.handleWindowBlur)}},{key:"render",value:function(){var e=this.props,t=e.newPosts,n=e.oldPosts,r=e.showingPosts,a=e.allPosts,i=e.isInitLoad,o=e.children,s=this.state,u=s.dependenciesLoaded,d=s.search;return c["default"].createElement(p["default"],{onSwipedLeft:this.handleSwipedLeft,onSwipedRight:this.handleSwipedRight},c["default"].createElement("div",{className:"oneline__wrapper overflow--y"},c["default"].createElement(k["default"],l({type:"newPosts",initLoad:i||!u},t,{onClick:this.loadPosts.bind(this,{postsType:"newPosts"})})),u&&r&&!i&&c["default"].createElement("div",null,c["default"].createElement(C["default"],{onChange:this.handleSearch,allPosts:a.posts}),c["default"].createElement(j,{showingPosts:r})),i||!d?c["default"].createElement(k["default"],l({type:"oldPosts",initLoad:i||!u},n,{onClick:this.loadPosts.bind(this,{postsType:"oldPosts"})})):null),c["default"].createElement(S["default"],null,o))}}]),t}(c["default"].Component);t["default"]=(0,d.connect)(function(e){var t=e.auth.activeProviders,n=e.timeline,r=n.newPosts,a=n.oldPosts,i=n.isInitLoad,o=n.showingPosts,l=n.allPosts;return{activeProviders:t,newPosts:r,oldPosts:a,isInitLoad:i,showingPosts:o,allPosts:l}},{resetState:b.resetState,fetchPosts:b.fetchPosts,updateShowingPosts:b.updateShowingPosts,replaceTokenList:v.replaceTokenList})(x)},180:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){e.forEach(function(e){u["default"].set("profile_"+e,l["default"].get("profile_"+e))})}function i(){var e=u["default"].get("weiboEmotions");return new Promise(function(t,n){e&&"2.0"===e._v?t():(0,c._fetch)({method:"GET",url:"/public/dist/emotions_v2.min.json"}).then(function(e){return"[object Object]"!==Object.prototype.toString.call(e)?void n("`weiboEmotions` is not a Object"):"2.0"!==e._v?void n("`weiboEmotions` is not v2.0"):(u["default"].set("weiboEmotions",e),window.localStorage.setItem("weiboEmotions",JSON.stringify(e)),void t())})["catch"](function(e){return n(e)})})}Object.defineProperty(t,"__esModule",{value:!0});var o=n(34),l=r(o),s=n(14),u=r(s),c=n(8);t["default"]=function(e){return new Promise(function(t,n){a(e),e.indexOf("weibo")>=0?i().then(function(){return t()}):t()})}},181:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),i=r(a),o=n(104),l=r(o),s=n(182),u=r(s),c=n(105),d=r(c);t["default"]=function(e){var t=e.provider,n=e.post,r=e.likedList,a=e.replyList,o=e.retweetedList,s=void 0;switch(t){case"twitter":s=i["default"].createElement("div",{className:"detail__container provider--"+t},i["default"].createElement(l["default"],{provider:t},i["default"].createElement(d["default"],{name:"retweet",text:{type:"count",content:n.retweet_count},active:n.retweeted,iconCount:3}),i["default"].createElement(d["default"],{name:"like",text:{type:"count",content:n.like_count},active:n.liked,iconCount:3}),i["default"].createElement(d["default"],{name:"calendar",text:{type:"date",content:n.created_at},iconCount:3})),i["default"].createElement(l["default"],{type:"retweet",provider:t,list:o}));break;case"instagram":s=i["default"].createElement("div",{className:"detail__container provider--"+t},i["default"].createElement(l["default"],{provider:t},i["default"].createElement(d["default"],{name:"like",text:{type:"count",content:n.like_count},active:n.liked,iconCount:3}),i["default"].createElement(d["default"],{name:"reply",text:{type:"count",content:n.reply_count},iconCount:3}),i["default"].createElement(d["default"],{name:"calendar",text:{type:"date",content:n.created_at},iconCount:3})),i["default"].createElement(l["default"],{type:"like",provider:t,list:r}),i["default"].createElement(u["default"],{provider:t,list:a}));break;case"weibo":s=i["default"].createElement("div",{className:"detail__container provider--"+t},i["default"].createElement(l["default"],{provider:t},i["default"].createElement(d["default"],{name:"like",text:{type:"count",content:n.like_count},active:n.liked,iconCount:4}),i["default"].createElement(d["default"],{name:"retweet",text:{type:"count",content:n.retweet_count},active:n.retweeted,iconCount:4}),i["default"].createElement(d["default"],{name:"reply",text:{type:"count",content:n.reply_count},iconCount:4}),i["default"].createElement(d["default"],{name:"calendar",text:{type:"date",content:n.created_at},iconCount:4})),i["default"].createElement(u["default"],{provider:t,list:a}))}return s}},182:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),i=r(a),o=n(57),l=r(o),s=n(18),u=r(s),c=n(25),d=r(c);t["default"]=function(e){var t=e.provider,n=e.list;return i["default"].createElement("div",null,n.map(function(e,n){return i["default"].createElement("li",{key:n,className:"detail__row vertically_center "+(0===n?"detail__row--reply":"")},i["default"].createElement(l["default"],{provider:t,screen_name:e.screen_name,className:"detail__row__avatar detail__avatar"},i["default"].createElement("img",{src:e.avatar})),i["default"].createElement("div",{className:"detail__row__content"},i["default"].createElement(u["default"],{className:"detail__row__text",provider:t,text:e.text}),i["default"].createElement(d["default"],{className:"detail__row__time",date:e.created_at})))}))}},183:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),c=r(u),d=n(20),f=r(d),p=n(8),h=n(41),m=r(h),v=n(26),b=r(v),y=n(181),g=r(y),w=function(e){function t(e){a(this,t);var n=e.location.state,r=n&&n.likedList?n:null,o=i(this,Object.getPrototypeOf(t).call(this,e));return o.state=r||{post:n,likedList:[],replyList:[],retweetedList:[],isFetching:!1,isFetchFail:!1,isInitLoad:!0},o}return o(t,e),s(t,[{key:"loadDetail",value:function(){var e=this,t=this.props,n=t.action,r=t.provider,a=t.id,i=t.location,o=this.state.isFetching;o||(this.setState({isFetching:!0,isFetchFail:!1}),p.Action.get({action:n,provider:r,id:a}).then(function(t){var n=t.post||i.state,r=t.like||[],a=t.reply||[],o=t.retweet||[],l={post:n,likedList:r,replyList:a,retweetedList:o,isFetching:!1,isFetchFail:!1,isInitLoad:!1};e.setState(l);var s=e.props.history;s.replace({pathname:i.pathname,search:i.search,state:l})})["catch"](function(t){e.setState({isFetching:!1,isFetchFail:!0})}))}},{key:"componentDidMount",value:function(){this.state.isInitLoad&&this.loadDetail()}},{key:"render",value:function(){var e=this.props.provider,t=this.state,n=t.post,r=t.isInitLoad,a=t.isFetching,i=t.isFetchFail,o=void 0;return r||(o=(0,f["default"])(n,{detail:!0}),o.quote&&(o.quote.detail=!0)),r?c["default"].createElement(m["default"],{type:"oldPosts",provider:e,initLoad:r,isFetching:a,isFetchFail:i,onClick:this.loadDetail}):c["default"].createElement("div",{className:"detail overflow--y animate--enter"},c["default"].createElement(b["default"],{className:"detail__post",post:o}),c["default"].createElement(g["default"],l({provider:e},this.state)))}}]),t}(c["default"].Component);t["default"]=w},184:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),u=r(s),c=n(4),d=(r(c),n(26)),f=r(d),p=n(73),h=r(p),m=n(19),v=function(e){function t(){return a(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.provider,n=e.id,r=e.showingPosts,a=this.props.location.query,i=a.name,o=a.place_id;return u["default"].createElement("div",null,u["default"].createElement(h["default"],{provider:t,iconName:"location",link:m.selectLocationLink[t]({id:n,place_id:o}),title:i||""}),r.map(function(e){return u["default"].createElement(f["default"],{className:"popupPost",key:e.id_str,post:e})}))}}]),t}(u["default"].Component);t["default"]=v},185:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),u=r(s),c=n(4),d=(r(c),n(26)),f=r(d),p=n(73),h=r(p),m=n(19),v=function(e){function t(){return a(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.provider,n=e.id,r=e.showingPosts;return u["default"].createElement("div",null,u["default"].createElement(h["default"],{provider:t,iconName:"tags",link:m.selectTagLink[t]({tagName:n}),title:n}),r.map(function(e){return u["default"].createElement(f["default"],{className:"popupPost",key:e.id_str,post:e})}))}}]),t}(u["default"].Component);t["default"]=v},186:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),c=r(u),d=n(6),f=r(d),p=n(8),h=n(27),m=n(4),v=r(m),b=n(24),y=n(18),g=r(y),w=function(e){function t(e){a(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.state={inprocess:!1,following:e.following},n.handleClick=n.handleClick.bind(n),n}return o(t,e),s(t,[{key:"handleClick",value:function(){var e=this,t=this.state,n=t.inprocess,r=t.following,a=this.props,i=a.uid,o=a.provider;n||(this.setState({inprocess:!0}),p.Action[r?"destroy":"create"]({action:"follow",provider:o,id:i}).then(function(){e.setState({inprocess:!1,following:!r})})["catch"](function(t){(0,h.addClassTemporarily)(e.refs.btn,"tips--error",500),e.setState({inprocess:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.inprocess,n=e.following,r=(0,f["default"])({"profile__following tips--deep":!0,"icon--twitter tips--active":n,"tips--inprocess":t});return c["default"].createElement("button",{className:r,type:"button",onClick:this.handleClick,ref:"btn"},c["default"].createElement(v["default"],{name:"following"}))}}]),t}(c["default"].Component),_=function(e){var t=e.provider,n=e.counts,r="profile__count__column icon--"+t;return n&&c["default"].createElement("div",{className:"profile__count"},c["default"].createElement("div",{className:r,"data-count":n.statuses},c["default"].createElement(v["default"],{name:"instagram"===t?"post":"tweet"})),c["default"].createElement("div",{className:r,"data-count":n.followed_by},c["default"].createElement(v["default"],{name:"followed_by"})),c["default"].createElement("div",{className:r,"data-count":n.follows},c["default"].createElement(v["default"],{name:"follows"})))},E=function(e){var t=e.provider,n=e.bio;return n?c["default"].createElement(g["default"],{provider:t,className:"profile__biography",text:n}):c["default"].createElement("span",null)},k=function(e){var t=e.website;return t?c["default"].createElement("div",{className:"profile__website"},c["default"].createElement("a",{href:t,target:"_blank"},c["default"].createElement(v["default"],{name:"link",className:"tips animate--faster"}))):c["default"].createElement("span",null)};t["default"]=function(e){var t=e.provider,n=e.user;return c["default"].createElement("div",{className:"profile--"+t+" provider--"+t},c["default"].createElement(b.Avatar,l({provider:t},n)),c["default"].createElement(_,{provider:t,counts:n.counts}),c["default"].createElement(E,{provider:t,bio:n.bio}),c["default"].createElement(k,{website:n.website}),"twitter"===t&&c["default"].createElement(w,{provider:t,following:n.following,uid:n.uid}),n.location&&c["default"].createElement("span",{className:"post__location"},c["default"].createElement(v["default"],{className:"post-action__icon",name:"location"}),c["default"].createElement("span",{className:"post__location__name"},n.location)))}},187:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),u=r(s),c=n(20),d=r(c),f=n(26),p=r(f),h=n(186),m=r(h),v=function(e){function t(){return a(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.provider,n=e.showingPosts,r=e.user;return u["default"].createElement("div",null,u["default"].createElement(m["default"],{
provider:t,user:r}),n.map(function(e){var t="retweet"===e.type,n=t?e:(0,d["default"])(e,{avatarless:!0});return u["default"].createElement(p["default"],{className:"userPost "+(t?"userPost--gutter":""),key:e.id_str,post:n})}))}}]),t}(u["default"].Component);t["default"]=v},188:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),c=r(u),d=n(8),f=n(41),p=r(f),h=n(4),m=r(h),v=n(187),b=r(v),y=n(185),g=r(y),w=n(184),_=r(w),E=function(e){var t=e.provider,n=e.action,r=e.id;switch(t){case"twitter":switch(n){case"user":return r;case"locations":return window.encodeURIComponent("place:"+r);case"tags":return window.encodeURIComponent("#"+r)}break;case"instagram":case"weibo":return r}},k=function(e){var t=e.provider;return c["default"].createElement("span",{className:"icon--"+t,style:{position:"absolute",top:"calc(50% - 25px)",left:"calc(50% - 25px)",height:50,width:50,display:"inline-block",cursor:"default"}},c["default"].createElement(m["default"],{name:"locked"}))},P=function(e){function t(e){a(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.state=e.location.state||{showingPosts:[],user:{},isFetching:!1,isFetchFail:!1,isInitLoad:!0,isLocked:!1,minId:"",minDate:0},n.loadPosts=n.loadPosts.bind(n),n}return o(t,e),s(t,[{key:"loadPosts",value:function(){var e=this,t=this.props,n=t.provider,r=t.action,a=t.id,i=this.state,o=i.showingPosts,l=i.isFetching,s=i.minId,u=i.minDate;l||(this.setState({isFetching:!0,isFetchFail:!1}),d.Action.get({provider:n,action:r,id:E({provider:n,action:r,id:a})},s?{maxId:"weibo"!==n?s:u}:void 0).then(function(t){var n=t.user,r=t.data.sort(function(e,t){return e.created_at<t.created_at?1:-1}),a=r[r.length-1]&&r[r.length-1],i={showingPosts:o.concat(r),user:n||e.state.user,isFetching:!1,isInitLoad:!1,minId:a&&a.id_str,minDate:a&&a.created_at};e.setState(i);var l=e.props,s=l.history,u=l.location;s.replace({pathname:u.pathname,search:u.search,state:i})})["catch"](function(t){e.setState({isFetching:!1,isFetchFail:!0,isLocked:!0})}))}},{key:"componentDidMount",value:function(){this.state.isInitLoad&&this.loadPosts()}},{key:"render",value:function(){var e=this.props,t=e.provider,n=e.action,r=this.state,a=r.showingPosts,i=r.user,o=r.isInitLoad,s=r.isFetching,u=r.isFetchFail,d=r.isLocked,f=void 0;switch(n){case"user":f=b["default"];break;case"locations":f=_["default"];break;case"tags":f=g["default"]}return c["default"].createElement("div",null,!o&&c["default"].createElement("div",{className:"read animate--enter"},c["default"].createElement(f,l({showingPosts:a,user:i},this.props))),d&&o?c["default"].createElement(k,{provider:t}):o||a.length>=7?c["default"].createElement(p["default"],{type:"oldPosts",provider:t,initLoad:o,isFetching:s,isFetchFail:u,onClick:this.loadPosts}):null)}}]),t}(c["default"].Component);t["default"]=P},189:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),u=r(s),c=n(20),d=r(c),f=n(6),p=(r(f),n(34)),h=r(p),m=n(8),v=n(19),b=n(4),y=r(b),g=n(41),w=r(g),_=n(26),E=r(_),k=n(73),P=r(k),S={searchText:"",showingPosts:[],isFetching:!1,isFetchFail:!1,isInitLoad:!0,minId:""},O=function(e){function t(e){a(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.handleSubmit=n.handleSubmit.bind(n),n.handleClick=n.handleClick.bind(n),n}return o(t,e),l(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.refs.input;this.props.onSearchChange(t.value)}},{key:"handleClick",value:function(){var e=this.refs.input;e.value="",e.focus(),this.props.onIconClick()}},{key:"render",value:function(){return u["default"].createElement("div",{className:"searchBar searchBar--remote searchBar--active animate--faster"},u["default"].createElement("form",{className:"searchBar__form",onSubmit:this.handleSubmit},u["default"].createElement("input",{className:"searchBar__input animate--faster",type:"text",autoComplete:"off",spellCheck:"false",required:!0,ref:"input"}),u["default"].createElement("button",{className:"searchBar__icon icon--white",type:"button",onClick:this.handleClick},u["default"].createElement(y["default"],{name:"search"}))))}}]),t}(u["default"].Component),C=function(e){function t(e){a(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.state={trends:h["default"].get("trends_"+e.provider)||{}},n.getTrends=n.getTrends.bind(n),n}return o(t,e),l(t,[{key:"getTrends",value:function(){var e=this,t=this.props.provider,n=this.state.trends;(!n.created_at||Date.now()-n.created_at>6e5)&&m.Action.get({provider:t,action:"trends",id:1}).then(function(n){e.setState({trends:n}),h["default"].set("trends_"+t,n)})}},{key:"componentDidMount",value:function(){this.getTrends()}},{key:"render",value:function(){var e=this.props,t=e.provider,n=e.onTrendClick,r=this.state.trends;return u["default"].createElement("ul",{className:"search__trends color--"+t+" overflow--y"},r.data&&r.data.sort(function(e,t){return e.volume<t.volume?1:-1}).map(function(e){var t=e.name;return u["default"].createElement("li",{className:"search__trends__item tips",key:t,onClick:n.bind(null,t)},t)}))}}]),t}(u["default"].Component),j=function(e){function t(e){a(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.state=(0,d["default"])({},S),n.resetState=n.resetState.bind(n),n.handleSearchChange=n.handleSearchChange.bind(n),n.loadPosts=n.loadPosts.bind(n),n}return o(t,e),l(t,[{key:"resetState",value:function(){console.log({},S),this.setState((0,d["default"])({},S))}},{key:"handleSearchChange",value:function(e){var t=this;this.setState((0,d["default"])({},S,{searchText:window.encodeURIComponent(""+e)}),function(){t.loadPosts()})}},{key:"loadPosts",value:function(){var e=this,t=this.props.provider,n=this.state,r=n.searchText,a=n.showingPosts,i=n.isFetching,o=n.minId;!i&&r&&(this.setState({isFetching:!0,isFetchFail:!1}),m.Action.get({provider:t,action:"search",id:r},o?{maxId:o}:void 0).then(function(t){var n=t.data.sort(function(e,t){return e.created_at<t.created_at?1:-1}),r=n[n.length-1]&&n[n.length-1],i={showingPosts:a.concat(n),isFetching:!1,isInitLoad:!1,minId:r&&r.id_str};e.setState(i)})["catch"](function(t){e.setState({isFetching:!1,isFetchFail:!0})}))}},{key:"render",value:function(){var e=this.props.provider,t=this.state,n=t.searchText,r=t.showingPosts,a=t.isInitLoad,i=t.isFetching,o=t.isFetchFail;return u["default"].createElement("div",{className:"search"},u["default"].createElement(P["default"],{provider:e,iconName:"search",link:n&&v.selectSearchLink[e]({searchText:n}),title:window.decodeURIComponent(""+n)}),u["default"].createElement(O,{onSearchChange:this.handleSearchChange,onIconClick:this.resetState}),r.map(function(e){return u["default"].createElement(E["default"],{className:"popupPost",key:e.id_str,post:e})}),!n&&u["default"].createElement(C,{provider:e,onTrendClick:this.handleSearchChange}),i||r.length>=7?u["default"].createElement(w["default"],{type:"oldPosts",provider:e,initLoad:a,isFetching:i,isFetchFail:o,onClick:this.loadPosts}):null)}}]),t}(u["default"].Component);t["default"]=j},190:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.ClipboardBtn=void 0;var s=n(1),u=r(s),c=n(109),d=r(c),f=n(237),p=r(f),h=n(14),m=r(h),v=n(8),b=n(27),y=n(4),g=r(y),w=n(41),_=r(w),E=t.ClipboardBtn=function(e){function t(e){return a(this,t),i(this,Object.getPrototypeOf(t).call(this,e))}return o(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;this.clipboard=new p["default"](this.refs.btn),this.clipboard.on("success",function(t){(0,b.addClassTemporarily)(e.refs.btn,"tips--active",500),document.querySelector("textarea").value=""}),this.clipboard.on("error",function(t){var n=e.refs.btn,r=new d["default"](n);r.contains("tips--active")?(r.remove("tips--active"),t.clearSelection()):r.toggle("tips--active")})}},{key:"componentWillUnmount",value:function(){this.clipboard.destroy()}},{key:"render",value:function(){return u["default"].createElement("button",{className:"share__btn tips--deep--peace",type:"button","data-clipboard-target":".share__text",ref:"btn"},u["default"].createElement(g["default"],{className:"animate--faster",name:"clipboard"}))}}]),t}(u["default"].Component),k=function(e){function t(e){a(this,t);var n=e.location.state,r=n&&n.sharedLink?n:null,o=i(this,Object.getPrototypeOf(t).call(this,e));return o.state=r||{post:{},sharedLink:"",sharedText:"",isFetching:!1,isFetchFail:!1,isInitLoad:!0},o.toggleSharedText=o.toggleSharedText.bind(o),o}return o(t,e),l(t,[{key:"fetchSharedLink",value:function(){var e=this,t=this.props,n=t.provider,r=t.id,a=t.location,i=a.state,o=this.state.isFetching;o||(this.setState({isFetching:!0,isFetchFail:!1}),v.Share.post({provider:n,id:r},{post:i,sharer:m["default"].get("profile_"+n)}).then(function(t){var o={post:i,sharedLink:window.location.origin+"/share/"+n+"/"+r,sharedText:"",isFetching:!1,isFetchFail:!1,isInitLoad:!1};e.setState(o);var l=e.props.history;l.replace({pathname:a.pathname,search:a.search,state:o})})["catch"](function(t){e.setState({isFetching:!1,isFetchFail:!0})}))}},{key:"toggleSharedText",value:function(){var e=this.state,t=e.post,n=e.sharedText,r=t.user.screen_name,a=t.text||"";this.setState({sharedText:n?"":"｜ @"+r+": "+(a.length>17?a.slice(0,17)+"…":a)})}},{key:"componentDidMount",value:function(){this.state.isInitLoad&&this.fetchSharedLink()}},{key:"render",value:function(){var e=this.props.provider,t=this.state,n=t.sharedLink,r=t.sharedText,a=t.isInitLoad,i=t.isFetching,o=t.isFetchFail;return a?u["default"].createElement(_["default"],{type:"oldPosts",provider:e,initLoad:a,isFetching:i,isFetchFail:o,onClick:this.fetchSharedLink}):u["default"].createElement("div",{className:"share provider--"+e},u["default"].createElement("textarea",{className:"share__text",type:"text",value:r+" "+n,readOnly:!0}),u["default"].createElement("div",{className:"share__toolBar vertically_center"},u["default"].createElement(E,null),u["default"].createElement("button",{className:"share__btn "+(r?"":"tips--deep--peace"),type:"button",onClick:this.toggleSharedText},u["default"].createElement(g["default"],{name:"wand"}))))}}]),t}(u["default"].Component);t["default"]=k},191:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Submit=t.ToggleWeiboEmotions=t.ToggleSensitive=t.MediaUpload=t.GeoPicker=void 0;var u=n(1),c=r(u),d=n(6),f=r(d),p=n(27),h=n(72),m=n(4),v=r(m),b={pointerEvents:"none",opacity:".1"};t.GeoPicker=function(e){function t(e){i(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={inprocess:!1},n.handleClick=n.handleClick.bind(n),n}return l(t,e),s(t,[{key:"handleClick",value:function(){var e=this,t=this.state.inprocess,n=this.props,r=n.onChange,a=n.selected;t||(a?(this.setState({inprocess:!1}),r({geo:{}})):(this.setState({inprocess:!0}),window.navigator.geolocation.getCurrentPosition(function(t){e.setState({inprocess:!1});var n=t.coords,a=n.latitude,i=n.longitude;r({geo:{lat:a,"long":i}})},function(t){e.setState({inprocess:!1}),(0,p.addClassTemporarily)(e.refs.btn,"tips--error",500)},{maximumAge:6e4,timeout:7e3})))}},{key:"render",value:function(){var e=this.props,t=e.action,n=e.selected,r=this.state.inprocess,a=r||"retweet"===t?b:null,i=(0,f["default"])({"write__btn write__btn--left tips--deep--peace":!0,"tips--active--peace":n,"tips--inprocess":r});return c["default"].createElement("button",{className:i,style:a,type:"button",onClick:this.handleClick},c["default"].createElement(v["default"],{name:"geoPicker"}))}}]),t}(c["default"].Component),t.MediaUpload=function(e){function t(e){i(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={inprocess:!1},n.handleChange=n.handleChange.bind(n),n}return l(t,e),s(t,[{key:"handleChange",value:function(){var e=this,t=this.props,n=t.provider,r=t.media,a=t.onChange,i=this.refs.btn,o=i.files[0],l={};(0,h.addImagePreview)({file:o}).then(function(t){var n=t.previewURL,r=t.ratio;l.url=n,l.ratio=r,e.setState({inprocess:!0})}).then(function(){(0,h.uploadMedia)({provider:n,file:o}).then(function(t){l.id=t,a({media:r.concat([l])}),e.setState({inprocess:!1})})["catch"](function(t){(0,p.addClassTemporarily)(e.refs.label,"tips--error",500),e.setState({inprocess:!1})})}),i.value=""}},{key:"render",value:function(){var e=this.props,t=e.media,n=e.action,r=this.state.inprocess,a=r||t.length>=4||"retweet"===n?b:null,i=(0,f["default"])({"write__btn write__btn--media tips--deep--peace":!0,"tips--inprocess":r});return c["default"].createElement("span",null,c["default"].createElement("label",{style:a,className:i,htmlFor:"uploadMedia",role:"button",ref:"label"},c["default"].createElement(v["default"],{name:"camera"})),c["default"].createElement("input",{style:{display:"none"},id:"uploadMedia",type:"file",accept:"image/gif,image/jpeg,image/jpg,image/png",onChange:this.handleChange,ref:"btn"}))}}]),t}(c["default"].Component),t.ToggleSensitive=function(e){function t(e){i(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={selected:!1},n.handleClick=n.handleClick.bind(n),n}return l(t,e),s(t,[{key:"handleClick",value:function(){var e=this.state.selected,t=this.props.onChange;this.setState({selected:!e}),t({sensitive:!e})}},{key:"render",value:function(){var e=this.props.action,t=this.state.selected,n="retweet"===e?b:null,r=(0,f["default"])({"write__btn write__btn--left tips--deep--peace":!0,"tips--active--peace":t});return c["default"].createElement("button",{className:r,style:n,type:"button",onClick:this.handleClick},c["default"].createElement(v["default"],{name:"sensitive"}))}}]),t}(c["default"].Component),t.ToggleWeiboEmotions=function(e){function t(e){i(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={selected:!1},n.handleClick=n.handleClick.bind(n),n}return l(t,e),s(t,[{key:"handleClick",value:function(){var e=this.state.selected,t=this.props.onChange;this.setState({selected:!e}),t({emotions:!e})}},{key:"render",value:function(){var e=this.state.selected,t=(0,f["default"])({"write__btn write__btn--left tips--deep--peace":!0,"tips--active--peace":e});return c["default"].createElement("button",{className:t,type:"button",onClick:this.handleClick},c["default"].createElement(v["default"],{name:"emotions"}))}}]),t}(c["default"].Component),t.Submit=function(e){function t(){return i(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return l(t,e),s(t,[{key:"componentWillReceiveProps",value:function(){(0,p.addClassTemporarily)(this.refs.btn,"write__btn--send--typing",700)}},{key:"render",value:function(){var e,t=this.props,n=t.action,r=t.provider,i=t.status,o=t.submitting,l=t.onClick,s=(0,h.getCountInfo)({action:n,provider:r,status:i}),u=s.count,d=s.isOverLimitCount,p=(0,f["default"])((e={"write__btn write__btn--send tips":!0},a(e,"icon--"+r,!0),a(e,"write__btn--send--sending",o),e));return c["default"].createElement("button",{className:p,type:"button","data-count":0===u?"":u,disabled:d||0===u&&"retweet"!==n,onClick:l,ref:"btn"},c["default"].createElement(v["default"],{name:"writing"}))}}]),t}(c["default"].Component)},192:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.WeiboEmotions=t.Mentions=t.MediaPreview=void 0;var u=n(1),c=r(u),d=n(6),f=r(d),p=n(72),h=n(107);t.MediaPreview=function(e){function t(e){i(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.removeMedia=n.removeMedia.bind(n),n}return l(t,e),s(t,[{key:"removeMedia",value:function(e){var t=this.props,n=t.media,r=t.onChange;r({media:[].concat(a(n.slice(0,e)),a(n.slice(e+1)))})}},{key:"render",value:function(){var e=this,t=this.props.media;return c["default"].createElement("div",{className:"write__mediaPreview"},t.map(function(t,n){var r=t.url;return c["default"].createElement("span",{className:"write__mediaPreview__item animate--faster",key:r,onClick:e.removeMedia.bind(null,n)},c["default"].createElement("img",{src:r}))}))}}]),t}(c["default"].Component),t.Mentions=function(e){function t(e){i(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.insertMention=n.insertMention.bind(n),n}return l(t,e),s(t,[{key:"insertMention",value:function(e){var t=this.props,n=t.provider,r=t.onChange,a={twitter:/@([\u4e00-\u9fa5\w-]*)$/,instagram:/@([\w\.]*)$/,weibo:/@([\u4e00-\u9fa5\w-]*)$/};(0,p.removeText)(a[n]),(0,p.insertText)(e.trim()+" "),r()}},{key:"render",value:function(){var e=this,t=this.props,n=t.mentions,r=t.provider,a=t.toolPopupLeft,i=(0,f["default"])({"write__mentions write__popup overflow--y animate--faster":!0,"write__popup--left":a,"write__popup--right":!a});return c["default"].createElement("div",{className:i},"weibo"===r?n.map(function(t){return c["default"].createElement("button",{key:t,onClick:e.insertMention.bind(null,t),type:"button"},t)}):n.map(function(t){return c["default"].createElement("button",{key:t.s,onClick:e.insertMention.bind(null,t.s),type:"button"},t.u||t.s)}))}}]),t}(c["default"].Component),t.WeiboEmotions=function(e){function t(e){i(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.insertEmotions=n.insertEmotions.bind(n),n}return l(t,e),s(t,[{key:"insertEmotions",value:function(e){var t=this.props.onChange;(0,p.insertText)("["+e+"]"),t()}},{key:"render",value:function(){var e=this,t=this.props,n=(t.emotions,t.toolPopupLeft),r="笑cry|微笑|嘻嘻|哈哈|可爱|可怜|挖鼻|吃惊|害羞|挤眼|闭嘴|鄙视|爱你|泪|偷笑|亲亲|生病|太开心|白眼|右哼哼|左哼哼|嘘|衰|委屈|吐|哈欠|抱抱|怒|疑问|馋嘴|拜拜|思考|汗|困|睡|钱|失望|酷|色|哼|鼓掌|晕|悲伤|抓狂|黑线|阴险|怒骂|互粉|心|伤心|猪头|熊猫|兔子|ok|耶|good|NO|赞|来|弱|草泥马|给力|围观|威武|奥特曼|礼物|钟|话筒|蜡烛|蛋糕|带着微博去旅行|最右|泪流满面|江南style|去旅行|doge|喵喵|哆啦A梦花心|哆啦A梦害怕|哆啦A梦吃惊|静香微笑|大雄微笑|胖虎微笑|小夫微笑".split("|"),a=(0,f["default"])({"write__emotions write__popup overflow--y animate--faster":!0,"write__popup--left":n,"write__popup--right":!n});return c["default"].createElement("div",{className:a},r.map(function(t,n){return c["default"].createElement("button",{key:n,onClick:e.insertEmotions.bind(null,t),type:"button",dangerouslySetInnerHTML:{__html:(0,h.weiboEmotify)("["+t+"]")}})}))}}]),t}(c["default"].Component)},193:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),c=r(u),d=n(110),f=r(d),p=n(20),h=r(p),m=n(27),v=n(72),b=n(26),y=r(b),g=n(191),w=n(192),_=n(42),E=r(_),k=function(e){function t(e){a(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.state={status:"",mentions:[],geo:{},media:[],sensitive:!1,emotions:!1,livePreviewPost:(0,v.initLivePreview)({type:e.action,provider:e.provider,status:"",media:[],post:e.location.state,livePreviewPost:{}}),toolPopupLeft:!1,submitting:!1},n.handleStateChange=n.handleStateChange.bind(n),n.handleTextChange=n.handleTextChange.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n}return o(t,e),s(t,[{key:"handleStateChange",value:function(e){if(Object.keys(e).indexOf("media")>=0){var t=this.props,n=t.action,r=t.provider,a=this.state,i=a.status,o=a.livePreviewPost;(0,h["default"])(e,{livePreviewPost:(0,v.initLivePreview)({type:n,provider:r,status:i,media:e.media,livePreviewPost:o,post:this.props.location.state})})}this.setState(e)}},{key:"handleTextChange",value:function(){var e=this.props,t=e.action,n=e.provider,r=e.id,a=this.refs.textarea,i=a.value,o=i.trim().length>0?i:i.trim(),l=t,s=this.state.geo,u=this.state.media;if("retweet"===t&&o||"quote"===t&&""===o){var c=this.props,d=c.history,f=c.location;l="retweet"===t?"quote":"retweet",s={},u=[],d.replace({pathname:"/home/"+n+"/"+l+"/"+r,search:f.search,state:f.state})}var p=(0,v.initLivePreview)({type:l,provider:n,status:o,media:u,livePreviewPost:this.state.livePreviewPost,post:this.props.location.state});this.setState({status:o,mentions:(0,v.extractMentions)({status:o.slice(0,a.selectionStart),provider:n}),geo:s,media:u,livePreviewPost:p,toolPopupLeft:(0,v.isLeftPopup)()}),a.focus()}},{key:"handleSubmit",value:function(){var e=this,t=this.props,n=t.action,r=t.provider,a=t.history;this.setState({submitting:!0}),(0,v.submitWrite)(l({},this.state,this.props)).then(function(){a.push("/home"),setTimeout(function(){v.draft.remove({action:n,provider:r})},700)})["catch"](function(t){(0,m.addClassTemporarily)(e.refs.textarea,"write__textarea--err",500)}).then(function(){e.setState({submitting:!1})})}},{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){(0,v.initStatus)(l({},e.props)),e.handleTextChange()},700)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.action,n=e.provider,r=this.state.status;r&&v.draft.set({action:t,provider:n,status:r})}},{key:"render",value:function(){var e=this.props,t=e.action,n=e.provider,r=(e.id,this.state),a=r.status,i=r.geo,o=r.media,l=r.mentions,s=r.emotions,u=r.livePreviewPost,d=r.toolPopupLeft,p=r.submitting,h="twitter"===n,m="weibo"===n;return c["default"].createElement("div",{className:"write"},"reply"!==t&&c["default"].createElement("div",{className:"write__livePreview animate--enter overflow--y"},c["default"].createElement(y["default"],{post:u})),c["default"].createElement("form",{className:"write__form"},c["default"].createElement("textarea",{className:"write__textarea animate--general",type:"text",autoComplete:"off",spellCheck:"false",required:"retweet"!==t,disabled:p,onChange:(0,f["default"])(this.handleTextChange,250),ref:"textarea"}),c["default"].createElement("div",{className:"write__textarea write__textarea--mirror"},c["default"].createElement("span",null)),c["default"].createElement("div",{className:"write__toolBar"},h&&c["default"].createElement(g.ToggleSensitive,{action:t,onChange:this.handleStateChange}),c["default"].createElement(g.GeoPicker,{action:t,selected:Object.keys(i).length>0,onChange:this.handleStateChange}),h&&c["default"].createElement(g.MediaUpload,{provider:n,media:o,action:t,onChange:this.handleStateChange}),m&&c["default"].createElement(g.ToggleWeiboEmotions,{onChange:this.handleStateChange}),c["default"].createElement(g.Submit,{action:t,provider:n,status:a,submitting:p,onClick:this.handleSubmit})),o.length>0&&c["default"].createElement(w.MediaPreview,{media:o,onChange:this.handleStateChange}),c["default"].createElement(E["default"],null,l.length>0&&c["default"].createElement(w.Mentions,{mentions:l,provider:n,toolPopupLeft:d,onChange:this.handleTextChange})),c["default"].createElement(E["default"],null,s&&m&&c["default"].createElement(w.WeiboEmotions,{emotions:s,toolPopupLeft:d,onChange:this.handleTextChange}))))}}]),t}(c["default"].Component);t["default"]=k},194:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};Object.defineProperty(t,"__esModule",{value:!0}),t.Action=void 0;var i=n(1),o=r(i),l=n(193),s=r(l),u=n(188),c=r(u),d=n(183),f=r(d),p=n(190),h=r(p),m=n(189),v=r(m);t.Action=function(e){var t=e.params.action,n=void 0;switch(t){case"user":case"locations":case"tags":n=c["default"];break;case"tweet":case"retweet":case"quote":case"reply":n=s["default"];break;case"detail":n=f["default"];break;case"share":n=h["default"];break;case"search":n=v["default"]}return o["default"].createElement(n,a({history:e.history,location:e.location},e.params))}},195:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.HomeMenu=t.SettingsMenu=void 0;var i=n(1),o=r(i),l=n(28),s=n(6),u=r(s),c=n(13),d=n(14),f=r(d),p=n(4),h=r(p),m=function(e){var t=e.data;return o["default"].createElement("div",null,t.map(function(e,n){var r,i=e.link,l=e.provider,s=e.icon,d=t.length,f=(0,u["default"])((r={"menu--row menu__btn btn tips animate--faster":!0},a(r,"menu--row-"+d+"-"+(n+1),!0),a(r,"icon--"+l,l),r));return o["default"].createElement(c.Link,{to:i,key:s},o["default"].createElement("span",{className:f},o["default"].createElement(h["default"],{name:s})))}))},v=function(e){var t=e.currentProvider,n=e.activeProviders,r=n.indexOf("twitter")>=0,i=n.indexOf("instagram")>=0,l=n.indexOf("weibo")>=0,s=[];switch(t){case"twitter":i?s.push({direction:"left",provider:"instagram"}):null,l?s.push({direction:"right",provider:"weibo"}):null;break;case"instagram":l?s.push({direction:"left",provider:"weibo"}):null,r?s.push({direction:"right",provider:"twitter"}):null;break;case"weibo":r?s.push({direction:"left",provider:"twitter"}):null,i?s.push({direction:"right",provider:"instagram"}):null}return o["default"].createElement("div",null,s.map(function(e){var t,n=e.provider,r=e.direction,i=(0,u["default"])((t={"menu__btn menu__btn--switch tips--deep--peace":!0},a(t,"menu__btn--switch--"+r,!0),a(t,"icon--"+n,!0),t));return o["default"].createElement(c.Link,{to:"/home/"+n,key:r},o["default"].createElement("span",{className:i},o["default"].createElement(h["default"],{name:"2"})))}))},b=function(e){var t=e.activeProviders,n=[];return t.length>0&&n.push({link:"/settings/replicant/deckard",icon:"menu_deckard"}),n.push({link:"/settings/replicant/rachael",icon:"menu_rachael"}),o["default"].createElement(m,{data:n})},y=function(e){var t=e.params,n=e.activeProviders,r=t.provider,a=f["default"].get("profile_"+r).uid,i=void 0;switch(r){case"twitter":i=[{link:"/home/twitter/tweet",provider:"twitter",icon:"menu_tweet"},{link:"/home/twitter/user/"+a,provider:"twitter",icon:"menu_profile"},{link:"/home/twitter/search",provider:"twitter",icon:"menu_search"}];break;case"instagram":i=[{link:"/home/instagram/user/"+a,provider:"instagram",icon:"menu_profile"}];break;case"weibo":i=[{link:"/home/weibo/tweet",provider:"weibo",icon:"menu_tweet"},{link:"/home/weibo/user/"+a,provider:"weibo",icon:"menu_profile"}]}return o["default"].createElement("div",null,o["default"].createElement(m,{data:i}),o["default"].createElement(v,{currentProvider:r,activeProviders:n}))};t.SettingsMenu=(0,l.connect)(function(e){return{activeProviders:e.auth.activeProviders}})(b),t.HomeMenu=(0,l.connect)(function(e){return{activeProviders:e.auth.activeProviders}})(y)},196:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Rachael=t.Deckard=void 0;var s=n(1),u=r(s),c=n(28),d=n(34),f=r(d),p=n(8),h=n(55),m=n(27),v="replicant vertically_center",b=function(e){function t(e){a(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.getCode=n.getCode.bind(n),n}return o(t,e),l(t,[{key:"getCode",value:function(){var e=this,t=this.props.activeProviders,n=this.refs.deckard;this.intervals.fakeCode=setInterval(function(){for(var e="";e.length<7;e+=Math.random().toString(36).substr(2));n.innerHTML=e.substr(0,7)},100);var r=[];t.forEach(function(e){var t=f["default"].get("profile_"+e);t&&r.push(t)}),p.Auth.deckard({profileList:r}).then(function(t){var r=60;setTimeout(function(){clearInterval(e.intervals.fakeCode),n.innerHTML=t.code},700),e.intervals.countDown=setInterval(function(){return 0>r?(e.getCode(),n.dataset.countdown="",void clearInterval(e.intervals.countDown)):void(n.dataset.countdown=r--)},1e3)})["catch"](function(t){clearInterval(e.intervals.fakeCode),n.innerHTML="80af294",n.dataset.countdown="⟲"})}},{key:"componentWillMount",value:function(){this.intervals={fakeCode:0,countDown:0}}},{key:"componentDidMount",value:function(){this.getCode()}},{key:"componentWillUnmount",value:function(){var e=this;Object.keys(this.intervals).forEach(function(t){clearInterval(e.intervals[t])})}},{key:"render",value:function(){return u["default"].createElement("div",{className:v},u["default"].createElement("span",{className:"replicant--deckard","data-countdown":"",ref:"deckard"}))}}]),t}(u["default"].Component),y=function(e){function t(e){a(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.handleSubmit=n.handleSubmit.bind(n),n}return o(t,e),l(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=this.props,r=n.replaceTokenList,a=n.history,i=this.refs.rachael,o=i.value;i.blur(),p.Auth.rachael({code:o}).then(function(e){e.msg.length>0?e.msg.forEach(function(e){return alert(e)}):(r(e.tokenList),e.profileList.forEach(function(e){f["default"].set("profile_"+e.provider,e)})),a.push("/settings")})["catch"](function(e){(0,m.addClassTemporarily)(t.refs.rachael,"replicant--rachael--errCode",500)})}},{key:"render",value:function(){return u["default"].createElement("div",{className:v},u["default"].createElement("form",{onSubmit:this.handleSubmit},u["default"].createElement("input",{className:"replicant--rachael",type:"text",placeholder:"80af294",maxLength:"7",required:!0,ref:"rachael"})))}}]),t}(u["default"].Component);t.Deckard=(0,c.connect)(function(e){return{activeProviders:e.auth.activeProviders}})(b),t.Rachael=(0,c.connect)(function(e){return{activeProviders:e.auth.activeProviders}},{replaceTokenList:h.replaceTokenList})(y)},197:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),u=r(s),c=n(61),d=r(c),f=n(42),p=r(f),h=function(e){function t(e){a(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.hidePopup=n.hidePopup.bind(n),n.handleKeyDown=n.handleKeyDown.bind(n),n.handleSwipedLeft=n.handleSwipedLeft.bind(n),n.handleSwipedRight=n.handleSwipedRight.bind(n),n}return o(t,e),l(t,[{key:"hidePopup",value:function(){var e=this.props,t=e.history,n=e.location;t.push(/settings/.test(n.pathname)?"/settings":"/home")}},{key:"stopPropagation",value:function(e){e.stopPropagation()}},{key:"handleKeyDown",value:function(e){27===e.keyCode&&this.hidePopup()}},{key:"handleSwipedLeft",value:function(e){e.stopPropagation(),this.props.history.go()}},{key:"handleSwipedRight",value:function(e){e.stopPropagation(),this.props.history.goBack()}},{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props.children,t=this.props.location.pathname;return u["default"].createElement(d["default"],{className:"popup overflow--y",onSwipedLeft:this.handleSwipedLeft,onSwipedRight:this.handleSwipedRight},u["default"].createElement("div",{className:"popup__wrapper",onClick:this.hidePopup},u["default"].createElement("div",{onClick:this.stopPropagation},/(retweet|quote)/.test(t)?e:u["default"].createElement(p["default"],null,u["default"].cloneElement(e,{key:t})))))}}]),t}(u["default"].Component);t["default"]=h},198:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsRightSidebar=t.SettingsLeftSidebar=void 0;var a=n(1),i=r(a),o=n(13),l=n(28),s=n(6),u=r(s),c=n(4),d=r(c),f=(0,u["default"])("sidebar__button","btn","animate--faster"),p=function(e){var t=(e.activeProviders,e.location),n=!/settings$/.test(t.pathname);return n?i["default"].createElement("span",null):i["default"].createElement(o.Link,{to:"/settings/replicant"},i["default"].createElement("span",{className:f},i["default"].createElement(d["default"],{name:"sidebar_replicant"})))},h=function(e){var t=e.activeProviders,n=e.location,r=!/settings$/.test(n.pathname);return t.length<=0||r?i["default"].createElement("span",null):i["default"].createElement(o.Link,{to:"/home"},i["default"].createElement("span",{className:f},i["default"].createElement(d["default"],{name:"sidebar_ok"})))};t.SettingsLeftSidebar=(0,l.connect)(function(e){return{activeProviders:e.auth.activeProviders}})(p),t.SettingsRightSidebar=(0,l.connect)(function(e){return{activeProviders:e.auth.activeProviders}})(h)},199:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),u=r(s),c=n(28),d=n(6),f=r(d),p=n(61),h=r(p),m=n(55),v=n(4),b=r(v),y=n(42),g=r(y),w=function(e){var t=e.provider,n=e.isActive,r=e.toggleAuth,a=(0,f["default"])("social-list","vertically_center"),i=(0,f["default"])({"social-icon animate--faster tips":!0,"social-icon--active tips--active":n});return u["default"].createElement("div",{className:a},u["default"].createElement("button",{className:i,type:"button",onClick:r.bind(null,t)},u["default"].createElement(b["default"],{name:t})))},_=function(e){function t(e){a(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.toggleAuth=n.toggleAuth.bind(n),n.handleStorageChange=n.handleStorageChange.bind(n),n.handleSwipedLeft=n.handleSwipedLeft.bind(n),n.handleSwipedRight=n.handleSwipedRight.bind(n),n}return o(t,e),l(t,[{key:"toggleAuth",value:function(e){this.props.activeProviders.indexOf(e)<0?window.open("/auth/"+e,"_blank"):this.props.removeToken(e)}},{key:"handleStorageChange",value:function(e){"addToken"===e.key&&this.props.addToken()}},{key:"handleSwipedLeft",value:function(){this.props.history.push("/home")}},{key:"handleSwipedRight",value:function(){this.props.history.push("/settings/replicant")}},{key:"componentWillMount",value:function(){this.props.clearTokenIfTokenExpired()}},{key:"componentDidMount",value:function(){window.addEventListener("storage",this.handleStorageChange)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("storage",this.handleStorageChange)}},{key:"render",value:function(){var e=this,t=this.props,n=t.providers,r=t.activeProviders,a=t.children,i=(0,f["default"])("social-wrapper","animate--faster");return u["default"].createElement(h["default"],{onSwipedLeft:this.handleSwipedLeft,onSwipedRight:this.handleSwipedRight},u["default"].createElement("div",{className:i},n.map(function(t){return u["default"].createElement(w,{key:t,provider:t,isActive:r.indexOf(t)>=0,toggleAuth:e.toggleAuth})})),u["default"].createElement(g["default"],null,a))}}]),t}(u["default"].Component);t["default"]=(0,c.connect)(function(e){var t=e.auth,n=t.providers,r=t.activeProviders;return{providers:n,activeProviders:r}},{addToken:m.addToken,removeToken:m.removeToken,clearTokenIfTokenExpired:m.clearTokenIfTokenExpired})(_)},222:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),u=r(s),c=n(6),d=r(c),f=n(231),p=r(f),h=n(4),m=r(h),v=function(e){function t(e){a(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.state={isShowScrollBtn:!1},n.scrollToTop=n.scrollToTop.bind(n),n.setScrollBtnState=n.setScrollBtnState.bind(n),n.handleContainerScoll=n.handleContainerScoll.bind(n),n}return o(t,e),l(t,[{key:"scrollToTop",value:function(){var e=this.props,t=e.target,n=e.container,r=e.duration;(new p["default"]).jump(t,{container:n,duration:r})}},{key:"setScrollBtnState",value:function(e){this.setState({isShowScrollBtn:e})}},{key:"handleContainerScoll",value:function(e){var t=this,n=70,r=this.state.isShowScrollBtn,a=e.target.scrollTop;n>a?this.setScrollBtnState(!1):!r&&a<this.lastPosTop&&(this.setScrollBtnState(!0),setTimeout(function(){return t.setScrollBtnState(!1)},7e3)),this.lastPosTop=a}},{key:"componentDidMount",value:function(){var e=document.querySelector(this.props.container);e.addEventListener("scroll",this.handleContainerScoll)}},{key:"componentWillUnmount",value:function(){var e=document.querySelector(this.props.container);e.removeEventListener("scroll",this.handleContainerScoll)}},{key:"render",value:function(){var e=this.state.isShowScrollBtn,t=(0,d["default"])({"scrollTo scrollTo--top tips animate--faster":!0,"scrollTo--top--active":e});return u["default"].createElement("button",{className:t,onClick:this.scrollToTop},u["default"].createElement(m["default"],{name:"triangle"}))}}]),t}(u["default"].Component);t["default"]=v},223:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var a=n(1),i=r(a),o=n(60),l=r(o),s=(n(54),n(28)),u=n(13);n(173),n(111),n(122);var c=n(228),d=r(c),f=n(43),p=r(f),h=n(75),m=r(h);l["default"].render(i["default"].createElement(s.Provider,{store:p["default"]},i["default"].createElement(u.Router,{history:m["default"]},d["default"])),document.querySelector(".root"))},228:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),i=r(a),o=n(13),l=n(229),s=r(l),u=n(176),c=r(u),d=n(179),f=r(d),p=n(178),h=n(199),m=r(h),v=n(198),b=n(197),y=r(b),g=n(195),w=n(196),_=n(194),E={main:f["default"],leftSidebar:p.HomeLeftSidebar,rightSidebar:p.HomeRightSidebar},k={main:m["default"],leftSidebar:v.SettingsLeftSidebar,rightSidebar:v.SettingsRightSidebar};t["default"]=i["default"].createElement(o.Route,{path:"/",component:c["default"]},i["default"].createElement(o.IndexRoute,{onEnter:s["default"].Home}),i["default"].createElement(o.Route,{path:"home",components:E,onEnter:s["default"].Auth},i["default"].createElement(o.Route,{path:":provider",component:y["default"],onEnter:s["default"].VaildProvider},i["default"].createElement(o.IndexRoute,{component:g.HomeMenu}),i["default"].createElement(o.Route,{path:":action(/:id)",component:_.Action,onEnter:s["default"].VaildAction}))),i["default"].createElement(o.Route,{path:"settings",components:k},i["default"].createElement(o.Route,{path:"replicant",component:y["default"]},i["default"].createElement(o.IndexRoute,{component:g.SettingsMenu}),i["default"].createElement(o.Route,{path:"deckard",component:w.Deckard}),i["default"].createElement(o.Route,{path:"rachael",component:w.Rachael}),i["default"].createElement(o.Redirect,{from:"*",to:"deckard"}))),i["default"].createElement(o.Redirect,{from:"*",to:"settings"}))},229:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(76);t["default"]={Home:function(e,t){"/"===e.location.pathname&&t(null,"/home")},Auth:function(e,t){(0,r.isValidToken)()||t(null,"/settings")},VaildProvider:function(e,t){var n=e.params.provider,r=["twitter","instagram","weibo"];r.indexOf(n)<0&&t(null,"/home")},VaildAction:function(e,t){var n=e.params.action,r=["user","tags","locations","read","tweet","retweet","quote","reply","detail","share","search"];r.indexOf(n)<0&&t(null,"/home");var a=["retweet","quote","reply","share"];a.indexOf(n)>=0&&!e.location.state&&t(null,"/home")}}},231:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t,n,r){return e/=r/2,1>e?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)},i=function(){function e(){n(this,e)}return r(e,[{key:"jump",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.options={duration:n.duration,offset:n.offset||0,callback:n.callback,easing:n.easing||a,container:document.querySelector(n.container)||null},this.distance="string"==typeof e?this.options.offset+document.querySelector(e).getBoundingClientRect().top:e,this.duration="function"==typeof this.options.duration?this.options.duration(this.distance):this.options.duration,this.options.container?this.start=this.options.container.scrollTop:this.start=window.pageYOffset,requestAnimationFrame(function(e){return t._loop(e)})}},{key:"_loop",value:function(e){var t=this;this.timeStart||(this.timeStart=e),this.timeElapsed=e-this.timeStart,this.next=this.options.easing(this.timeElapsed,this.start,this.distance,this.duration),this.options.container?this.options.container.scrollTop=this.next:window.scrollTo(0,this.next),this.timeElapsed<this.duration?requestAnimationFrame(function(e){return t._loop(e)}):this._end()}},{key:"_end",value:function(){this.options.container?this.options.container.scrollTop=this.next+this.distance:window.scrollTo(0,this.next+this.distance),"function"==typeof this.options.callback&&this.options.callback(),this.timeStart=!1}}]),e}();t["default"]=i},236:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(243),l=r(o),s=function(){function e(t){a(this,e),this.resolveOptions(t),this.initSelection()}return e.prototype.resolveOptions=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action=e.action,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""},e.prototype.initSelection=function(){if(this.text&&this.target)throw new Error('Multiple attributes declared, use either "target" or "text"');if(this.text)this.selectFake();else{if(!this.target)throw new Error('Missing required attributes, use either "target" or "text"');this.selectTarget()}},e.prototype.selectFake=function(){var e=this;this.removeFake(),this.fakeHandler=document.body.addEventListener("click",function(){return e.removeFake()}),this.fakeElem=document.createElement("textarea"),this.fakeElem.style.position="absolute",this.fakeElem.style.left="-9999px",this.fakeElem.style.top=(window.pageYOffset||document.documentElement.scrollTop)+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=l["default"](this.fakeElem),this.copyText()},e.prototype.removeFake=function(){this.fakeHandler&&(document.body.removeEventListener("click"),this.fakeHandler=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)},e.prototype.selectTarget=function(){this.selectedText=l["default"](this.target),this.copyText()},e.prototype.copyText=function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)},e.prototype.handleResult=function(e){e?this.emitter.emit("success",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)}):this.emitter.emit("error",{action:this.action,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})},e.prototype.clearSelection=function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()},e.prototype.destroy=function(){this.removeFake()},i(e,[{key:"action",set:function(){var e=arguments.length<=0||void 0===arguments[0]?"copy":arguments[0];if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!=typeof e||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');this._target=e}},get:function(){return this._target}}]),e}();t["default"]=s,e.exports=t["default"]},237:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){var n="data-clipboard-"+e;return t.hasAttribute(n)?t.getAttribute(n):void 0}t.__esModule=!0;var l=n(236),s=r(l),u=n(244),c=r(u),d=n(242),f=r(d),p=function(e){function t(n,r){a(this,t),e.call(this),this.resolveOptions(r),this.listenClick(n)}return i(t,e),t.prototype.resolveOptions=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText},t.prototype.listenClick=function(e){var t=this;this.listener=f["default"](e,"click",function(e){return t.onClick(e)})},t.prototype.onClick=function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new s["default"]({action:this.action(t),target:this.target(t),text:this.text(t),trigger:t,emitter:this})},t.prototype.defaultAction=function(e){return o("action",e)},t.prototype.defaultTarget=function(e){var t=o("target",e);return t?document.querySelector(t):void 0},t.prototype.defaultText=function(e){return o("text",e)},t.prototype.destroy=function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)},t}(c["default"]);t["default"]=p,e.exports=t["default"]},238:function(e,t,n){var r=n(239);e.exports=function(e,t,n){for(var a=n?e:e.parentNode;a&&a!==document;){if(r(a,t))return a;a=a.parentNode}}},239:function(e,t){function n(e,t){if(a)return a.call(e,t);for(var n=e.parentNode.querySelectorAll(t),r=0;r<n.length;++r)if(n[r]==e)return!0;return!1}var r=Element.prototype,a=r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector;e.exports=n},240:function(e,t,n){function r(e,t,n,r,i){var o=a.apply(this,arguments);return e.addEventListener(n,o,i),{destroy:function(){e.removeEventListener(n,o,i)}}}function a(e,t,n,r){return function(n){n.delegateTarget=i(n.target,t,!0),n.delegateTarget&&r.call(e,n)}}var i=n(238);e.exports=r},241:function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t["function"]=function(e){var t=Object.prototype.toString.call(e);return"[object Function]"===t}},242:function(e,t,n){function r(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!l.string(t))throw new TypeError("Second argument must be a String");if(!l["function"](n))throw new TypeError("Third argument must be a Function");if(l.node(e))return a(e,t,n);if(l.nodeList(e))return i(e,t,n);if(l.string(e))return o(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function a(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}function i(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}function o(e,t,n){return s(document.body,e,t,n)}var l=n(241),s=n(240);e.exports=r},243:function(e,t){function n(e){var t;if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName)e.focus(),e.setSelectionRange(0,e.value.length),t=e.value;else{e.hasAttribute("contenteditable")&&e.focus();var n=window.getSelection(),r=document.createRange();r.selectNodeContents(e),n.removeAllRanges(),n.addRange(r),t=n.toString()}return t}e.exports=n},244:function(e,t){function n(){}n.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function r(){a.off(e,r),t.apply(n,arguments)}var a=this;return r._=t,this.on(e,r,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,a=n.length;for(r;a>r;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],a=[];if(r&&t)for(var i=0,o=r.length;o>i;i++)r[i].fn!==t&&r[i].fn._!==t&&a.push(r[i]);return a.length?n[e]=a:delete n[e],this}},e.exports=n}});